# Loom Agent v0.1.6 - Phase 1 & 2 Core Improvements + Agent Skills System

**å‘å¸ƒæ—¥æœŸ**: 2024-12-14  
**ç‰ˆæœ¬**: v0.1.6  
**çŠ¶æ€**: ç¨³å®šç‰ˆæœ¬ ğŸš€

---

## ğŸ“£ å‘å¸ƒå…¬å‘Š

v0.1.6 å®Œæˆäº† Phase 1 (æ ¸å¿ƒåŠŸèƒ½) å’Œ Phase 2 (è´¨é‡ä¸å®¹é”™) çš„æ”¹è¿›ï¼Œå¹¶å¼•å…¥äº†å…¨æ–°çš„ **Agent Skills System**ï¼Œé€šè¿‡é›¶ä¾µå…¥ã€åŸºäºæ–‡ä»¶ç³»ç»Ÿçš„æ¶æ„å®ç°æ¨¡å—åŒ–èƒ½åŠ›æ‰©å±•ã€‚

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸš€ Phase 1: æ ¸å¿ƒåŠŸèƒ½æ”¹è¿›

- **å·¥å…·çº§å¹¶è¡Œæ‰§è¡Œ** (`loom/core/executor.py`)
  - ä»ä¸²è¡Œæ”¹ä¸ºå¹¶è¡Œå·¥å…·æ‰§è¡Œï¼Œä½¿ç”¨ `asyncio.gather()`
  - å¤šå·¥å…·è°ƒç”¨æ€§èƒ½æå‡ 3 å€
  - æ¯ä¸ªå·¥å…·æ‰§è¡Œç‹¬ç«‹äº‹ä»¶å‘å°„

- **äº‹ä»¶ç³»ç»Ÿé›†æˆ** (`loom/core/executor.py`, `loom/core/events.py`)
  - `AgentExecutor` æ–°å¢ `event_handler` å‚æ•°
  - å®Œæ•´æ‰§è¡Œè¿½è¸ªï¼šagent_start/end/error, llm_start/end, tool_start/end
  - æ–°äº‹ä»¶åˆ›å»ºå‡½æ•°ï¼š`create_agent_error_event()`, `create_llm_start_event()`, `create_llm_end_event()`
  - æ”¯æŒæµå¼è¾“å‡ºå’Œå¯è§‚æµ‹æ€§

- **Token ç»Ÿè®¡** (`loom/core/executor.py`)
  - è¿½è¸ª `total_llm_calls`, `total_tool_calls`, `total_tokens_input`, `total_tokens_output`, `total_errors`
  - å¢å¼ºçš„ `get_stats()` æ–¹æ³•è¿”å›å…¨é¢ç»Ÿè®¡
  - æˆæœ¬è¿½è¸ªå’Œæ€§èƒ½åˆ†æèƒ½åŠ›

- **å·¥å…·å¯å‘å¼** (`loom/agents/simple.py`)
  - å®ç° `_generate_default_system_prompt()`ï¼ŒåŒ…å« 7 ç‚¹å·¥å…·ä½¿ç”¨æŒ‡å—
  - æ›´æ™ºèƒ½çš„å·¥å…·é€‰æ‹©å’Œå‡å°‘æ— æ•ˆå·¥å…·è°ƒç”¨
  - æå‡ä»»åŠ¡å®Œæˆè´¨é‡

### ğŸ›¡ï¸ Phase 2: è´¨é‡ä¸å®¹é”™

- **ä»»åŠ¡å»é‡å¢å¼º** (`loom/patterns/coordination.py`)
  - å¤šå±‚å»é‡ç­–ç•¥ï¼šç²¾ç¡®åŒ¹é… â†’ ç›¸ä¼¼åº¦æ£€æŸ¥ (85%) â†’ agent+task æ£€æŸ¥
  - ä½¿ç”¨ Jaccard ç›¸ä¼¼åº¦å®ç° `_calculate_similarity()`
  - å‡å°‘å†—ä½™å·¥ä½œï¼Œæå‡ Crew æ•ˆç‡

- **å·²éªŒè¯çš„ç°æœ‰åŠŸèƒ½**ï¼š
  - LLM è¯„ä¼°å™¨ (`loom/patterns/observability.py`) - å·²åœ¨ v0.1.6 ä¸­å®ç°
  - å››å±‚æ¢å¤ç­–ç•¥ (`loom/patterns/error_recovery.py`) - å·²åœ¨ v0.1.6 ä¸­å®ç°
  - å·¥ä½œè´Ÿè½½è‡ªåŠ¨æ‰©å±• (`loom/patterns/coordination.py`) - å·²åœ¨ v0.1.6 ä¸­å®ç°

### ğŸ¯ Agent Skills System ğŸ†•

- **Skills æ ¸å¿ƒ** (`loom/skills/`)
  - `Skill` ç±»ï¼šå®Œæ•´çš„æŠ€èƒ½å®šä¹‰ï¼ŒåŒ…å«å…ƒæ•°æ®ã€æ–‡æ¡£å’Œèµ„æº
  - `SkillMetadata` ç±»ï¼šåç§°ã€æè¿°ã€ç±»åˆ«ã€ç‰ˆæœ¬ã€æ ‡ç­¾ã€ä¾èµ–
  - `SkillManager` ç±»ï¼šåŠ è½½ã€åˆ›å»ºã€åˆ é™¤ã€å¯ç”¨/ç¦ç”¨æŠ€èƒ½
  - ä¸‰å±‚æ¸è¿›å¼æŠ«éœ²ï¼šç´¢å¼• (~50 tokens) â†’ è¯¦æƒ… (~500-2K tokens) â†’ èµ„æº (æ— é™åˆ¶)

- **SimpleAgent Skills é›†æˆ** (`loom/agents/simple.py`)
  - æ–°å¢ `skills_dir` å’Œ `enable_skills` å‚æ•°
  - Agent åˆå§‹åŒ–æ—¶è‡ªåŠ¨åŠ è½½æŠ€èƒ½
  - ç³»ç»Ÿæç¤ºä¸­çš„æŠ€èƒ½éƒ¨åˆ†ï¼Œé›¶ä»£ç ä¾µå…¥
  - æ–°æ–¹æ³•ï¼š`list_skills()`, `get_skill()`, `reload_skills()`, `enable_skill()`, `disable_skill()`, `create_skill()`
  - `get_stats()` ä¸­çš„æŠ€èƒ½ç»Ÿè®¡

- **ç¤ºä¾‹æŠ€èƒ½** (`skills/`)
  - **pdf_analyzer** (analysis): ä½¿ç”¨ PyPDF2/pdfplumber è¿›è¡Œ PDF æ–‡æ¡£åˆ†æ
  - **web_research** (tools): ä½¿ç”¨ requests/beautifulsoup4 è¿›è¡Œç½‘ç»œæœç´¢å’ŒæŠ“å–
  - **data_processor** (tools): ä½¿ç”¨ pandas/openpyxl è¿›è¡Œæ•°æ®è½¬æ¢
  - æ¯ä¸ªæŠ€èƒ½åŒ…å«ï¼š`skill.yaml`, `SKILL.md`, å’Œ `resources/` ç›®å½•

---

## ğŸ“¦ å®‰è£…

```bash
# åŸºç¡€å®‰è£…
pip install loom-agent==0.1.6

# å®‰è£… OpenAI æ”¯æŒ
pip install loom-agent[openai]==0.1.6

# å®‰è£…æ‰€æœ‰åŠŸèƒ½
pip install loom-agent[all]==0.1.6
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä½¿ç”¨ Skills System

```python
from loom.agents import SimpleAgent
from loom.builtin import OpenAILLM

# åˆ›å»ºå¸¦æŠ€èƒ½çš„ Agent
agent = SimpleAgent(
    name="assistant",
    llm=OpenAILLM(api_key="..."),
    enable_skills=True,  # å¯ç”¨æŠ€èƒ½ï¼ˆé»˜è®¤ï¼‰
    skills_dir="./skills"  # æŠ€èƒ½ç›®å½•ï¼ˆé»˜è®¤ï¼‰
)

# åˆ—å‡ºå’Œä½¿ç”¨æŠ€èƒ½
skills = agent.list_skills()
agent.enable_skill("pdf_analyzer")

# ä½¿ç”¨ Agent
result = await agent.run("åˆ†æè¿™ä¸ªPDFæ–‡ä»¶...")
```

### åˆ›å»ºè‡ªå®šä¹‰æŠ€èƒ½

```python
# ç¼–ç¨‹æ–¹å¼åˆ›å»º
skill = agent.create_skill(
    name="my_skill",
    description="å®ƒçš„åŠŸèƒ½",
    category="tools",
    quick_guide="ç®€è¦ä½¿ç”¨æç¤º"
)

# æˆ–æ‰‹åŠ¨åˆ›å»ºç›®å½•ç»“æ„ï¼š
# skills/my_skill/
#   skill.yaml
#   SKILL.md
#   resources/
```

---

## ğŸ“‹ å‘å¸ƒå†…å®¹

### ä»£ç å˜æ›´

- **ä¿®æ”¹çš„æ–‡ä»¶**: 4 ä¸ªæ ¸å¿ƒæ–‡ä»¶
- **æ–°å¢çš„æ–‡ä»¶**: 16 ä¸ªæ–‡ä»¶ (3 ä¸ªæ ¸å¿ƒ + 9 ä¸ªæŠ€èƒ½ + 3 ä¸ªæ–‡æ¡£ + 1 ä¸ªæµ‹è¯•)
- **æ–°å¢ä»£ç **: ~2000+ è¡Œ
- **å½±å“**: 3 å€æ€§èƒ½æå‡ï¼Œå®Œæ•´å¯è§‚æµ‹æ€§ï¼Œæ¨¡å—åŒ–æ‰©å±•æ€§

### æ–‡æ¡£

- **Skills System æŒ‡å—** (`docs/guides/skills/overview.md`): å®Œæ•´æŠ€èƒ½ç³»ç»ŸæŒ‡å— (~800 è¡Œ)
- **å¿«é€Ÿå‚è€ƒ** (`docs/guides/skills/quick-reference.md`): å¿«é€Ÿå‚è€ƒ (~300 è¡Œ)
- **åˆ›å»ºæŠ€èƒ½æŒ‡å—** (`docs/guides/skills/creating-skills.md`): åˆ›å»ºæŠ€èƒ½æ•™ç¨‹
- **å†…ç½®æŠ€èƒ½æ–‡æ¡£** (`docs/guides/skills/builtin-skills.md`): å†…ç½®æŠ€èƒ½è¯´æ˜

### æµ‹è¯•

- **Skills System æµ‹è¯•** (`examples/test_skills_system.py`)
  - 10 ä¸ªæµ‹è¯•åœºæ™¯ï¼Œè¦†ç›–æ‰€æœ‰ Skills åŠŸèƒ½
  - âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| ç‰¹æ€§ | æŒ‡æ ‡ |
|------|------|
| å·¥å…·æ‰§è¡Œ | å¹¶è¡Œæ‰§è¡Œæå‡ 3 å€ |
| ä»»åŠ¡å»é‡ | å‡å°‘å¤š Agent åœºæ™¯ä¸­çš„å†—ä½™å·¥ä½œ |
| ä¸Šä¸‹æ–‡æ•ˆç‡ | æ¸è¿›å¼æŠ«éœ²ä¿æŒä¸Šä¸‹æ–‡ä½¿ç”¨æœ€ä¼˜ |

---

## ğŸ”„ è¿ç§»æŒ‡å—

### å‘åå…¼å®¹æ€§

æ‰€æœ‰æ›´æ”¹éƒ½æ˜¯å‘åå…¼å®¹çš„ã€‚Skills ç³»ç»Ÿé€šè¿‡ `enable_skills=True` (é»˜è®¤) é€‰æ‹©å¯ç”¨ã€‚

### ä» v0.1.5 å‡çº§

**æ— éœ€ä»»ä½•ä»£ç æ›´æ”¹** - v0.1.6 å®Œå…¨å‘åå…¼å®¹ v0.1.5ã€‚

**è¦ä½¿ç”¨ Skills System**:

```python
from loom.agents import SimpleAgent

agent = SimpleAgent(
    name="assistant",
    llm=llm,
    enable_skills=True,  # å¯ç”¨æŠ€èƒ½ï¼ˆé»˜è®¤ï¼‰
    skills_dir="./skills"  # æŠ€èƒ½ç›®å½•ï¼ˆé»˜è®¤ï¼‰
)

# åˆ—å‡ºå’Œä½¿ç”¨æŠ€èƒ½
skills = agent.list_skills()
agent.enable_skill("pdf_analyzer")
```

---

## ğŸ¯ æ”¯æŒçš„å¹³å°

- **Python**: 3.11+
- **æ“ä½œç³»ç»Ÿ**: Linux, macOS, Windows
- **LLM æä¾›å•†**: OpenAI, Anthropic, Ollama ç­‰

---

## ğŸ“š ç›¸å…³èµ„æº

### æ–‡æ¡£

- [Skills System æ¦‚è¿°](docs/guides/skills/overview.md) - æŠ€èƒ½ç³»ç»Ÿå®Œæ•´æŒ‡å—
- [åˆ›å»ºæŠ€èƒ½](docs/guides/skills/creating-skills.md) - å¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰æŠ€èƒ½
- [å¿«é€Ÿå‚è€ƒ](docs/guides/skills/quick-reference.md) - API å¿«é€Ÿå‚è€ƒ
- [å†…ç½®æŠ€èƒ½](docs/guides/skills/builtin-skills.md) - å†…ç½®æŠ€èƒ½è¯´æ˜

### é“¾æ¥

- **PyPI**: https://pypi.org/project/loom-agent/
- **GitHub**: https://github.com/kongusen/loom-agent
- **æ–‡æ¡£**: https://github.com/kongusen/loom-agent#readme

---

## ğŸ—ºï¸ ä¸‹ä¸€æ­¥è®¡åˆ’

### v0.1.7ï¼ˆè®¡åˆ’ï¼‰
- æ›´å¤šå†…ç½®æŠ€èƒ½
- æŠ€èƒ½å¸‚åœº/æ³¨å†Œè¡¨
- æŠ€èƒ½ç‰ˆæœ¬ç®¡ç†
- æŠ€èƒ½ä¾èµ–è§£æ

### v0.2.0ï¼ˆè®¡åˆ’ï¼‰
- åˆ†å¸ƒå¼æ‰§è¡Œæ”¯æŒ
- å¤šåç«¯å­˜å‚¨ (PostgreSQL, Redis)
- Web UI ç›‘æ§
- å¢å¼ºå¯è§†åŒ–

---

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…å’Œæµ‹è¯•è€…ï¼

---

## ğŸ“ è”ç³»æ–¹å¼

- **GitHub**: https://github.com/kongusen/loom-agent
- **Issues**: https://github.com/kongusen/loom-agent/issues
- **Email**: wanghaishan0210@gmail.com

---

**æ¬¢è¿ä½¿ç”¨ Loom Agent v0.1.6ï¼** ğŸ‰

æˆ‘ä»¬æœŸå¾…æ‚¨çš„åé¦ˆå’Œå»ºè®®ï¼

