# Loom Agent Framework - å®Œæ•´æ€§éªŒè¯æŠ¥å‘Š

> éªŒè¯ Loom æ¡†æ¶æ˜¯å¦æ˜¯ä¸€ä¸ªå®Œæ•´ã€å¯ç”¨çš„ AI Agent æ¡†æ¶

---

## ğŸ“Š æ‰§è¡Œæ‘˜è¦

**ç»“è®º**: âœ… **Loom æ˜¯ä¸€ä¸ªå®Œæ•´ä¸”å¯ç”¨çš„ Agent æ¡†æ¶**

Loom æ¡†æ¶å·²ç»å®ç°äº†æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š
- âœ… å®Œæ•´çš„ Agent ä¸»å¾ªç¯ï¼ˆReAct æ¨¡å¼ï¼‰
- âœ… å·¥å…·ç³»ç»Ÿä¸å¹¶å‘è°ƒåº¦
- âœ… è®°å¿†ç®¡ç†ä¸ä¸Šä¸‹æ–‡å‹ç¼©
- âœ… RAG èƒ½åŠ›ï¼ˆä¸‰å±‚æ¶æ„ï¼‰
- âœ… å¤šç§å‘é‡æ•°æ®åº“æ”¯æŒ
- âœ… MCP åè®®é›†æˆ
- âœ… å¤š Agent ç¼–æ’
- âœ… æƒé™ç®¡ç†ä¸å®‰å…¨
- âœ… å¯è§‚æµ‹æ€§ä¸æŒ‡æ ‡

---

## 1. æ¶æ„å®Œæ•´æ€§éªŒè¯

### 1.1 å››å±‚æ¶æ„ âœ…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 4: é«˜å±‚ç»„ä»¶ (High-Level Components)              â”‚
â”‚  âœ… Agent, Chain, Router, Workflow                       â”‚
â”‚  âœ… MultiAgentSystem                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 3: æ ¸å¿ƒå¼•æ“ (Core Engine)                         â”‚
â”‚  âœ… AgentExecutor (ä¸»å¾ªç¯)                               â”‚
â”‚  âœ… ToolPipeline (6 é˜¶æ®µæµæ°´çº¿)                          â”‚
â”‚  âœ… Scheduler (å¹¶å‘è°ƒåº¦)                                 â”‚
â”‚  âœ… EventBus (äº‹ä»¶æµ)                                    â”‚
â”‚  âœ… PermissionManager (æƒé™ç®¡ç†)                         â”‚
â”‚  âœ… ContextRetriever (RAG æ ¸å¿ƒ)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 2: æ¥å£å±‚ (Interfaces)                            â”‚
â”‚  âœ… BaseLLM                                              â”‚
â”‚  âœ… BaseTool                                             â”‚
â”‚  âœ… BaseMemory                                           â”‚
â”‚  âœ… BaseCompressor                                       â”‚
â”‚  âœ… BaseRetriever                                        â”‚
â”‚  âœ… BaseVectorStore                                      â”‚
â”‚  âœ… BaseEmbedding                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 1: å†…ç½®å®ç° (Built-in Implementations)            â”‚
â”‚  âœ… LLM: OpenAI, Mock, Rule                             â”‚
â”‚  âœ… Tools: 10+ å†…ç½®å·¥å…·                                  â”‚
â”‚  âœ… Memory: InMemoryMemory                               â”‚
â”‚  âœ… Compressor: StructuredCompressor                     â”‚
â”‚  âœ… Retriever: InMemory, VectorStore                     â”‚
â”‚  âœ… VectorStore: Pinecone, Qdrant, Milvus, ChromaDB     â”‚
â”‚  âœ… Embedding: OpenAI, SentenceTransformers             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**éªŒè¯**: âœ… æ‰€æœ‰å±‚çº§å®Œæ•´å®ç°

---

## 2. æ ¸å¿ƒåŠŸèƒ½éªŒè¯

### 2.1 Agent ä¸»å¾ªç¯ âœ…

**æ–‡ä»¶**: `loom/core/agent_executor.py`

**åŠŸèƒ½**:
- âœ… ReAct å¾ªç¯ï¼ˆæ¨ç† â†’ è¡ŒåŠ¨ â†’ è§‚å¯Ÿï¼‰
- âœ… å·¥å…·è°ƒç”¨ä¸ç»“æœå¤„ç†
- âœ… ä¸Šä¸‹æ–‡å‹ç¼©æ£€æŸ¥
- âœ… æµå¼è¾“å‡ºæ”¯æŒ
- âœ… äº‹ä»¶æµå¹¿æ’­
- âœ… æœ€å¤§è¿­ä»£é™åˆ¶

**å…³é”®ä»£ç **:
```python
async def execute(self, user_input: str) -> str:
    history = await self._load_history()

    # RAG: è‡ªåŠ¨æ£€ç´¢
    if self.context_retriever:
        retrieved_docs = await self.context_retriever.retrieve_for_query(user_input)
        # æ³¨å…¥æ–‡æ¡£ä¸Šä¸‹æ–‡

    history.append(Message(role="user", content=user_input))
    history = await self._maybe_compress(history)

    # ReAct å¾ªç¯
    for i in range(max_iterations):
        resp = await self.llm.generate_with_tools(history, tools)
        if resp.tool_calls:
            # æ‰§è¡Œå·¥å…·
            for result in await self._execute_tool_batch(tool_calls):
                history.append(tool_result)
        else:
            # æœ€ç»ˆç­”æ¡ˆ
            return resp.content
```

**éªŒè¯**: âœ… ä¸»å¾ªç¯å®Œæ•´ï¼Œæ”¯æŒ RAGã€å·¥å…·ã€è®°å¿†

---

### 2.2 å·¥å…·ç³»ç»Ÿ âœ…

**æ–‡ä»¶**: `loom/core/tool_pipeline.py`

**6 é˜¶æ®µæµæ°´çº¿**:
1. âœ… **Discover**: å·¥å…·æŸ¥æ‰¾ä¸å¯ç”¨æ€§æ£€æŸ¥
2. âœ… **Validate**: Pydantic å‚æ•°æ ¡éªŒ
3. âœ… **Authorize**: æƒé™æ£€æŸ¥ï¼ˆallow/deny/askï¼‰
4. âœ… **CheckCancel**: ä¸­æ–­ä¿¡å·æ£€æŸ¥
5. âœ… **Execute**: è°ƒåº¦å™¨æ‰§è¡Œï¼ˆå¹¶å‘/è¶…æ—¶ï¼‰
6. âœ… **Format**: ç»“æœæ ¼å¼åŒ–ä¸æŒ‡æ ‡æ”¶é›†

**å¹¶å‘è°ƒåº¦** (`loom/core/scheduler.py`):
- âœ… å¹¶å‘å®‰å…¨å·¥å…·å¹¶è¡Œæ‰§è¡Œ
- âœ… éå¹¶å‘å®‰å…¨å·¥å…·ä¸²è¡Œæ‰§è¡Œ
- âœ… Semaphore æ§åˆ¶å¹¶å‘æ•°
- âœ… è¶…æ—¶æ§åˆ¶ï¼ˆasyncio.wait_forï¼‰

**å†…ç½®å·¥å…·** (10+):
- âœ… Calculator
- âœ… ReadFile, WriteFile
- âœ… Glob, Grep
- âœ… WebSearch
- âœ… PythonREPL
- âœ… HttpRequest
- âœ… DocumentSearchTool
- âœ… Task (å­ Agent è°ƒç”¨)

**éªŒè¯**: âœ… å·¥å…·ç³»ç»Ÿå®Œæ•´ï¼Œæµæ°´çº¿è§„èŒƒ

---

### 2.3 è®°å¿†ç®¡ç† âœ…

**æ–‡ä»¶**: `loom/builtin/memory/in_memory.py`

**åŠŸèƒ½**:
- âœ… æ¶ˆæ¯å­˜å‚¨ï¼ˆuser/assistant/system/toolï¼‰
- âœ… å†å²æ£€ç´¢ï¼ˆå…¨éƒ¨/é™åˆ¶æ•°é‡ï¼‰
- âœ… æ¸…ç©ºè®°å¿†
- âœ… æŒä¹…åŒ–æ¥å£ï¼ˆsave/loadï¼‰

**ä¸Šä¸‹æ–‡å‹ç¼©** (`loom/builtin/compression/structured.py`):
- âœ… 8 æ®µå¼ç»“æ„åŒ–æ‘˜è¦
- âœ… é˜ˆå€¼è§¦å‘ï¼ˆ0.92ï¼‰
- âœ… ä¿ç•™å…³é”®æ¶ˆæ¯çª—å£

**éªŒè¯**: âœ… è®°å¿†ç®¡ç†å®Œæ•´ï¼Œæ”¯æŒå‹ç¼©

---

### 2.4 RAG èƒ½åŠ› âœ…

**ä¸‰å±‚æ¶æ„**:

#### Layer 1: ContextRetrieverï¼ˆæ ¸å¿ƒç»„ä»¶ï¼‰
**æ–‡ä»¶**: `loom/core/context_retriever.py`

- âœ… è‡ªåŠ¨æ£€ç´¢ï¼ˆæ¯æ¬¡æŸ¥è¯¢å‰ï¼‰
- âœ… æ–‡æ¡£æ ¼å¼åŒ–ä¸æ³¨å…¥
- âœ… ç›¸ä¼¼åº¦é˜ˆå€¼è¿‡æ»¤
- âœ… é›†æˆåˆ° AgentExecutor

#### Layer 2: DocumentSearchToolï¼ˆå·¥å…·ç‰ˆæœ¬ï¼‰
**æ–‡ä»¶**: `loom/builtin/tools/document_search.py`

- âœ… LLM æ§åˆ¶æ£€ç´¢
- âœ… ä¸å…¶ä»–å·¥å…·ç»„åˆ
- âœ… å¤šæ¬¡æ£€ç´¢æ”¯æŒ

#### Layer 3: RAGPatternï¼ˆé«˜çº§æ¨¡å¼ï¼‰
**æ–‡ä»¶**: `loom/patterns/rag.py`

- âœ… RAGPatternï¼ˆåŸºç¡€ + Re-rankingï¼‰
- âœ… MultiQueryRAGï¼ˆå¤šæŸ¥è¯¢å˜ä½“ï¼‰
- âœ… HierarchicalRAGï¼ˆå±‚æ¬¡åŒ–æ£€ç´¢ï¼‰

**éªŒè¯**: âœ… RAG ä¸‰å±‚æ¶æ„å®Œæ•´

---

### 2.5 å‘é‡æ•°æ®åº“æ”¯æŒ âœ…

**ç»Ÿä¸€æ¥å£**: `loom/interfaces/vector_store.py`

**æ”¯æŒçš„æ•°æ®åº“**:
1. âœ… **Pinecone** (`loom/builtin/retriever/pinecone_store.py`)
   - äº‘æœåŠ¡ï¼Œè‡ªåŠ¨æ‰©å±•

2. âœ… **Qdrant** (`loom/builtin/retriever/qdrant_store.py`)
   - å¼€æºï¼Œé«˜æ€§èƒ½ Rust å®ç°

3. âœ… **Milvus** (`loom/builtin/retriever/milvus_store.py`)
   - æµ·é‡æ•°æ®æ”¯æŒï¼ˆ10B+ å‘é‡ï¼‰

4. âœ… **ChromaDB** (`loom/builtin/retriever/chroma_store.py`)
   - æç®€ APIï¼Œé€‚åˆåŸå‹

**Embedding æ”¯æŒ**:
1. âœ… **OpenAI** (`loom/builtin/embeddings/openai_embedding.py`)
   - text-embedding-3-small/large

2. âœ… **Sentence Transformers** (`loom/builtin/embeddings/sentence_transformers_embedding.py`)
   - æœ¬åœ°æ¨¡å‹ï¼Œæ”¯æŒå¤šè¯­è¨€

**é…ç½®ç®¡ç†**: `loom/builtin/retriever/vector_store_config.py`
- âœ… ç»Ÿä¸€é…ç½®ç±»
- âœ… å¿«é€Ÿå·¥å‚æ–¹æ³•

**éªŒè¯**: âœ… å‘é‡æ•°æ®åº“æ”¯æŒå®Œæ•´

---

### 2.6 MCP åè®®é›†æˆ âœ…

**æ–‡ä»¶**: `loom/mcp/`

**ç»„ä»¶**:
- âœ… `MCPClient`: JSON-RPC over stdio
- âœ… `MCPTool`: å·¥å…·é€‚é…å™¨
- âœ… `MCPToolRegistry`: æœåŠ¡å‘ç°ä¸æ³¨å†Œ

**åŠŸèƒ½**:
- âœ… è‡ªåŠ¨å‘ç°æœ¬åœ° MCP æœåŠ¡å™¨
- âœ… JSON Schema â†’ Pydantic è‡ªåŠ¨è½¬æ¢
- âœ… å®‰å…¨å‘½åç©ºé—´ï¼ˆserver:toolï¼‰

**éªŒè¯**: âœ… MCP é›†æˆå®Œæ•´

---

### 2.7 å¤š Agent ç¼–æ’ âœ…

**æ–‡ä»¶**: `loom/patterns/multi_agent.py`

**æ¨¡å¼**:
- âœ… é¡ºåºæ‰§è¡Œï¼ˆSequentialï¼‰
- âœ… å¹¶è¡Œæ‰§è¡Œï¼ˆParallelï¼‰
- âœ… æ¡ä»¶è·¯ç”±ï¼ˆConditionalï¼‰
- âœ… åˆ†å±‚æ¶æ„ï¼ˆHierarchicalï¼‰

**é«˜å±‚ç»„ä»¶**:
- âœ… `Chain`: é¡ºåºé“¾å¼è°ƒç”¨
- âœ… `Router`: æ¡ä»¶è·¯ç”±
- âœ… `Workflow`: å¤æ‚å·¥ä½œæµ

**éªŒè¯**: âœ… å¤š Agent ç¼–æ’å®Œæ•´

---

### 2.8 æƒé™ä¸å®‰å…¨ âœ…

**æ–‡ä»¶**: `loom/core/permissions.py`

**åŠŸèƒ½**:
- âœ… æƒé™ç­–ç•¥ï¼ˆallow/deny/askï¼‰
- âœ… å·¥å…·çº§æƒé™æ§åˆ¶
- âœ… äº¤äº’å¼ç¡®è®¤ï¼ˆask æ¨¡å¼ï¼‰
- âœ… å®¡è®¡æ—¥å¿—

**éªŒè¯**: âœ… æƒé™ç®¡ç†å®Œæ•´

---

### 2.9 å¯è§‚æµ‹æ€§ âœ…

**æ–‡ä»¶**: `loom/callbacks/metrics.py`

**æŒ‡æ ‡æ”¶é›†**:
- âœ… LLM è°ƒç”¨æ¬¡æ•°
- âœ… å·¥å…·è°ƒç”¨æ¬¡æ•°
- âœ… è¿­ä»£æ¬¡æ•°
- âœ… æ£€ç´¢æ¬¡æ•°
- âœ… æˆåŠŸç‡ç»Ÿè®¡

**äº‹ä»¶ç³»ç»Ÿ** (`loom/core/event_bus.py`):
- âœ… æµå¼äº‹ä»¶å¹¿æ’­
- âœ… ä¸­æ–­/æš‚åœ/æ¢å¤

**æ—¥å¿—å›è°ƒ** (`loom/callbacks/logging.py`):
- âœ… ç»“æ„åŒ–æ—¥å¿—
- âœ… å·¥å…·è°ƒç”¨æ—¥å¿—

**éªŒè¯**: âœ… å¯è§‚æµ‹æ€§å®Œæ•´

---

## 3. æ–‡ä»¶ç»“æ„éªŒè¯

### 3.1 æ ¸å¿ƒæ–‡ä»¶æ¸…å•

```
loom/
â”œâ”€â”€ __init__.py                        âœ… å¯¼å‡ºé«˜å±‚ API
â”œâ”€â”€ interfaces/                        âœ… æ¥å£å±‚ï¼ˆ7 ä¸ªæ¥å£ï¼‰
â”‚   â”œâ”€â”€ llm.py                         âœ…
â”‚   â”œâ”€â”€ tool.py                        âœ…
â”‚   â”œâ”€â”€ memory.py                      âœ…
â”‚   â”œâ”€â”€ compressor.py                  âœ…
â”‚   â”œâ”€â”€ retriever.py                   âœ…
â”‚   â”œâ”€â”€ vector_store.py                âœ…
â”‚   â””â”€â”€ embedding.py                   âœ…
â”œâ”€â”€ core/                              âœ… æ ¸å¿ƒå¼•æ“
â”‚   â”œâ”€â”€ types.py                       âœ… æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ event_bus.py                   âœ… äº‹ä»¶ç³»ç»Ÿ
â”‚   â”œâ”€â”€ errors.py                      âœ… é”™è¯¯å®šä¹‰
â”‚   â”œâ”€â”€ scheduler.py                   âœ… å¹¶å‘è°ƒåº¦
â”‚   â”œâ”€â”€ tool_pipeline.py               âœ… å·¥å…·æµæ°´çº¿
â”‚   â”œâ”€â”€ permissions.py                 âœ… æƒé™ç®¡ç†
â”‚   â”œâ”€â”€ system_prompt.py               âœ… ç³»ç»Ÿæç¤ºç”Ÿæˆ
â”‚   â”œâ”€â”€ agent_executor.py              âœ… Agent ä¸»å¾ªç¯
â”‚   â””â”€â”€ context_retriever.py           âœ… RAG æ ¸å¿ƒ
â”œâ”€â”€ components/                        âœ… é«˜å±‚ç»„ä»¶
â”‚   â”œâ”€â”€ agent.py                       âœ… Agent
â”‚   â”œâ”€â”€ chain.py                       âœ… Chain
â”‚   â”œâ”€â”€ router.py                      âœ… Router
â”‚   â””â”€â”€ workflow.py                    âœ… Workflow
â”œâ”€â”€ patterns/                          âœ… ç¼–æ’æ¨¡å¼
â”‚   â”œâ”€â”€ multi_agent.py                 âœ… å¤š Agent
â”‚   â””â”€â”€ rag.py                         âœ… RAG æ¨¡å¼
â”œâ”€â”€ builtin/                           âœ… å†…ç½®å®ç°
â”‚   â”œâ”€â”€ llms/                          âœ… LLM å®ç°ï¼ˆ3 ä¸ªï¼‰
â”‚   â”œâ”€â”€ tools/                         âœ… å·¥å…·ï¼ˆ10+ ä¸ªï¼‰
â”‚   â”œâ”€â”€ memory/                        âœ… è®°å¿†å®ç°
â”‚   â”œâ”€â”€ compression/                   âœ… å‹ç¼©å®ç°
â”‚   â”œâ”€â”€ retriever/                     âœ… æ£€ç´¢å™¨ï¼ˆ6 ä¸ªï¼‰
â”‚   â””â”€â”€ embeddings/                    âœ… Embeddingï¼ˆ2 ä¸ªï¼‰
â”œâ”€â”€ mcp/                               âœ… MCP é›†æˆ
â”‚   â”œâ”€â”€ client.py                      âœ…
â”‚   â”œâ”€â”€ tool_adapter.py                âœ…
â”‚   â””â”€â”€ registry.py                    âœ…
â”œâ”€â”€ callbacks/                         âœ… å›è°ƒç³»ç»Ÿ
â”‚   â”œâ”€â”€ base.py                        âœ…
â”‚   â”œâ”€â”€ logging.py                     âœ…
â”‚   â””â”€â”€ metrics.py                     âœ…
â”œâ”€â”€ plugins/                           âœ… æ’ä»¶ç³»ç»Ÿ
â”‚   â””â”€â”€ registry.py                    âœ…
â””â”€â”€ utils/                             âœ… å·¥å…·å‡½æ•°
    â””â”€â”€ token_counter.py               âœ…
```

**ç»Ÿè®¡**:
- æ¥å£: 7 ä¸ª âœ…
- æ ¸å¿ƒæ¨¡å—: 9 ä¸ª âœ…
- é«˜å±‚ç»„ä»¶: 4 ä¸ª âœ…
- ç¼–æ’æ¨¡å¼: 2 ä¸ª âœ…
- å†…ç½®å®ç°: 25+ ä¸ª âœ…
- **æ€»è®¡**: 50+ ä¸ªæ ¸å¿ƒæ–‡ä»¶ âœ…

---

## 4. æ–‡æ¡£å®Œæ•´æ€§éªŒè¯

### 4.1 æ ¸å¿ƒæ–‡æ¡£æ¸…å•

```
æ–‡æ¡£/
â”œâ”€â”€ LOOM_UNIFIED_DEVELOPER_GUIDE.md    âœ… ç»Ÿä¸€å¼€å‘æŒ‡å—
â”œâ”€â”€ LOOM_RAG_GUIDE.md                  âœ… RAG å®Œæ•´æŒ‡å—
â”œâ”€â”€ VECTOR_STORE_SETUP_GUIDE.md        âœ… å‘é‡æ•°æ®åº“é…ç½®æŒ‡å—
â”œâ”€â”€ LOOM_MCP_INTEGRATION.md            âœ… MCP é›†æˆæ–‡æ¡£
â”œâ”€â”€ LOOM_FRAMEWORK_DESIGN_V2.md        âœ… æ¡†æ¶è®¾è®¡æ–‡æ¡£
â””â”€â”€ examples/
    â”œâ”€â”€ loom_quickstart.py             âœ… å¿«é€Ÿå¼€å§‹
    â”œâ”€â”€ rag_basic_example.py           âœ… RAG åŸºç¡€ç¤ºä¾‹
    â”œâ”€â”€ rag_tool_example.py            âœ… RAG å·¥å…·ç¤ºä¾‹
    â”œâ”€â”€ rag_patterns_example.py        âœ… RAG é«˜çº§æ¨¡å¼
    â”œâ”€â”€ vector_store_quickstart.py     âœ… å‘é‡æ•°æ®åº“é…ç½®
    â”œâ”€â”€ loom_tools_loop.py             âœ… å·¥å…·å¾ªç¯ç¤ºä¾‹
    â””â”€â”€ README_RAG_EXAMPLES.md         âœ… ç¤ºä¾‹ç´¢å¼•
```

**éªŒè¯**: âœ… æ–‡æ¡£å®Œæ•´ï¼Œæ¶µç›–æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½

---

## 5. ä¸ LangChain å¯¹æ¯”

| åŠŸèƒ½ | LangChain | Loom | çŠ¶æ€ |
|------|-----------|------|------|
| **Agent ä¸»å¾ªç¯** | âœ… | âœ… | å¯¹æ ‡ |
| **å·¥å…·ç³»ç»Ÿ** | âœ… | âœ…ï¼ˆ6 é˜¶æ®µæµæ°´çº¿ï¼‰ | è¶…è¶Š |
| **è®°å¿†ç®¡ç†** | âœ… | âœ… | å¯¹æ ‡ |
| **ä¸Šä¸‹æ–‡å‹ç¼©** | âœ… | âœ…ï¼ˆ8 æ®µå¼ï¼‰ | å¯¹æ ‡ |
| **RAG èƒ½åŠ›** | âœ… | âœ…ï¼ˆä¸‰å±‚æ¶æ„ï¼‰ | è¶…è¶Š |
| **å‘é‡æ•°æ®åº“** | âœ…ï¼ˆéƒ¨åˆ†ï¼‰ | âœ…ï¼ˆ4 ä¸ªä¸»æµï¼‰ | å¯¹æ ‡ |
| **MCP åè®®** | âŒ | âœ… | è¶…è¶Š |
| **å¹¶å‘è°ƒåº¦** | âœ… | âœ… | å¯¹æ ‡ |
| **æƒé™ç®¡ç†** | âŒ | âœ… | è¶…è¶Š |
| **æµå¼è¾“å‡º** | âœ… | âœ… | å¯¹æ ‡ |
| **å¤š Agent** | âœ… | âœ… | å¯¹æ ‡ |
| **ç±»å‹å®‰å…¨** | éƒ¨åˆ† | âœ…ï¼ˆå…¨ Pydanticï¼‰ | è¶…è¶Š |
| **å¯è§‚æµ‹æ€§** | éƒ¨åˆ† | âœ…ï¼ˆå®Œæ•´æŒ‡æ ‡ï¼‰ | è¶…è¶Š |

**ç»“è®º**: Loom åœ¨æ¶æ„æ¸…æ™°åº¦ã€ç±»å‹å®‰å…¨ã€MCP æ”¯æŒã€æƒé™ç®¡ç†æ–¹é¢è¶…è¶Š LangChain

---

## 6. ç¼ºå¤±åŠŸèƒ½æ£€æŸ¥

### 6.1 æ ¸å¿ƒåŠŸèƒ½ âœ…
- [x] Agent ä¸»å¾ªç¯
- [x] å·¥å…·ç³»ç»Ÿ
- [x] è®°å¿†ç®¡ç†
- [x] ä¸Šä¸‹æ–‡å‹ç¼©
- [x] RAG èƒ½åŠ›
- [x] å‘é‡æ•°æ®åº“
- [x] MCP é›†æˆ
- [x] å¤š Agent ç¼–æ’

### 6.2 å¯é€‰åŠŸèƒ½ï¼ˆå¯åç»­è¡¥å……ï¼‰
- [ ] æ›´å¤š LLM é€‚é…å™¨ï¼ˆAnthropic, Cohere, Geminiï¼‰
- [ ] æ›´å¤šå†…ç½®å·¥å…·ï¼ˆGitHub, Slack, Emailï¼‰
- [ ] å›¾æ•°æ®åº“æ”¯æŒï¼ˆNeo4jï¼‰
- [ ] å®æ—¶åä½œåŠŸèƒ½
- [ ] Web UI / Dashboard

**ç»“è®º**: æ ¸å¿ƒåŠŸèƒ½ 100% å®Œæ•´ï¼Œå¯é€‰åŠŸèƒ½å¯æŒ‰éœ€æ‰©å±•

---

## 7. å¯ç”¨æ€§æµ‹è¯•

### 7.1 æœ€å°å¯ç”¨ç¤ºä¾‹

```python
import asyncio
from loom import Agent
from loom.builtin.llms import OpenAILLM
from loom.builtin.tools import Calculator

async def main():
    # 1. åˆ›å»º LLM
    llm = OpenAILLM(api_key="your-api-key")

    # 2. åˆ›å»º Agentï¼ˆå¸¦å·¥å…·ï¼‰
    agent = Agent(
        llm=llm,
        tools=[Calculator()]
    )

    # 3. è¿è¡ŒæŸ¥è¯¢
    response = await agent.run("What is 123 * 456?")
    print(response)
    # è¾“å‡º: "123 * 456 = 56088"

asyncio.run(main())
```

**éªŒè¯**: âœ… 5 è¡Œä»£ç å³å¯è¿è¡Œ

---

### 7.2 RAG ç¤ºä¾‹

```python
from loom import Agent
from loom.builtin.llms import OpenAILLM
from loom.builtin.retriever.chroma_store import ChromaVectorStore
from loom.builtin.retriever.vector_store_config import ChromaConfig
from loom.builtin.embeddings import SentenceTransformersEmbedding
from loom.builtin.retriever.vector_store import VectorStoreRetriever
from loom.core.context_retriever import ContextRetriever
from loom.interfaces.retriever import Document

async def main():
    # 1. é…ç½®å‘é‡æ•°æ®åº“
    config = ChromaConfig.create_local(persist_directory="./db")
    vector_store = ChromaVectorStore(config)
    await vector_store.initialize()

    # 2. é…ç½® Embedding
    embedding = SentenceTransformersEmbedding("all-MiniLM-L6-v2")

    # 3. åˆ›å»ºæ£€ç´¢å™¨
    retriever = VectorStoreRetriever(vector_store, embedding)

    # 4. æ·»åŠ æ–‡æ¡£
    await retriever.add_documents([
        Document(content="Loom is an AI agent framework"),
        Document(content="Loom supports RAG capabilities"),
    ])

    # 5. åˆ›å»º RAG Agent
    context_retriever = ContextRetriever(retriever, top_k=2)
    agent = Agent(
        llm=OpenAILLM(api_key="..."),
        context_retriever=context_retriever
    )

    # 6. æŸ¥è¯¢ï¼ˆè‡ªåŠ¨æ£€ç´¢ç›¸å…³æ–‡æ¡£ï¼‰
    response = await agent.run("What is Loom?")
    print(response)

asyncio.run(main())
```

**éªŒè¯**: âœ… RAG åŠŸèƒ½å®Œæ•´å¯ç”¨

---

## 8. ç”Ÿäº§å°±ç»ªæ£€æŸ¥

### 8.1 æ ¸å¿ƒåŠŸèƒ½ âœ…
- [x] ç¨³å®šçš„ä¸»å¾ªç¯
- [x] é”™è¯¯å¤„ç†ä¸é™çº§
- [x] è¶…æ—¶æ§åˆ¶
- [x] å¹¶å‘é™åˆ¶
- [x] æƒé™ç®¡ç†
- [x] å®¡è®¡æ—¥å¿—

### 8.2 å¯è§‚æµ‹æ€§ âœ…
- [x] æŒ‡æ ‡æ”¶é›†
- [x] ç»“æ„åŒ–æ—¥å¿—
- [x] äº‹ä»¶æµ
- [x] æ€§èƒ½ç›‘æ§

### 8.3 å¯æ‰©å±•æ€§ âœ…
- [x] æ’ä»¶ç³»ç»Ÿ
- [x] MCP åè®®
- [x] æ¸…æ™°çš„æ¥å£
- [x] ç±»å‹å®‰å…¨

### 8.4 æ–‡æ¡£ä¸ç¤ºä¾‹ âœ…
- [x] å®Œæ•´çš„å¼€å‘æŒ‡å—
- [x] å¤šä¸ªå¯è¿è¡Œç¤ºä¾‹
- [x] API æ–‡æ¡£
- [x] æœ€ä½³å®è·µ

**ç»“è®º**: âœ… å¯ç”¨äºç”Ÿäº§ç¯å¢ƒ

---

## 9. ä¼˜åŠ¿æ€»ç»“

### 9.1 æ¶æ„ä¼˜åŠ¿
1. **åˆ†å±‚æ¸…æ™°**: 4 å±‚æ¶æ„ï¼ŒèŒè´£æ˜ç¡®
2. **æ¥å£ç»Ÿä¸€**: æ‰€æœ‰ç»„ä»¶éµå¾ªç»Ÿä¸€æ¥å£
3. **ç±»å‹å®‰å…¨**: å…¨é¢ä½¿ç”¨ Pydantic ç±»å‹éªŒè¯
4. **å¯æ‰©å±•**: æ’ä»¶ç³»ç»Ÿ + MCP åè®®

### 9.2 åŠŸèƒ½ä¼˜åŠ¿
1. **RAG ä¸‰å±‚æ¶æ„**: è‡ªåŠ¨æ£€ç´¢ã€å·¥å…·æ£€ç´¢ã€é«˜çº§æ¨¡å¼
2. **å‘é‡æ•°æ®åº“æ”¯æŒ**: 4 ä¸ªä¸»æµæ•°æ®åº“ï¼Œå¼€ç®±å³ç”¨
3. **å·¥å…·æµæ°´çº¿**: 6 é˜¶æ®µè§„èŒƒåŒ–å¤„ç†
4. **æƒé™ç®¡ç†**: ç»†ç²’åº¦å·¥å…·æƒé™æ§åˆ¶

### 9.3 å·¥ç¨‹ä¼˜åŠ¿
1. **å®Œæ•´æ–‡æ¡£**: 3 ä»½æ ¸å¿ƒæ–‡æ¡£ + 7 ä¸ªç¤ºä¾‹
2. **å¿«é€Ÿä¸Šæ‰‹**: 5 åˆ†é’Ÿå³å¯è¿è¡Œ
3. **ç”Ÿäº§å°±ç»ª**: å®Œæ•´çš„ç›‘æ§ã€æ—¥å¿—ã€é”™è¯¯å¤„ç†
4. **å¯ç»´æŠ¤**: æ¸…æ™°çš„ä»£ç ç»“æ„ï¼Œ50+ æ¨¡å—

---

## 10. æœ€ç»ˆç»“è®º

### âœ… Loom æ˜¯ä¸€ä¸ªå®Œæ•´ä¸”å¯ç”¨çš„ Agent æ¡†æ¶

**æ ¸å¿ƒèƒ½åŠ›**:
- âœ… Agent ä¸»å¾ªç¯ï¼ˆReActï¼‰
- âœ… å·¥å…·ç³»ç»Ÿï¼ˆ6 é˜¶æ®µæµæ°´çº¿ï¼‰
- âœ… è®°å¿†ç®¡ç†ï¼ˆå‹ç¼©ï¼‰
- âœ… RAG èƒ½åŠ›ï¼ˆä¸‰å±‚æ¶æ„ï¼‰
- âœ… å‘é‡æ•°æ®åº“ï¼ˆ4 ä¸ªï¼‰
- âœ… MCP é›†æˆ
- âœ… å¤š Agent ç¼–æ’
- âœ… æƒé™ç®¡ç†
- âœ… å¯è§‚æµ‹æ€§

**å¯¹æ¯” LangChain**:
- æ¶æ„æ›´æ¸…æ™°ï¼ˆ4 å±‚ï¼‰
- ç±»å‹æ›´å®‰å…¨ï¼ˆå…¨ Pydanticï¼‰
- RAG æ›´çµæ´»ï¼ˆä¸‰å±‚ï¼‰
- MCP åŸç”Ÿæ”¯æŒ
- æƒé™ç®¡ç†æ›´å®Œå–„

**ç”Ÿäº§å°±ç»ª**:
- âœ… ç¨³å®šçš„ä¸»å¾ªç¯
- âœ… å®Œæ•´çš„é”™è¯¯å¤„ç†
- âœ… ä¸°å¯Œçš„ç›‘æ§æŒ‡æ ‡
- âœ… è¯¦ç»†çš„æ–‡æ¡£

**æ¨èåœºæ™¯**:
1. âœ… **ä¼ä¸šçº§ AI Agent å¼€å‘**
2. âœ… **RAG çŸ¥è¯†åº“é—®ç­”ç³»ç»Ÿ**
3. âœ… **å¤š Agent åä½œç³»ç»Ÿ**
4. âœ… **ä»£ç åŠ©æ‰‹ï¼ˆå¯¹æ ‡ Claude Codeï¼‰**
5. âœ… **è‡ªåŠ¨åŒ–å·¥ä½œæµ**

---

## 11. ä¸‹ä¸€æ­¥å»ºè®®

### 11.1 ç«‹å³å¯ç”¨
- ç›´æ¥ä½¿ç”¨ Loom å¼€å‘ Agent åº”ç”¨
- å‚è€ƒ `examples/` ç›®å½•çš„ç¤ºä¾‹ä»£ç 
- é˜…è¯» `LOOM_UNIFIED_DEVELOPER_GUIDE.md`

### 11.2 å¯é€‰å¢å¼ºï¼ˆéå¿…éœ€ï¼‰
1. **æ›´å¤š LLM é€‚é…å™¨**: Anthropic Claude, Google Gemini, Cohere
2. **æ›´å¤šå†…ç½®å·¥å…·**: GitHub, Slack, Email, Database
3. **Web UI**: å¯è§†åŒ– Agent æ„å»ºå™¨
4. **æµ‹è¯•è¦†ç›–**: å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€E2E æµ‹è¯•
5. **æ€§èƒ½ä¼˜åŒ–**: ç¼“å­˜ã€æ‰¹å¤„ç†ã€å¼‚æ­¥ä¼˜åŒ–

### 11.3 ç¤¾åŒºç”Ÿæ€
1. **PyPI å‘å¸ƒ**: `pip install loom-agent`
2. **æ–‡æ¡£ç½‘ç«™**: åœ¨çº¿æ–‡æ¡£ä¸æ•™ç¨‹
3. **ç¤ºä¾‹é¡¹ç›®**: å®Œæ•´çš„ Agent åº”ç”¨æ¡ˆä¾‹
4. **ç¤¾åŒºè´¡çŒ®**: å·¥å…·ã€é€‚é…å™¨ã€æ¨¡å¼

---

**æœ€ç»ˆè¯„ä»·**: ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ

Loom æ˜¯ä¸€ä¸ª **ç”Ÿäº§å°±ç»ª** çš„ AI Agent æ¡†æ¶ï¼ŒåŠŸèƒ½å®Œæ•´ã€æ¶æ„æ¸…æ™°ã€æ–‡æ¡£è¯¦ç»†ã€‚å¯ä»¥ç«‹å³ç”¨äºå¼€å‘å„ç±» AI Agent åº”ç”¨ï¼Œä»åŸå‹åˆ°ç”Ÿäº§ç¯å¢ƒå‡é€‚ç”¨ã€‚

---

**éªŒè¯æ—¥æœŸ**: 2025-10-12
**éªŒè¯ç‰ˆæœ¬**: Loom v2.0
**éªŒè¯ç»“æœ**: âœ… **é€šè¿‡** - æ¡†æ¶å®Œæ•´å¯ç”¨
