# å››èŒƒå¼å·¥ä½œ (Four Paradigms)

## å®šä¹‰

**å››èŒƒå¼å·¥ä½œ**æ˜¯ Loom Agent çš„æ ¸å¿ƒå·¥ä½œæ¨¡å¼ï¼ŒåŒ…å«åæ€(Reflection)ã€å·¥å…·ä½¿ç”¨(Tool Use)ã€è§„åˆ’(Planning)ã€åä½œ(Collaboration)å››ç§èƒ½åŠ›ï¼ŒAgent æ ¹æ®ä»»åŠ¡è‡ªä¸»å†³ç­–ä½¿ç”¨å“ªäº›èƒ½åŠ›ã€‚

## æ ¸å¿ƒæ€æƒ³

ä¼ ç»Ÿ Agent æ¡†æ¶å°† Agent é™åˆ¶åœ¨å•ä¸€æ¨¡å¼ï¼ˆé€šå¸¸æ˜¯å·¥å…·è°ƒç”¨ï¼‰ï¼Œå¯¼è‡´ï¼š
- ç®€å•ä»»åŠ¡è¿‡åº¦å·¥ç¨‹åŒ–
- å¤æ‚ä»»åŠ¡èƒ½åŠ›ä¸è¶³
- æ— æ³•è‡ªä¸»å†³ç­–ä½•æ—¶ä½¿ç”¨ä»€ä¹ˆèƒ½åŠ›

Loom çš„åˆ›æ–°æ˜¯ï¼š**è®© Agent è‡ªä¸»å†³å®š**ä½¿ç”¨å“ªäº›èƒ½åŠ›ï¼Œå°±åƒäººç±»ä¸€æ ·ï¼š
- ç®€å•ä»»åŠ¡ â†’ åªéœ€åæ€
- ä¸­ç­‰ä»»åŠ¡ â†’ åæ€ + å·¥å…·
- å¤æ‚ä»»åŠ¡ â†’ åæ€ + å·¥å…· + è§„åˆ’
- è¶…å¤æ‚ä»»åŠ¡ â†’ åæ€ + å·¥å…· + è§„åˆ’ + åä½œ

## å››èŒƒå¼è¯¦è§£

### 1. åæ€ (Reflection)

**å®šä¹‰**: æŒç»­çš„æ€è€ƒè¿‡ç¨‹ï¼Œæ— éœ€å·¥å…·å°±èƒ½å±•ç°æ™ºèƒ½ã€‚

**ä½•æ—¶ä½¿ç”¨**: æ‰€æœ‰ä»»åŠ¡ï¼Œè¿™æ˜¯æœ€åŸºç¡€çš„èƒ½åŠ›ã€‚

**ç¤ºä¾‹**:
```
User: è§£é‡Šä»€ä¹ˆæ˜¯é€’å½’ï¼Ÿ

Agent (åæ€ä¸­):
è®©æˆ‘æ€è€ƒä¸€ä¸‹é€’å½’çš„æ¦‚å¿µã€‚
é€’å½’æ˜¯ä¸€ç§å‡½æ•°è°ƒç”¨è‡ªèº«çš„æŠ€æœ¯...
éœ€è¦è€ƒè™‘åŸºçº¿æ¡ä»¶å’Œé€’å½’æ­¥éª¤...
å°±åƒä¿„ç½—æ–¯å¥—å¨ƒä¸€æ ·...
```

**å®ç°**: LLM çš„ `stream_chat()` è‡ªç„¶ç”Ÿæˆæ€è€ƒå†…å®¹

### 2. å·¥å…·ä½¿ç”¨ (Tool Use)

**å®šä¹‰**: å½“éœ€è¦æ‰§è¡Œå…·ä½“æ“ä½œæ—¶ï¼Œè°ƒç”¨å¯ç”¨çš„å·¥å…·ã€‚

**ä½•æ—¶ä½¿ç”¨**: éœ€è¦è·å–ä¿¡æ¯ã€æ‰§è¡Œæ“ä½œã€éªŒè¯å‡è®¾æ—¶ã€‚

**ç¤ºä¾‹**:
```
User: æŸ¥è¯¢å½“å‰çš„å¤©æ°”

Agent (åæ€):
æˆ‘éœ€è¦æŸ¥è¯¢å¤©æ°”ä¿¡æ¯ï¼Œåº”è¯¥ä½¿ç”¨ weather_toolã€‚

Agent (è°ƒç”¨å·¥å…·):
tool_call: weather_tool(location="Beijing")

Agent (åŸºäºç»“æœå›ç­”):
åŒ—äº¬ä»Šå¤©æ™´å¤©ï¼Œæ¸©åº¦ 25Â°Cã€‚
```

**å®ç°**: LLM çš„ `tool_calls` åŠŸèƒ½

### 3. è§„åˆ’ (Planning)

**å®šä¹‰**: é‡åˆ°å¤æ‚ä»»åŠ¡æ—¶ï¼Œå…ˆåˆ¶å®šè®¡åˆ’ï¼Œå†é€æ­¥æ‰§è¡Œã€‚

**ä½•æ—¶ä½¿ç”¨**: ä»»åŠ¡éœ€è¦å¤šä¸ªæ­¥éª¤ï¼Œæˆ–è€…å¤æ‚åº¦ > 0.5ã€‚

**ç¤ºä¾‹**:
```
User: å†™ä¸€ä¸ªçˆ¬è™«ç³»ç»Ÿ

Agent (åæ€):
è¿™æ˜¯ä¸€ä¸ªå¤æ‚ä»»åŠ¡ï¼Œéœ€è¦å…ˆè§„åˆ’ã€‚

Agent (è°ƒç”¨ create_plan):
- æ­¥éª¤ 1: åˆ†æéœ€æ±‚
- æ­¥éª¤ 2: è®¾è®¡æ¶æ„
- æ­¥éª¤ 3: å®ç°çˆ¬è™«
- æ­¥éª¤ 4: æ·»åŠ å­˜å‚¨
- æ­¥éª¤ 5: æµ‹è¯•

Agent (æŒ‰è®¡åˆ’æ‰§è¡Œæ¯ä¸ªæ­¥éª¤...)
```

**å®ç°**: `create_plan` å…ƒå·¥å…·

### 4. åä½œ (Collaboration)

**å®šä¹‰**: å½“ä»»åŠ¡è¶…å‡ºèƒ½åŠ›èŒƒå›´æ—¶ï¼Œå§”æ´¾ç»™å…¶ä»–ä¸“ä¸š Agentã€‚

**ä½•æ—¶ä½¿ç”¨**: éœ€è¦ä¸“ä¸šçŸ¥è¯†ï¼Œæˆ–è€…ä»»åŠ¡å¯ä»¥å¹¶è¡Œåˆ†è§£æ—¶ã€‚

**ç¤ºä¾‹**:
```
User: ç ”ç©¶å¹¶å†™ä¸€ç¯‡å…³äº AI çš„æ–‡ç« 

Agent (åæ€):
è¿™éœ€è¦ç ”ç©¶å’Œå†™ä½œä¸¤ä¸ªä¸“ä¸šèƒ½åŠ›ï¼Œæˆ‘åº”è¯¥åä½œã€‚

Agent (è°ƒç”¨ delegate_task):
- å§”æ´¾ç»™ researcher: æ”¶é›† AI ç›¸å…³èµ„æ–™
- å§”æ´¾ç»™ writer: æ’°å†™æ–‡ç« 

Agent (æ•´åˆç»“æœ):
æ–‡ç« å·²å®Œæˆ...
```

**å®ç°**: `delegate_task` å…ƒå·¥å…·

## è‡ªåŠ¨å†³ç­–æœºåˆ¶

Agent å¦‚ä½•çŸ¥é“ä½•æ—¶ä½¿ç”¨å“ªç§èƒ½åŠ›ï¼Ÿç­”æ¡ˆï¼š**LLM è‡ªä¸»å†³ç­–**ã€‚

### ç³»ç»Ÿæç¤ºè¯

```python
system_prompt = """
ä½ æ˜¯è‡ªä¸»æ™ºèƒ½ä½“ï¼Œå…·å¤‡å››ç§æ ¸å¿ƒèƒ½åŠ›ï¼š

1. **åæ€èƒ½åŠ›**ï¼šæŒç»­æ€è€ƒï¼Œè¿™æ˜¯ä½ æœ€åŸºç¡€çš„èƒ½åŠ›
2. **å·¥å…·ä½¿ç”¨**ï¼šéœ€è¦æ‰§è¡Œæ“ä½œæ—¶ï¼Œè°ƒç”¨å·¥å…·
3. **è§„åˆ’èƒ½åŠ›**ï¼šé‡åˆ°å¤æ‚ä»»åŠ¡æ—¶ï¼Œä½¿ç”¨ create_plan å·¥å…·
4. **åä½œèƒ½åŠ›**ï¼šä»»åŠ¡è¶…å‡ºèƒ½åŠ›æ—¶ï¼Œä½¿ç”¨ delegate_task å·¥å…·

**å·¥ä½œåŸåˆ™**ï¼š
- æ ¹æ®ä»»åŠ¡å¤æ‚åº¦è‡ªä¸»å†³å®šä½¿ç”¨å“ªäº›èƒ½åŠ›
- ä¸è¦è¯¢é—®æ˜¯å¦å¯ä»¥ä½¿ç”¨æŸä¸ªèƒ½åŠ›ï¼Œç›´æ¥ä½¿ç”¨
- è¿½æ±‚é«˜æ•ˆå®Œæˆä»»åŠ¡
"""
```

### å¤æ‚åº¦è¯„ä¼°

```python
# L2 è®°å¿†å±‚çš„ä»»åŠ¡é‡è¦æ€§è¯„åˆ†
task.metadata["importance"] = 0.7

# å¦‚æœå¤æ‚åº¦ > 0.5ï¼ŒAgent å€¾å‘äºä½¿ç”¨è§„åˆ’
if complexity > 0.5:
    Agent å¯èƒ½ä½¿ç”¨ create_plan
```

## èƒ½åŠ›ç»„åˆç¤ºä¾‹

### åœºæ™¯ 1: ç®€å•é—®ç­”

```
èƒ½åŠ›ç»„åˆ: åæ€

User: ä»€ä¹ˆæ˜¯ Pythonï¼Ÿ

Agent (åæ€):
Python æ˜¯ä¸€ç§é«˜çº§ç¼–ç¨‹è¯­è¨€...
(æ— éœ€å·¥å…·æˆ–è§„åˆ’)
```

### åœºæ™¯ 2: ä¿¡æ¯æŸ¥è¯¢

```
èƒ½åŠ›ç»„åˆ: åæ€ + å·¥å…·

User: æŸ¥è¯¢åŒ—äº¬ä»Šå¤©çš„å¤©æ°”

Agent (åæ€):
éœ€è¦è·å–å¤©æ°”ä¿¡æ¯

Agent (å·¥å…·):
weather_tool(location="Beijing")

Agent (åæ€):
ä»Šå¤©åŒ—äº¬æ™´å¤©ï¼Œ25Â°C
```

### åœºæ™¯ 3: å¤æ‚ä»»åŠ¡

```
èƒ½åŠ›ç»„åˆ: åæ€ + å·¥å…· + è§„åˆ’

User: å®ç°ä¸€ä¸ªåšå®¢ç³»ç»Ÿ

Agent (åæ€):
è¿™æ˜¯å¤æ‚ä»»åŠ¡ï¼Œéœ€è¦è§„åˆ’

Agent (è§„åˆ’):
create_plan(
    goal="å®ç°åšå®¢ç³»ç»Ÿ",
    steps=["è®¾è®¡æ•°æ®åº“", "å®ç° API", "å‰ç«¯é¡µé¢", "éƒ¨ç½²"]
)

Agent (æŒ‰è®¡åˆ’æ‰§è¡Œ):
æ­¥éª¤ 1: è®¾è®¡æ•°æ®åº“ (è°ƒç”¨å·¥å…·)
æ­¥éª¤ 2: å®ç° API (è°ƒç”¨å·¥å…·)
...
```

### åœºæ™¯ 4: è¶…å¤æ‚ä»»åŠ¡

```
èƒ½åŠ›ç»„åˆ: åæ€ + å·¥å…· + è§„åˆ’ + åä½œ

User: ç ”ç©¶å¹¶å¼€å‘ä¸€ä¸ª AI äº§å“

Agent (åæ€):
è¿™éœ€è¦å¤šä¸ªä¸“ä¸šé¢†åŸŸï¼Œéœ€è¦å›¢é˜Ÿåä½œ

Agent (è§„åˆ’):
create_plan(steps=["å¸‚åœºç ”ç©¶", "æŠ€æœ¯é€‰å‹", "åŸå‹å¼€å‘", "æµ‹è¯•"])

Agent (åä½œ):
delegate_task(agent="market_researcher", subtask="è°ƒç ”å¸‚åœº")
delegate_task(agent="engineer", subtask="æŠ€æœ¯é€‰å‹")
...

Agent (æ•´åˆ):
ç»¼åˆç ”ç©¶ç»“æœå’ŒæŠ€æœ¯æ–¹æ¡ˆ...
```

## å…ƒå·¥å…·å®ç°

### create_plan å…ƒå·¥å…·

```python
{
    "name": "create_plan",
    "description": "ä¸ºå¤æ‚ä»»åŠ¡åˆ›å»ºæ‰§è¡Œè®¡åˆ’",
    "parameters": {
        "goal": "è¦å®ç°çš„ç›®æ ‡",
        "steps": ["æ­¥éª¤1", "æ­¥éª¤2", ...],
        "reasoning": "ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªè®¡åˆ’"
    }
}
```

### delegate_task å…ƒå·¥å…·

```python
{
    "name": "delegate_task",
    "description": "å°†å­ä»»åŠ¡å§”æ´¾ç»™å…¶ä»–ä¸“ä¸š agent",
    "parameters": {
        "target_agent": "ç›®æ ‡ agent ID",
        "subtask": "è¦å§”æ´¾çš„å­ä»»åŠ¡",
        "reasoning": "ä¸ºä»€ä¹ˆéœ€è¦å§”æ´¾"
    }
}
```

## ç›¸å…³æ¦‚å¿µ

- â†’ [å…¬ç†ç³»ç»Ÿ](Axiomatic-System) (A5: è‡ªä¸»å†³ç­–å…¬ç†)
- â†’ [è‡ªä¸»èƒ½åŠ›](Autonomous-Capabilities) (LLM çš„è‡ªä¸»æ€§)
- â†’ [å·¥å…·ç³»ç»Ÿ](Tool-System) (å·¥å…·æ³¨å†Œä¸æ‰§è¡Œ)
- â†’ [åˆ†å½¢æ¶æ„](Fractal-Architecture) (å¤š Agent åä½œåŸºç¡€)

## å‚è§

- ğŸ“– [è®¾è®¡æ–‡æ¡£](design/Four-Paradigms)
- ğŸ”§ [API æŒ‡å—]: [Agent èƒ½åŠ›](api/Agent)
- ğŸ’¡ [ç¤ºä¾‹ä»£ç ]: [å››èŒƒå¼æ¼”ç¤º](examples/four-paradigms)

## ä»£ç ä½ç½®

- Agent å®ç°: `loom/orchestration/agent.py`
- å…ƒå·¥å…·: `loom/orchestration/meta_tools.py`
- å·¥å…·ç³»ç»Ÿ: `loom/tools/`

## åå‘é“¾æ¥

è¢«å¼•ç”¨äº: [Agent API](API-Agent) | [å·¥å…·ç³»ç»Ÿ](Tool-System) | [åˆ†å½¢æ¶æ„](Fractal-Architecture)
