# åˆ†å½¢æ¶æ„ (Fractal Architecture)

## å®šä¹‰

**åˆ†å½¢æ¶æ„**æ˜¯ä¸€ç§é€’å½’ç»„åˆæ¨¡å¼ï¼Œå…è®¸ä»»æ„å±‚çº§çš„èŠ‚ç‚¹ç»„åˆï¼ŒåŒæ—¶ä¿æŒæ¯ä¸ªèŠ‚ç‚¹çš„æ¥å£ä¸€è‡´æ€§ã€‚

## æ ¸å¿ƒæ€æƒ³

ä¼ ç»Ÿçš„å¤š Agent ç³»ç»Ÿé¢ä¸´ä¸€ä¸ªé—®é¢˜ï¼šå½“ Agent æ•°é‡å¢åŠ æ—¶ï¼Œç³»ç»Ÿå¤æ‚åº¦å‘ˆæŒ‡æ•°å¢é•¿ã€‚è¿™æ˜¯å› ä¸ºæ¯ä¸ªæ–° Agent éƒ½å¼•å…¥äº†æ–°çš„äº¤äº’æ¨¡å¼å’Œç®¡ç†é€»è¾‘ã€‚

Loom é€šè¿‡**åˆ†å½¢æ¶æ„**è§£å†³è¿™ä¸ªé—®é¢˜ï¼š
- **ç»„åˆä¸€è‡´æ€§**: 1ä¸ªAgent å’Œ 100ä¸ªAgent ç»„æˆçš„å›¢é˜Ÿï¼Œæ¥å£å®Œå…¨ç›¸åŒ
- **è®¤çŸ¥è´Ÿè½½ O(1)**: æ— è®ºç³»ç»Ÿå¤šå¤æ‚ï¼Œå±€éƒ¨çš„è®¤çŸ¥è´Ÿè½½å§‹ç»ˆä¿æŒå¸¸æ•°
- **æ— é™å¯ç»„åˆ**: å¯ä»¥é€’å½’ç»„åˆï¼ˆå›¢é˜Ÿä¹‹å›¢é˜Ÿï¼‰

### åˆ†å½¢é€’å½’

```
Agent (å•ä¸ª)
    â†“ ç»„åˆ
CompositeNode (å›¢é˜Ÿ)
    â†“ ç»„åˆ
CompositeNode (å›¢é˜Ÿä¹‹å›¢é˜Ÿ)
    â†“ ...
```

æ¯æ¬¡ç»„åˆéƒ½äº§ç”Ÿä¸€ä¸ªæ–°çš„"è™šæ‹ŸèŠ‚ç‚¹"ï¼Œä½†å®ƒå¯¹å¤–è¡¨ç°å¾—å’Œå•ä¸ªèŠ‚ç‚¹ä¸€æ ·ã€‚

## å…³é”®ç‰¹æ€§

### 1. é€’å½’ç»„åˆ

ä»»æ„èŠ‚ç‚¹å¯ä»¥åŒ…å«å…¶ä»–èŠ‚ç‚¹ï¼š

```python
from loom.fractal import CompositeNode

# å•ä¸ª Agent
researcher = Agent(node_id="researcher", ...)

# Agent å›¢é˜Ÿï¼ˆä¹Ÿæ˜¯èŠ‚ç‚¹ï¼‰
research_team = CompositeNode(
    node_id="research_team",
    children=[researcher, writer, editor],
    strategy=ParallelStrategy()
)

# å›¢é˜Ÿä¹‹å›¢é˜Ÿï¼ˆä»ç„¶æ˜¯èŠ‚ç‚¹ï¼‰
department = CompositeNode(
    node_id="content_dept",
    children=[research_team, design_team],
    strategy=SequentialStrategy()
)

# å¯¹è°ƒç”¨è€…æ¥è¯´ï¼Œdepartment å°±åƒä¸€ä¸ª Agent
await department.execute_task(task)
```

### 2. ç­–ç•¥æ¨¡å¼

ç»„åˆèŠ‚ç‚¹æ”¯æŒä¸åŒçš„æ‰§è¡Œç­–ç•¥ï¼š

| ç­–ç•¥ | æè¿° | åœºæ™¯ |
|------|------|------|
| `ParallelStrategy` | å¹¶è¡Œæ‰§è¡Œæ‰€æœ‰å­èŠ‚ç‚¹ | ç‹¬ç«‹ä»»åŠ¡åŠ é€Ÿ |
| `SequentialStrategy` | æŒ‰é¡ºåºæ‰§è¡Œå­èŠ‚ç‚¹ | ä¾èµ–ä»»åŠ¡æµæ°´çº¿ |
| `SelectStrategy` | é€‰æ‹©æœ€åˆé€‚çš„å­èŠ‚ç‚¹ | æ™ºèƒ½è·¯ç”± |

### 3. è®°å¿†ç»§æ‰¿

å­èŠ‚ç‚¹è‡ªåŠ¨ç»§æ‰¿çˆ¶èŠ‚ç‚¹çš„å…±äº«è®°å¿†ï¼š

```
çˆ¶èŠ‚ç‚¹ (GLOBAL è®°å¿†)
  â†“ ç»§æ‰¿
  â”œâ”€ å­èŠ‚ç‚¹ A (å¯è®¿é—®çˆ¶èŠ‚ç‚¹çš„ SHARED/GLOBAL)
  â””â”€ å­èŠ‚ç‚¹ B (å¯è®¿é—®çˆ¶èŠ‚ç‚¹çš„ SHARED/GLOBAL)
```

å‚è§: [è®°å¿†ä½œç”¨åŸŸ](Memory-Scope)

## ç›¸å…³æ¦‚å¿µ

- â†’ [å…¬ç†ç³»ç»Ÿ](Axiomatic-System) (A3: åˆ†å½¢é€’å½’å…¬ç†)
- â†’ [åˆ†å½¢èŠ‚ç‚¹](Fractal-Node) (åŸºæœ¬å•å…ƒ)
- â†’ [ç»„åˆèŠ‚ç‚¹](Composite-Node) (ç»„åˆå®ç°)
- â†’ [æ‰§è¡Œç­–ç•¥](Execution-Strategy) (å¹¶è¡Œ/é¡ºåº/é€‰æ‹©)

## å‚è§

- ğŸ“– [è®¾è®¡æ–‡æ¡£](design/Fractal-Architecture)
- ğŸ”§ [API æŒ‡å—]: [åˆ›å»ºåˆ†å½¢èŠ‚ç‚¹](api/Fractal-Node)
- ğŸ’¡ [ç¤ºä¾‹ä»£ç ]: [ç ”ç©¶å°ç»„](examples/research-team)

## ä»£ç ä½ç½®

- æ ¸å¿ƒå®ç°: `loom/fractal/node.py`
- ç»„åˆèŠ‚ç‚¹: `loom/fractal/composite.py`
- æ‰§è¡Œç­–ç•¥: `loom/fractal/strategies.py`

## åå‘é“¾æ¥

è¢«å¼•ç”¨äº: [ä»£è°¢è®°å¿†](Metabolic-Memory) | [äº‹ä»¶æ€»çº¿](Event-Bus) | [å·¥ä½œæµ](Workflow)
