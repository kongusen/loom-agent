============================= test session starts ==============================
platform darwin -- Python 3.11.11, pytest-7.4.4, pluggy-1.6.0 -- /opt/Homebrew/Cellar/python@3.11/3.11.11/bin/python3.11
cachedir: .pytest_cache
metadata: {'Python': '3.11.11', 'Platform': 'macOS-26.2-arm64-arm-64bit', 'Packages': {'pytest': '7.4.4', 'pluggy': '1.6.0'}, 'Plugins': {'asyncio': '0.23.8', 'anyio': '4.9.0', 'html': '4.1.1', 'xdist': '3.8.0', 'timeout': '2.4.0', 'metadata': '3.1.1', 'mock': '3.14.1', 'cov': '6.1.1'}}
rootdir: /Users/shan/work/uploads/loom-agent
configfile: pytest.ini
plugins: asyncio-0.23.8, anyio-4.9.0, html-4.1.1, xdist-3.8.0, timeout-2.4.0, metadata-3.1.1, mock-3.14.1, cov-6.1.1
asyncio: mode=Mode.AUTO
collecting ... collected 1194 items

tests/fractal/test_memory.py::TestMemoryScope::test_memory_scope_values PASSED [  0%]
tests/fractal/test_memory.py::TestMemoryScope::test_memory_scope_members PASSED [  0%]
tests/fractal/test_memory.py::TestMemoryAccessPolicy::test_policy_creation PASSED [  0%]
tests/fractal/test_memory.py::TestMemoryEntry::test_entry_creation PASSED [  0%]
tests/fractal/test_memory.py::TestFractalMemory::test_memory_creation PASSED [  0%]
tests/fractal/test_memory.py::TestFractalMemory::test_write_and_read_local PASSED [  0%]
tests/fractal/test_sync.py::TestMemorySyncManager::test_sync_manager_creation PASSED [  0%]
tests/fractal/test_sync.py::TestMemorySyncManager::test_write_with_version_check_success PASSED [  0%]
tests/fractal/test_sync.py::TestConflictResolvers::test_parent_wins_resolver PASSED [  0%]
tests/fractal/test_sync.py::TestConflictResolvers::test_child_wins_resolver PASSED [  0%]
tests/integration/test_agent_tool_execution.py::TestAgentToolExecution::test_agent_executes_single_tool PASSED [  0%]
tests/integration/test_agent_tool_execution.py::TestAgentToolExecution::test_agent_executes_multiple_tools PASSED [  1%]
tests/integration/test_context_orchestration.py::test_orchestrator_with_memory_manager PASSED [  1%]
tests/integration/test_e2e_real_api.py::TestEndToEndRealAPI::test_single_llm_agent SKIPPED [  1%]
tests/integration/test_e2e_real_api.py::TestEndToEndRealAPI::test_orchestrator_with_real_llm SKIPPED [  1%]
tests/integration/test_e2e_real_api.py::TestEndToEndRealAPI::test_fractal_container_with_real_llm SKIPPED [  1%]
tests/integration/test_embedding_provider.py::TestOpenAIEmbeddingProviderIntegration::test_embed_single_text SKIPPED [  1%]
tests/integration/test_embedding_provider.py::TestOpenAIEmbeddingProviderIntegration::test_embed_chinese_text SKIPPED [  1%]
tests/integration/test_embedding_provider.py::TestOpenAIEmbeddingProviderIntegration::test_embed_batch SKIPPED [  1%]
tests/integration/test_embedding_provider.py::TestOpenAIEmbeddingProviderIntegration::test_embed_consistency SKIPPED [  1%]
tests/integration/test_four_paradigms.py::TestToolUseParadigm::test_tool_use_paradigm PASSED [  1%]
tests/integration/test_four_paradigms.py::TestPlanningParadigm::test_planning_paradigm PASSED [  1%]
tests/integration/test_four_paradigms.py::TestReflectionParadigm::test_reflection_paradigm PASSED [  1%]
tests/integration/test_four_paradigms.py::TestMultiAgentParadigm::test_multi_agent_paradigm PASSED [  2%]
tests/integration/test_fractal_integration.py::TestFractalIntegration::test_agent_with_fractal_memory PASSED [  2%]
tests/integration/test_fractal_integration.py::TestFractalIntegration::test_create_child_node_with_memory_allocation PASSED [  2%]
tests/integration/test_fractal_integration.py::TestFractalIntegration::test_sync_memory_from_child PASSED [  2%]
tests/integration/test_fractal_real_api.py::TestFractalRealAPI::test_fractal_delegation_with_memory_flow XPASS [  2%]
tests/integration/test_fractal_real_api.py::TestFractalRealAPI::test_multi_level_fractal_delegation XPASS [  2%]
tests/integration/test_fractal_recursion.py::TestFractalRecursion::test_single_layer_container PASSED [  2%]
tests/integration/test_fractal_recursion.py::TestFractalRecursion::test_two_layer_nested_container PASSED [  2%]
tests/integration/test_fractal_recursion.py::TestFractalRecursion::test_three_layer_deep_nesting PASSED [  2%]
tests/integration/test_fractal_recursion.py::TestFractalRecursion::test_dynamic_child_setting PASSED [  2%]
tests/integration/test_fractal_recursion.py::TestFractalRecursion::test_container_without_child PASSED [  2%]
tests/integration/test_interceptor_integration.py::TestInterceptorIntegration::test_agent_has_interceptor_chain PASSED [  2%]
tests/integration/test_interceptor_integration.py::TestInterceptorIntegration::test_custom_interceptor_is_called PASSED [  3%]
tests/integration/test_interceptor_integration.py::TestTimingInterceptor::test_timing_interceptor_adds_duration PASSED [  3%]
tests/integration/test_interceptor_integration.py::TestMetricsInterceptor::test_metrics_interceptor_collects_stats PASSED [  3%]
tests/integration/test_interceptor_integration.py::TestMultipleInterceptors::test_multiple_interceptors_execution_order PASSED [  3%]
tests/integration/test_llm_provider.py::TestOpenAIProviderIntegration::test_chat_basic SKIPPED [  3%]
tests/integration/test_llm_provider.py::TestOpenAIProviderIntegration::test_chat_with_system_message SKIPPED [  3%]
tests/integration/test_llm_provider.py::TestOpenAIProviderIntegration::test_stream_chat_basic SKIPPED [  3%]
tests/integration/test_llm_provider.py::TestOpenAIProviderIntegration::test_chat_with_temperature SKIPPED [  3%]
tests/integration/test_memory_integration.py::TestL1Memory::test_l1_stores_recent_tasks PASSED [  3%]
tests/integration/test_memory_integration.py::TestL1Memory::test_l1_circular_buffer_behavior PASSED [  3%]
tests/integration/test_memory_integration.py::TestL2Memory::test_l2_stores_important_tasks PASSED [  3%]
tests/integration/test_memory_integration.py::TestL2Memory::test_l2_capacity_limit PASSED [  3%]
tests/integration/test_memory_integration.py::TestMemoryStats::test_memory_stats_basic PASSED [  4%]
tests/integration/test_memory_integration.py::TestMemoryRetrieval::test_retrieve_task_by_id PASSED [  4%]
tests/integration/test_memory_integration.py::TestMemoryRetrieval::test_retrieve_nonexistent_task PASSED [  4%]
tests/integration/test_memory_integration.py::TestMemoryRetrieval::test_retrieve_from_different_tiers PASSED [  4%]
tests/integration/test_memory_integration.py::TestFractalMemory::test_agent_stores_task_in_memory PASSED [  4%]
tests/integration/test_memory_integration.py::TestFractalMemory::test_child_node_inherits_parent_memory PASSED [  4%]
tests/integration/test_memory_integration.py::TestFractalMemory::test_child_memory_syncs_back_to_parent PASSED [  4%]
tests/integration/test_memory_manager.py::test_parent_child_memory_sharing PASSED [  4%]
tests/integration/test_memory_manager.py::test_loom_memory_compatibility PASSED [  4%]
tests/integration/test_orchestrator.py::TestCrewOrchestrator::test_parallel_execution PASSED [  4%]
tests/integration/test_orchestrator.py::TestCrewOrchestrator::test_result_aggregation PASSED [  4%]
tests/integration/test_orchestrator.py::TestCrewOrchestrator::test_empty_nodes PASSED [  4%]
tests/integration/test_orchestrator.py::TestCrewOrchestrator::test_dynamic_node_management PASSED [  5%]
tests/integration/test_p0_improvements.py::TestFactExtraction::test_extract_api_facts PASSED [  5%]
tests/integration/test_p0_improvements.py::TestFactExtraction::test_extract_error_facts PASSED [  5%]
tests/integration/test_p0_improvements.py::TestFactExtraction::test_extract_tool_facts PASSED [  5%]
tests/integration/test_p0_improvements.py::TestFactStorage::test_fact_index PASSED [  5%]
tests/integration/test_p0_improvements.py::TestFactStorage::test_fact_access_tracking PASSED [  5%]
tests/integration/test_p0_improvements.py::TestFactSearch::test_simple_search_facts PASSED [  5%]
tests/integration/test_p0_improvements.py::TestFactSearch::test_simple_search_facts_by_tags PASSED [  5%]
tests/integration/test_p0_improvements.py::TestAsyncCompression::test_promote_tasks_async PASSED [  5%]
tests/integration/test_p0_improvements.py::TestAsyncCompression::test_promote_l3_to_l4_without_vectorization PASSED [  5%]
tests/integration/test_skill_activation_forms.py::TestForm1Injection::test_form1_knowledge_injection_in_system_prompt PASSED [  5%]
tests/integration/test_skill_activation_forms.py::TestForm2Compilation::test_form2_script_compilation_to_tools PASSED [  5%]
tests/integration/test_skill_activation_forms.py::TestForm3Instantiation::test_form3_skill_node_instantiation_and_delegation PASSED [  6%]
tests/integration/test_task_based_memory.py::TestTaskBasedMemory::test_l1_task_storage PASSED [  6%]
tests/integration/test_task_based_memory.py::TestTaskBasedMemory::test_l1_circular_buffer PASSED [  6%]
tests/integration/test_task_based_memory.py::TestTaskBasedMemory::test_l2_importance_based_storage PASSED [  6%]
tests/integration/test_task_based_memory.py::TestTaskBasedMemory::test_l1_to_l2_promotion PASSED [  6%]
tests/integration/test_task_based_memory.py::TestTaskBasedMemory::test_task_retrieval_by_id PASSED [  6%]
tests/integration/test_task_based_memory.py::TestTaskBasedMemory::test_memory_stats PASSED [  6%]
tests/integration/test_task_based_memory.py::TestTaskBasedMemory::test_clear_l2 PASSED [  6%]
tests/integration/test_task_based_memory.py::TestTaskBasedMemory::test_clear_all PASSED [  6%]
tests/integration/test_task_based_memory.py::TestTaskBasedMemory::test_task_summary_generation PASSED [  6%]
tests/integration/test_task_based_memory.py::TestTaskBasedMemory::test_simple_search PASSED [  6%]
tests/memory/test_integration.py::TestLayerIntegration::test_l1_to_l2_promotion PASSED [  6%]
tests/memory/test_integration.py::TestLayerIntegration::test_l2_to_l3_compression PASSED [  7%]
tests/memory/test_layer_contract.py::TestLayerContract::test_circular_buffer_layer_contract PASSED [  7%]
tests/memory/test_layer_contract.py::TestLayerContract::test_priority_queue_layer_contract PASSED [  7%]
tests/memory/test_performance.py::TestPerformance::test_l1_insertion_performance PASSED [  7%]
tests/memory/test_performance.py::TestPerformance::test_l2_insertion_performance PASSED [  7%]
tests/performance/test_phase2_consistency.py::test_parent_child_synchronization FAILED [  7%]
tests/performance/test_phase2_consistency.py::test_concurrent_writes_no_data_loss PASSED [  7%]
tests/performance/test_phase2_performance.py::test_agent_response_time FAILED [  7%]
tests/performance/test_phase2_performance.py::test_memory_usage_stability PASSED [  7%]
tests/performance/test_phase2_performance.py::test_context_building_performance PASSED [  7%]
tests/performance/test_phase2_performance.py::test_parent_child_memory_performance PASSED [  7%]
tests/performance/test_phase2_performance.py::test_concurrent_memory_operations PASSED [  7%]
tests/unit/test_context_manager.py::TestPriorityContextStrategy::test_select_by_importance PASSED [  8%]
tests/unit/test_context_manager.py::TestPriorityContextStrategy::test_respects_token_limit PASSED [  8%]
tests/unit/test_context_manager.py::TestSlidingWindowStrategy::test_select_recent_units PASSED [  8%]
tests/unit/test_context_manager.py::TestSlidingWindowStrategy::test_maintains_time_order PASSED [  8%]
tests/unit/test_context_manager.py::TestContextManager::test_build_context_with_priority_strategy PASSED [  8%]
tests/unit/test_context_manager.py::TestContextManager::test_build_context_with_sliding_window PASSED [  8%]
tests/unit/test_context_manager.py::TestContextManager::test_override_max_tokens PASSED [  8%]
tests/unit/test_exceptions.py::TestLoomError::test_loom_error_base_exception PASSED [  8%]
tests/unit/test_exceptions.py::TestLoomError::test_loom_error_can_be_raised PASSED [  8%]
tests/unit/test_exceptions.py::TestLoomError::test_loom_error_message PASSED [  8%]
tests/unit/test_exceptions.py::TestLoomError::test_loom_error_inheritance PASSED [  8%]
tests/unit/test_exceptions.py::TestTaskComplete::test_task_complete_creation PASSED [  8%]
tests/unit/test_exceptions.py::TestTaskComplete::test_task_complete_string_representation PASSED [  9%]
tests/unit/test_exceptions.py::TestTaskComplete::test_task_complete_can_be_raised PASSED [  9%]
tests/unit/test_exceptions.py::TestTaskComplete::test_task_complete_message_attribute PASSED [  9%]
tests/unit/test_exceptions.py::TestTaskComplete::test_task_complete_empty_message PASSED [  9%]
tests/unit/test_exceptions.py::TestTaskComplete::test_task_complete_unicode_message PASSED [  9%]
tests/unit/test_exceptions.py::TestTaskComplete::test_task_complete_long_message PASSED [  9%]
tests/unit/test_phase3.py::TestBaseNode::test_node_initialization PASSED [  9%]
tests/unit/test_phase3.py::TestBaseNode::test_node_lifecycle_hooks PASSED [  9%]
tests/unit/test_phase3.py::TestBaseNode::test_node_state_management PASSED [  9%]
tests/unit/test_phase3.py::TestBaseNode::test_node_statistics PASSED     [  9%]
tests/unit/test_phase3.py::TestBaseNode::test_node_error_handling PASSED [  9%]
tests/unit/test_phase3.py::TestBaseNode::test_node_reset_stats PASSED    [  9%]
tests/unit/test_phase3.py::TestPipelineBuilder::test_sequential_pipeline PASSED [ 10%]
tests/unit/test_phase3.py::TestPipelineBuilder::test_parallel_pipeline PASSED [ 10%]
tests/unit/test_phase3.py::TestPipelineBuilder::test_conditional_pipeline PASSED [ 10%]
tests/unit/test_phase3.py::TestPipelineBuilder::test_mixed_pipeline PASSED [ 10%]
tests/unit/test_state_manager.py::TestAgentState::test_create_agent_state PASSED [ 10%]
tests/unit/test_state_manager.py::TestAgentState::test_agent_state_to_dict PASSED [ 10%]
tests/unit/test_state_manager.py::TestAgentState::test_agent_state_from_dict PASSED [ 10%]
tests/unit/test_state_manager.py::TestMemoryStateStore::test_save_and_get PASSED [ 10%]
tests/unit/test_state_manager.py::TestMemoryStateStore::test_get_nonexistent PASSED [ 10%]
tests/unit/test_state_manager.py::TestMemoryStateStore::test_delete PASSED [ 10%]
tests/unit/test_state_manager.py::TestMemoryStateStore::test_list_keys PASSED [ 10%]
tests/unit/test_state_manager.py::TestStateManager::test_save_and_get_agent_state PASSED [ 10%]
tests/unit/test_state_manager.py::TestStateManager::test_save_and_get_task_state PASSED [ 11%]
tests/unit/test_state_manager.py::TestStateManager::test_list_agents PASSED [ 11%]
tests/unit/test_tokenizer.py::test_estimate_counter PASSED               [ 11%]
tests/unit/test_tokenizer.py::test_tiktoken_counter PASSED               [ 11%]
tests/unit/test_tokenizer.py::test_anthropic_counter PASSED              [ 11%]
tests/unit/test_tools.py::TestToolRegistry::test_init PASSED             [ 11%]
tests/unit/test_tools.py::TestToolRegistry::test_register_function PASSED [ 11%]
tests/unit/test_tools.py::TestToolRegistry::test_register_function_with_custom_name PASSED [ 11%]
tests/unit/test_tools.py::TestToolRegistry::test_get_definition PASSED   [ 11%]
tests/unit/test_tools.py::TestToolRegistry::test_get_callable PASSED     [ 11%]
tests/unit/test_tools.py::TestToolRegistry::test_multiple_tools PASSED   [ 11%]
tests/unit/test_tools.py::TestFunctionToMCP::test_convert_simple_function PASSED [ 11%]
tests/unit/test_tools.py::TestFunctionToMCP::test_convert_with_custom_name PASSED [ 12%]
tests/unit/test_tools.py::TestFunctionToMCP::test_convert_function_without_docstring PASSED [ 12%]
tests/unit/test_tools.py::TestFunctionToMCP::test_convert_required_parameters PASSED [ 12%]
tests/unit/test_tools.py::TestFunctionToMCP::test_convert_optional_parameters PASSED [ 12%]
tests/unit/test_tools.py::TestFunctionToMCP::test_type_mapping_string PASSED [ 12%]
tests/unit/test_tools.py::TestFunctionToMCP::test_type_mapping_integer PASSED [ 12%]
tests/unit/test_tools.py::TestFunctionToMCP::test_type_mapping_float PASSED [ 12%]
tests/unit/test_tools.py::TestFunctionToMCP::test_type_mapping_boolean PASSED [ 12%]
tests/unit/test_tools.py::TestFunctionToMCP::test_type_mapping_list PASSED [ 12%]
tests/unit/test_tools.py::TestFunctionToMCP::test_type_mapping_dict PASSED [ 12%]
tests/unit/test_tools.py::TestFunctionToMCP::test_type_mapping_unknown PASSED [ 12%]
tests/unit/test_tools.py::TestToolExecutor::test_init PASSED             [ 12%]
tests/unit/test_tools.py::TestToolExecutor::test_is_read_only PASSED     [ 13%]
tests/unit/test_tools.py::TestToolExecutor::test_execute_batch_empty PASSED [ 13%]
tests/unit/test_tools.py::TestToolExecutor::test_execute_batch_single_tool PASSED [ 13%]
tests/unit/test_tools.py::TestToolExecutor::test_execute_batch_parallel_read_only PASSED [ 13%]
tests/unit/test_tools.py::TestToolExecutor::test_execute_batch_serial_write_tools PASSED [ 13%]
tests/unit/test_tools.py::TestToolExecutor::test_execute_batch_mixed_tools PASSED [ 13%]
tests/unit/test_tools.py::TestToolExecutor::test_execute_batch_with_error PASSED [ 13%]
tests/unit/test_tools.py::TestToolExecutor::test_execute_batch_no_parallel PASSED [ 13%]
tests/unit/test_transport.py::TestMemoryTransport::test_connect_disconnect PASSED [ 13%]
tests/unit/test_transport.py::TestMemoryTransport::test_publish_subscribe PASSED [ 13%]
tests/unit/test_transport.py::TestMemoryTransport::test_multiple_subscribers PASSED [ 13%]
tests/unit/test_transport.py::TestMemoryTransport::test_unsubscribe PASSED [ 13%]
tests/unit/fractal/test_memory.py::TestMemoryScope::test_all_scopes_defined PASSED [ 14%]
tests/unit/fractal/test_memory.py::TestMemoryAccessPolicy::test_local_policy PASSED [ 14%]
tests/unit/fractal/test_memory.py::TestMemoryAccessPolicy::test_shared_policy PASSED [ 14%]
tests/unit/fractal/test_memory.py::TestMemoryAccessPolicy::test_inherited_policy PASSED [ 14%]
tests/unit/fractal/test_memory.py::TestMemoryAccessPolicy::test_global_policy PASSED [ 14%]
tests/unit/fractal/test_memory.py::TestMemoryEntry::test_create_entry PASSED [ 14%]
tests/unit/fractal/test_memory.py::TestMemoryEntry::test_entry_with_metadata PASSED [ 14%]
tests/unit/fractal/test_memory.py::TestMemoryEntry::test_entry_version_tracking PASSED [ 14%]
tests/unit/fractal/test_memory.py::TestFractalMemoryBasic::test_create_memory PASSED [ 14%]
tests/unit/fractal/test_memory.py::TestFractalMemoryBasic::test_write_local_memory PASSED [ 14%]
tests/unit/fractal/test_memory.py::TestFractalMemoryBasic::test_write_shared_memory PASSED [ 14%]
tests/unit/fractal/test_memory.py::TestFractalMemoryBasic::test_write_global_memory PASSED [ 14%]
tests/unit/fractal/test_memory.py::TestFractalMemoryBasic::test_write_inherited_fails PASSED [ 15%]
tests/unit/fractal/test_memory.py::TestFractalMemoryBasic::test_read_memory PASSED [ 15%]
tests/unit/fractal/test_memory.py::TestFractalMemoryBasic::test_read_nonexistent PASSED [ 15%]
tests/unit/fractal/test_memory.py::TestFractalMemoryBasic::test_read_with_scope_filter PASSED [ 15%]
tests/unit/fractal/test_memory.py::TestFractalMemoryBasic::test_list_by_scope PASSED [ 15%]
tests/unit/fractal/test_memory.py::TestFractalMemoryInheritance::test_create_child_with_parent PASSED [ 15%]
tests/unit/fractal/test_memory.py::TestFractalMemoryInheritance::test_child_inherits_shared_memory PASSED [ 15%]
tests/unit/fractal/test_memory.py::TestFractalMemoryInheritance::test_child_inherits_global_memory PASSED [ 15%]
tests/unit/fractal/test_memory.py::TestFractalMemoryInheritance::test_child_cannot_inherit_local_memory PASSED [ 15%]
tests/unit/fractal/test_memory.py::TestFractalMemoryInheritance::test_inherited_entry_version_tracking PASSED [ 15%]
tests/unit/fractal/test_memory.py::TestFractalMemoryInheritance::test_inherited_entry_caching PASSED [ 15%]
tests/unit/fractal/test_memory.py::TestFractalMemoryInheritance::test_multi_level_inheritance PASSED [ 15%]
tests/unit/fractal/test_memory.py::TestFractalMemoryInheritance::test_child_local_overrides_inherited PASSED [ 16%]
tests/unit/fractal/test_sync.py::TestMemorySyncManager::test_create_sync_manager PASSED [ 16%]
tests/unit/fractal/test_sync.py::TestMemorySyncManager::test_write_with_version_check_success PASSED [ 16%]
tests/unit/fractal/test_sync.py::TestMemorySyncManager::test_write_with_version_check_conflict PASSED [ 16%]
tests/unit/fractal/test_sync.py::TestMemorySyncManager::test_sync_from_parent_no_parent PASSED [ 16%]
tests/unit/fractal/test_sync.py::TestMemorySyncManager::test_sync_from_parent_new_entries PASSED [ 16%]
tests/unit/fractal/test_sync.py::TestConflictResolvers::test_parent_wins_resolver PASSED [ 16%]
tests/unit/fractal/test_sync.py::TestConflictResolvers::test_child_wins_resolver PASSED [ 16%]
tests/unit/fractal/test_sync.py::TestConflictResolvers::test_merge_resolver_dict_merge PASSED [ 16%]
tests/unit/fractal/test_sync.py::TestConflictResolvers::test_merge_resolver_non_dict PASSED [ 16%]
tests/unit/test_agent/test_agent_create.py::TestAgentCreateEventBus::test_auto_create_event_bus PASSED [ 16%]
tests/unit/test_agent/test_agent_create.py::TestAgentCreateEventBus::test_explicit_event_bus PASSED [ 17%]
tests/unit/test_agent/test_agent_create.py::TestAgentCreateEventBus::test_shared_event_bus_multi_agents PASSED [ 17%]
tests/unit/test_agent/test_agent_create.py::TestAgentCreateSkills::test_create_with_skills_parameter PASSED [ 17%]
tests/unit/test_agent/test_agent_create.py::TestAgentCreateSkills::test_create_without_skills_parameter PASSED [ 17%]
tests/unit/test_agent/test_agent_create.py::TestAgentCreateSkills::test_create_with_empty_skills_list PASSED [ 17%]
tests/unit/test_agent/test_agent_create.py::TestAgentCreateSkills::test_create_with_skills_uses_skill_market PASSED [ 17%]
tests/unit/test_agent/test_agent_create.py::TestAgentCreateCapabilities::test_create_with_capabilities_parameter PASSED [ 17%]
tests/unit/test_agent/test_agent_create.py::TestAgentCreateCapabilities::test_create_without_capabilities_parameter PASSED [ 17%]
tests/unit/test_agent/test_agent_create.py::TestAgentCreateCapabilities::test_create_capabilities_does_not_override_explicit_params PASSED [ 17%]
tests/unit/test_agent/test_dynamic_tools.py::TestDynamicToolList::test_get_available_tools_base PASSED [ 17%]
tests/unit/test_agent/test_dynamic_tools.py::TestDynamicToolList::test_get_available_tools_with_extra PASSED [ 17%]
tests/unit/test_agent/test_dynamic_tools.py::TestDynamicToolList::test_get_available_tools_filter_disabled PASSED [ 17%]
tests/unit/test_agent/test_dynamic_tools.py::TestDynamicToolList::test_get_available_tools_with_sandbox_manager PASSED [ 18%]
tests/unit/test_agent/test_dynamic_tools.py::TestDynamicToolList::test_get_available_tools_with_both_managers PASSED [ 18%]
tests/unit/test_agent/test_form3_delegation.py::TestForm3Delegation::test_delegate_to_skill_node_by_node_id PASSED [ 18%]
tests/unit/test_agent/test_form3_delegation.py::TestForm3Delegation::test_delegate_to_skill_node_by_skill_id PASSED [ 18%]
tests/unit/test_agent/test_form3_delegation.py::TestForm3Delegation::test_delegate_skill_node_not_found PASSED [ 18%]
tests/unit/test_agent/test_form3_delegation.py::TestForm3Delegation::test_delegate_skill_node_execution_error PASSED [ 18%]
tests/unit/test_agent/test_form3_delegation.py::TestForm3Delegation::test_delegate_prefers_available_agents_over_skill_nodes PASSED [ 18%]
tests/unit/test_agent/test_registry_inheritance.py::TestRegistryInheritance::test_child_inherits_skill_registry PASSED [ 18%]
tests/unit/test_agent/test_registry_inheritance.py::TestRegistryInheritance::test_child_inherits_tool_registry PASSED [ 18%]
tests/unit/test_agent/test_registry_inheritance.py::TestRegistryInheritance::test_child_inherits_config PASSED [ 18%]
tests/unit/test_agent/test_registry_inheritance.py::TestRegistryInheritance::test_child_config_modification PASSED [ 18%]
tests/unit/test_agent/test_skill_activation.py::TestSkillActivation::test_activate_skill_not_enabled PASSED [ 18%]
tests/unit/test_agent/test_skill_activation.py::TestSkillActivation::test_activate_skill_already_active PASSED [ 19%]
tests/unit/test_agent/test_skill_activation.py::TestSkillActivation::test_activate_skill_tracks_state PASSED [ 19%]
tests/unit/test_agent/test_skill_node.py::TestSkillAgentNode::test_init PASSED [ 19%]
tests/unit/test_agent/test_skill_node.py::TestSkillAgentNode::test_execute_impl_success PASSED [ 19%]
tests/unit/test_agent/test_skill_node.py::TestSkillAgentNode::test_execute_impl_missing_task_description PASSED [ 19%]
tests/unit/test_agent/test_skill_node.py::TestSkillAgentNode::test_execute_impl_llm_error PASSED [ 19%]
tests/unit/test_api/test_stream_api.py::TestStreamAPIInit::test_stream_api_init PASSED [ 19%]
tests/unit/test_api/test_stream_api.py::TestStreamNodeEvents::test_stream_node_events PASSED [ 19%]
tests/unit/test_api/test_stream_api.py::TestStreamThinkingEvents::test_stream_thinking_events_with_node_id PASSED [ 19%]
tests/unit/test_api/test_stream_api.py::TestStreamThinkingEvents::test_stream_thinking_events_without_node_id PASSED [ 19%]
tests/unit/test_api/test_stream_api.py::TestStreamAllEvents::test_stream_all_events_default_pattern PASSED [ 19%]
tests/unit/test_api/test_stream_api.py::TestStreamAllEvents::test_stream_all_events_custom_pattern PASSED [ 19%]
tests/unit/test_capabilities/test_registry.py::TestCapabilitySet::test_empty_capability_set PASSED [ 20%]
tests/unit/test_capabilities/test_registry.py::TestCapabilitySet::test_capability_set_with_tools PASSED [ 20%]
tests/unit/test_capabilities/test_registry.py::TestCapabilitySet::test_capability_set_with_skills PASSED [ 20%]
tests/unit/test_capabilities/test_registry.py::TestCapabilitySet::test_capability_set_with_both PASSED [ 20%]
tests/unit/test_capabilities/test_registry.py::TestValidationResult::test_valid_result PASSED [ 20%]
tests/unit/test_capabilities/test_registry.py::TestValidationResult::test_invalid_result PASSED [ 20%]
tests/unit/test_capabilities/test_registry.py::TestCapabilityRegistry::test_init_with_no_components PASSED [ 20%]
tests/unit/test_capabilities/test_registry.py::TestCapabilityRegistry::test_init_with_components PASSED [ 20%]
tests/unit/test_capabilities/test_registry.py::TestCapabilityRegistry::test_find_relevant_capabilities_no_components PASSED [ 20%]
tests/unit/test_capabilities/test_registry.py::TestCapabilityRegistry::test_find_relevant_capabilities_with_tools PASSED [ 20%]
tests/unit/test_capabilities/test_registry.py::TestCapabilityRegistry::test_find_relevant_capabilities_with_skills PASSED [ 20%]
tests/unit/test_capabilities/test_registry.py::TestCapabilityRegistry::test_find_relevant_capabilities_with_both PASSED [ 20%]
tests/unit/test_capabilities/test_registry.py::TestCapabilityRegistry::test_find_relevant_capabilities_tool_manager_exception PASSED [ 21%]
tests/unit/test_capabilities/test_registry.py::TestCapabilityRegistry::test_find_relevant_capabilities_skill_registry_exception PASSED [ 21%]
tests/unit/test_capabilities/test_registry.py::TestCapabilityRegistry::test_validate_skill_dependencies_no_skill_registry PASSED [ 21%]
tests/unit/test_capabilities/test_registry.py::TestCapabilityRegistry::test_validate_skill_dependencies_skill_not_found PASSED [ 21%]
tests/unit/test_capabilities/test_registry.py::TestCapabilityRegistry::test_validate_skill_dependencies_no_required_tools PASSED [ 21%]
tests/unit/test_capabilities/test_registry.py::TestCapabilityRegistry::test_validate_skill_dependencies_all_tools_available PASSED [ 21%]
tests/unit/test_capabilities/test_registry.py::TestCapabilityRegistry::test_validate_skill_dependencies_missing_tools PASSED [ 21%]
tests/unit/test_capabilities/test_registry.py::TestCapabilityRegistry::test_validate_skill_dependencies_no_tool_manager PASSED [ 21%]
tests/unit/test_capabilities/test_registry.py::TestCapabilityRegistry::test_validate_skill_dependencies_get_skill_exception PASSED [ 21%]
tests/unit/test_capabilities/test_registry.py::TestCapabilityRegistry::test_validate_skill_dependencies_list_tools_exception PASSED [ 21%]
tests/unit/test_config/test_agent_config.py::TestAgentConfig::test_default_config PASSED [ 21%]
tests/unit/test_config/test_agent_config.py::TestAgentConfig::test_custom_config PASSED [ 21%]
tests/unit/test_config/test_agent_config.py::TestAgentConfigInheritance::test_inherit_basic PASSED [ 22%]
tests/unit/test_config/test_agent_config.py::TestAgentConfigInheritance::test_inherit_add_skills PASSED [ 22%]
tests/unit/test_config/test_agent_config.py::TestAgentConfigInheritance::test_inherit_remove_skills PASSED [ 22%]
tests/unit/test_config/test_agent_config.py::TestAgentConfigInheritance::test_inherit_add_and_remove_skills PASSED [ 22%]
tests/unit/test_config/test_base.py::TestLoomBaseConfig::test_to_dict PASSED [ 22%]
tests/unit/test_config/test_base.py::TestLoomBaseConfig::test_to_dict_with_optional PASSED [ 22%]
tests/unit/test_config/test_base.py::TestLoomBaseConfig::test_from_dict PASSED [ 22%]
tests/unit/test_config/test_base.py::TestLoomBaseConfig::test_to_json PASSED [ 22%]
tests/unit/test_config/test_base.py::TestLoomBaseConfig::test_from_json PASSED [ 22%]
tests/unit/test_config/test_knowledge.py::TestKnowledgeItem::test_knowledge_item_init_minimal PASSED [ 22%]
tests/unit/test_config/test_knowledge.py::TestKnowledgeItem::test_knowledge_item_init_full PASSED [ 22%]
tests/unit/test_config/test_knowledge.py::TestKnowledgeBaseProvider::test_query_basic PASSED [ 22%]
tests/unit/test_config/test_knowledge.py::TestKnowledgeBaseProvider::test_query_with_limit PASSED [ 23%]
tests/unit/test_config/test_knowledge.py::TestKnowledgeBaseProvider::test_get_by_id_exists PASSED [ 23%]
tests/unit/test_config/test_knowledge.py::TestKnowledgeBaseProvider::test_get_by_id_not_exists PASSED [ 23%]
tests/unit/test_events/test_event_bus.py::TestEventBusInit::test_init_without_transport PASSED [ 23%]
tests/unit/test_events/test_event_bus.py::TestEventBusInit::test_init_with_transport PASSED [ 23%]
tests/unit/test_events/test_event_bus.py::TestEventBusRegisterHandler::test_register_single_handler PASSED [ 23%]
tests/unit/test_events/test_event_bus.py::TestEventBusRegisterHandler::test_register_multiple_handlers_same_action PASSED [ 23%]
tests/unit/test_events/test_event_bus.py::TestEventBusPublish::test_publish_no_handler PASSED [ 23%]
tests/unit/test_events/test_event_bus.py::TestEventBusPublish::test_publish_with_handler_success PASSED [ 23%]
tests/unit/test_events/test_event_bus.py::TestEventBusPublish::test_publish_with_handler_error PASSED [ 23%]
tests/unit/test_events/test_event_bus.py::TestEventBusPublishWithTransport::test_publish_with_transport_connects_on_first_publish PASSED [ 23%]
tests/unit/test_events/test_event_bus.py::TestEventBusPublishWithTransport::test_publish_with_transport_sends_via_transport PASSED [ 23%]
tests/unit/test_events/test_event_bus.py::TestEventBusPublishWithTransport::test_publish_with_transport_reuses_connection PASSED [ 24%]
tests/unit/test_events/test_event_bus.py::TestEventBusFireAndForgetError::test_publish_fire_and_forget_mode PASSED [ 24%]
tests/unit/test_events/test_event_bus.py::TestEventBusFireAndForgetError::test_publish_fire_and_forget_with_handler_error PASSED [ 24%]
tests/unit/test_events/test_event_bus.py::TestEventBusWildcardSubscription::test_wildcard_subscription_receives_all_tasks PASSED [ 24%]
tests/unit/test_events/test_event_bus.py::TestEventBusWildcardSubscription::test_wildcard_handler_error_does_not_affect_main_flow PASSED [ 24%]
tests/unit/test_events/test_event_bus.py::TestEventBusDebugMode::test_debug_mode_enabled PASSED [ 24%]
tests/unit/test_events/test_event_bus.py::TestEventBusDebugMode::test_debug_mode_disabled PASSED [ 24%]
tests/unit/test_events/test_event_bus.py::TestEventBusDebugMode::test_debug_mode_records_events PASSED [ 24%]
tests/unit/test_events/test_event_bus.py::TestEventBusDebugMode::test_debug_mode_respects_maxlen PASSED [ 24%]
tests/unit/test_events/test_event_bus.py::TestEventBusDebugMode::test_get_recent_events_without_debug_mode PASSED [ 24%]
tests/unit/test_events/test_nats_transport.py::TestNATSTransport::test_init_default PASSED [ 24%]
tests/unit/test_events/test_nats_transport.py::TestNATSTransport::test_init_with_custom_servers PASSED [ 24%]
tests/unit/test_events/test_nats_transport.py::TestNATSTransport::test_init_with_custom_name PASSED [ 25%]
tests/unit/test_events/test_nats_transport.py::TestNATSTransport::test_init_with_custom_max_reconnect PASSED [ 25%]
tests/unit/test_events/test_nats_transport.py::TestNATSTransport::test_connect PASSED [ 25%]
tests/unit/test_events/test_nats_transport.py::TestNATSTransport::test_disconnect PASSED [ 25%]
tests/unit/test_events/test_nats_transport.py::TestNATSTransport::test_disconnect_when_not_connected PASSED [ 25%]
tests/unit/test_events/test_nats_transport.py::TestNATSTransport::test_disconnect_with_subscriptions PASSED [ 25%]
tests/unit/test_events/test_nats_transport.py::TestNATSTransport::test_is_connected PASSED [ 25%]
tests/unit/test_events/test_nats_transport.py::TestNATSTransport::test_is_connected_after_connect PASSED [ 25%]
tests/unit/test_events/test_nats_transport.py::TestNATSTransport::test_is_connected_after_disconnect PASSED [ 25%]
tests/unit/test_events/test_nats_transport.py::TestNATSTransport::test_publish PASSED [ 25%]
tests/unit/test_events/test_nats_transport.py::TestNATSTransport::test_publish_not_connected PASSED [ 25%]
tests/unit/test_events/test_nats_transport.py::TestNATSTransport::test_subscribe PASSED [ 25%]
tests/unit/test_events/test_nats_transport.py::TestNATSTransport::test_subscribe_not_connected PASSED [ 26%]
tests/unit/test_events/test_nats_transport.py::TestNATSTransport::test_unsubscribe PASSED [ 26%]
tests/unit/test_events/test_nats_transport.py::TestNATSTransport::test_unsubscribe_nonexistent_topic PASSED [ 26%]
tests/unit/test_events/test_nats_transport.py::TestNATSTransport::test_message_handler_wrapper PASSED [ 26%]
tests/unit/test_events/test_sse_formatter.py::TestSSEFormatter::test_format_sse_message_basic PASSED [ 26%]
tests/unit/test_events/test_sse_formatter.py::TestSSEFormatter::test_format_sse_message_with_id PASSED [ 26%]
tests/unit/test_events/test_sse_formatter.py::TestSSEFormatter::test_format_sse_message_empty_data PASSED [ 26%]
tests/unit/test_events/test_sse_formatter.py::TestSSEFormatter::test_format_sse_message_multiline_data PASSED [ 26%]
tests/unit/test_events/test_sse_formatter.py::TestSSEFormatter::test_format_sse_message_with_special_characters PASSED [ 26%]
tests/unit/test_events/test_sse_formatter.py::TestSSEFormatter::test_format_sse_message_with_unicode PASSED [ 26%]
tests/unit/test_events/test_sse_formatter.py::TestSSEFormatter::test_format_sse_message_endsWith_newline PASSED [ 26%]
tests/unit/test_events/test_sse_formatter.py::TestSSEFormatter::test_format_sse_message_none_id PASSED [ 26%]
tests/unit/test_events/test_sse_formatter.py::TestSSEFormatter::test_format_sse_message_empty_id PASSED [ 27%]
tests/unit/test_events/test_sse_formatter.py::TestSSEFormatter::test_format_sse_message_long_id PASSED [ 27%]
tests/unit/test_events/test_sse_formatter.py::TestSSEFormatter::test_format_sse_message_various_event_types PASSED [ 27%]
tests/unit/test_events/test_sse_formatter.py::TestSSEFormatter::test_format_sse_message_data_with_colon PASSED [ 27%]
tests/unit/test_events/test_sse_formatter.py::TestSSEFormatter::test_format_sse_message_data_with_newline_handling PASSED [ 27%]
tests/unit/test_events/test_sse_formatter.py::TestSSEFormatter::test_format_sse_message_json_data PASSED [ 27%]
tests/unit/test_events/test_sse_formatter.py::TestSSEFormatter::test_format_sse_message_numeric_data PASSED [ 27%]
tests/unit/test_events/test_sse_formatter.py::TestSSEFormatter::test_format_sse_message_order_of_fields PASSED [ 27%]
tests/unit/test_events/test_sse_formatter.py::TestSSEFormatter::test_format_sse_message_is_static_method PASSED [ 27%]
tests/unit/test_events/test_sse_formatter.py::TestSSEFormatter::test_format_sse_message_multiple_calls PASSED [ 27%]
tests/unit/test_events/test_sse_formatter.py::TestSSEFormatter::test_format_sse_message_empty_event_type PASSED [ 27%]
tests/unit/test_events/test_stream_converter.py::TestEventStreamConverterInit::test_init PASSED [ 27%]
tests/unit/test_events/test_stream_converter.py::TestConvertTaskToSSE::test_convert_task_to_sse PASSED [ 28%]
tests/unit/test_events/test_transport.py::TestTransportABC::test_transport_is_abstract PASSED [ 28%]
tests/unit/test_events/test_transport.py::TestTransportABC::test_transport_subclass_implementing_all_methods PASSED [ 28%]
tests/unit/test_events/test_transport.py::TestTransportABC::test_transport_connect PASSED [ 28%]
tests/unit/test_events/test_transport.py::TestTransportABC::test_transport_disconnect PASSED [ 28%]
tests/unit/test_events/test_transport.py::TestTransportABC::test_transport_publish PASSED [ 28%]
tests/unit/test_events/test_transport.py::TestTransportABC::test_transport_subscribe PASSED [ 28%]
tests/unit/test_events/test_transport.py::TestTransportABC::test_transport_unsubscribe PASSED [ 28%]
tests/unit/test_events/test_transport.py::TestTransportABC::test_transport_is_connected_default PASSED [ 28%]
tests/unit/test_events/test_transport.py::TestTransportABC::test_transport_is_connected_custom_implementation PASSED [ 28%]
tests/unit/test_events/test_transport.py::TestMessageHandler::test_message_handler_callable PASSED [ 28%]
tests/unit/test_events/test_transport.py::TestMessageHandler::test_message_handler_with_implementation PASSED [ 28%]
tests/unit/test_fractal/test_synthesizer.py::TestResultSynthesizerConcatenate::test_synthesize_concatenate_strategy PASSED [ 29%]
tests/unit/test_fractal/test_synthesizer.py::TestResultSynthesizerConcatenate::test_concatenate_with_dict_results PASSED [ 29%]
tests/unit/test_fractal/test_synthesizer.py::TestResultSynthesizerConcatenate::test_concatenate_without_result_key PASSED [ 29%]
tests/unit/test_fractal/test_synthesizer.py::TestResultSynthesizerStructured::test_synthesize_structured_strategy PASSED [ 29%]
tests/unit/test_fractal/test_synthesizer.py::TestResultSynthesizerStructured::test_structured_with_success_and_failure PASSED [ 29%]
tests/unit/test_fractal/test_synthesizer.py::TestResultSynthesizerStructured::test_structured_all_success PASSED [ 29%]
tests/unit/test_fractal/test_synthesizer.py::TestResultSynthesizerStructured::test_structured_default_success PASSED [ 29%]
tests/unit/test_fractal/test_synthesizer.py::TestResultSynthesizerLLM::test_synthesize_llm_strategy_success PASSED [ 29%]
tests/unit/test_fractal/test_synthesizer.py::TestResultSynthesizerLLM::test_synthesize_llm_without_provider PASSED [ 29%]
tests/unit/test_fractal/test_synthesizer.py::TestResultSynthesizerLLM::test_llm_synthesize_failure_fallback PASSED [ 29%]
tests/unit/test_fractal/test_synthesizer.py::TestResultSynthesizerEdgeCases::test_synthesize_empty_results PASSED [ 29%]
tests/unit/test_fractal/test_synthesizer.py::TestResultSynthesizerEdgeCases::test_synthesize_unknown_strategy PASSED [ 29%]
tests/unit/test_fractal/test_synthesizer.py::TestResultSynthesizerEdgeCases::test_synthesize_exception_fallback PASSED [ 30%]
tests/unit/test_fractal/test_synthesizer.py::TestResultSynthesizerPromptBuilding::test_build_synthesis_prompt PASSED [ 30%]
tests/unit/test_fractal/test_synthesizer.py::TestResultSynthesizerPromptBuilding::test_build_synthesis_prompt_all_success PASSED [ 30%]
tests/unit/test_fractal/test_utils.py::TestFractalUtilsRemoved::test_utils_module_exists PASSED [ 30%]
tests/unit/test_memory/test_compression.py::TestL4CompressorInit::test_init_default PASSED [ 30%]
tests/unit/test_memory/test_compression.py::TestL4CompressorInit::test_init_custom_parameters PASSED [ 30%]
tests/unit/test_memory/test_compression.py::TestShouldCompress::test_should_compress_below_threshold PASSED [ 30%]
tests/unit/test_memory/test_compression.py::TestShouldCompress::test_should_compress_above_threshold PASSED [ 30%]
tests/unit/test_memory/test_compression.py::TestShouldCompress::test_should_compress_at_threshold PASSED [ 30%]
tests/unit/test_memory/test_compression.py::TestCompressByImportance::test_compress_by_importance_keeps_top_facts PASSED [ 30%]
tests/unit/test_memory/test_compression.py::TestCompressByImportance::test_compress_by_importance_preserves_order PASSED [ 30%]
tests/unit/test_memory/test_compression.py::TestMergeCluster::test_merge_cluster_keeps_most_important PASSED [ 30%]
tests/unit/test_memory/test_compression.py::TestMergeCluster::test_merge_cluster_metadata PASSED [ 31%]
tests/unit/test_memory/test_compression.py::TestCompress::test_compress_below_threshold_no_change PASSED [ 31%]
tests/unit/test_memory/test_compression.py::TestCompress::test_compress_without_embeddings_uses_importance PASSED [ 31%]
tests/unit/test_memory/test_compression.py::TestUnionFindClustering::test_union_find_no_similar_facts PASSED [ 31%]
tests/unit/test_memory/test_compression.py::TestUnionFindClustering::test_union_find_all_similar_facts PASSED [ 31%]
tests/unit/test_memory/test_compression.py::TestClusterFacts::test_cluster_facts_no_embeddings PASSED [ 31%]
tests/unit/test_memory/test_compression.py::TestClusterFacts::test_cluster_facts_with_embeddings PASSED [ 31%]
tests/unit/test_memory/test_core_extended.py::TestLoomMemorySearch::test_simple_search_tasks PASSED [ 31%]
tests/unit/test_memory/test_core_extended.py::TestLoomMemorySearch::test_simple_search_tasks_with_limit PASSED [ 31%]
tests/unit/test_memory/test_core_extended.py::TestLoomMemorySearch::test_simple_search_facts PASSED [ 31%]
tests/unit/test_memory/test_core_extended.py::TestLoomMemorySearch::test_simple_search_facts_with_limit PASSED [ 31%]
tests/unit/test_memory/test_core_extended.py::TestLoomMemoryPromote::test_promote_l1_to_l2 PASSED [ 31%]
tests/unit/test_memory/test_core_extended.py::TestLoomMemoryPromote::test_promote_l2_to_l3 PASSED [ 32%]
tests/unit/test_memory/test_core_extended.py::TestLoomMemoryPromote::test_promote_tasks PASSED [ 32%]
tests/unit/test_memory/test_core_extended.py::TestLoomMemoryPromote::test_promote_tasks_async PASSED [ 32%]
tests/unit/test_memory/test_core_extended.py::TestLoomMemoryPromote::test_promote_l3_to_l4 PASSED [ 32%]
tests/unit/test_memory/test_core_extended.py::TestLoomMemoryFactManagement::test_add_fact PASSED [ 32%]
tests/unit/test_memory/test_core_extended.py::TestLoomMemoryFactManagement::test_add_fact_triggers_cleanup PASSED [ 32%]
tests/unit/test_memory/test_core_extended.py::TestLoomMemoryFactManagement::test_cleanup_fact_index PASSED [ 32%]
tests/unit/test_memory/test_core_extended.py::TestLoomMemorySummarize::test_summarize_task PASSED [ 32%]
tests/unit/test_memory/test_core_extended.py::TestLoomMemoryGetTask::test_get_task_exists PASSED [ 32%]
tests/unit/test_memory/test_core_extended.py::TestLoomMemoryGetTask::test_get_task_not_exists PASSED [ 32%]
tests/unit/test_memory/test_core_extended.py::TestLoomMemoryStats::test_get_stats PASSED [ 32%]
tests/unit/test_memory/test_core_extended.py::TestLoomMemoryClearAll::test_clear_all PASSED [ 32%]
tests/unit/test_memory/test_core_extended.py::TestLoomMemoryCleanup::test_cleanup_task_index PASSED [ 33%]
tests/unit/test_memory/test_core_extended.py::TestLoomMemoryL3Management::test_add_to_l3 PASSED [ 33%]
tests/unit/test_memory/test_core_extended.py::TestLoomMemoryL3Management::test_add_to_l3_respects_limit PASSED [ 33%]
tests/unit/test_memory/test_core_extended.py::TestLoomMemoryL3Management::test_get_l3_summaries PASSED [ 33%]
tests/unit/test_memory/test_core_extended.py::TestLoomMemoryL4Management::test_add_to_l4_with_embedding PASSED [ 33%]
tests/unit/test_memory/test_core_extended.py::TestLoomMemoryL4Management::test_add_to_l4_without_embedding PASSED [ 33%]
tests/unit/test_memory/test_core_extended.py::TestLoomMemoryL4Management::test_search_tasks_with_vector_store PASSED [ 33%]
tests/unit/test_memory/test_core_extended.py::TestLoomMemoryL4Management::test_search_tasks_without_vector_store PASSED [ 33%]
tests/unit/test_memory/test_core_extended.py::TestLoomMemoryL4Management::test_search_facts_with_vector_store PASSED [ 33%]
tests/unit/test_memory/test_core_extended.py::TestLoomMemoryL4Management::test_search_facts_without_vector_store PASSED [ 33%]
tests/unit/test_memory/test_fact_extractor.py::TestExtractApiFacts::test_extract_api_facts_with_endpoint_and_method PASSED [ 33%]
tests/unit/test_memory/test_fact_extractor.py::TestExtractApiFacts::test_extract_api_facts_without_parameters PASSED [ 34%]
tests/unit/test_memory/test_fact_extractor.py::TestExtractPreferenceFacts::test_extract_preference_facts_with_user_choice PASSED [ 34%]
tests/unit/test_memory/test_fact_extractor.py::TestExtractPreferenceFacts::test_extract_preference_facts_without_choice PASSED [ 34%]
tests/unit/test_memory/test_fact_extractor.py::TestExtractToolFacts::test_extract_tool_facts_with_tool_and_result PASSED [ 34%]
tests/unit/test_memory/test_fact_extractor.py::TestExtractToolFacts::test_extract_tool_facts_without_result PASSED [ 34%]
tests/unit/test_memory/test_fact_extractor.py::TestExtractErrorFacts::test_extract_error_facts_with_failed_task PASSED [ 34%]
tests/unit/test_memory/test_fact_extractor.py::TestExtractErrorFacts::test_extract_error_facts_without_error PASSED [ 34%]
tests/unit/test_memory/test_fact_extractor.py::TestExtractMultipleFacts::test_extract_multiple_fact_types PASSED [ 34%]
tests/unit/test_memory/test_factory.py::TestMemoryFactory::test_create_default PASSED [ 34%]
tests/unit/test_memory/test_factory.py::TestMemoryFactory::test_create_for_chat PASSED [ 34%]
tests/unit/test_memory/test_factory.py::TestMemoryFactory::test_create_for_task PASSED [ 34%]
tests/unit/test_memory/test_factory.py::TestMemoryFactory::test_create_custom PASSED [ 34%]
tests/unit/test_memory/test_knowledge_rag.py::TestKnowledgeContextSourceBasic::test_init PASSED [ 35%]
tests/unit/test_memory/test_knowledge_rag.py::TestKnowledgeContextSourceBasic::test_get_context_no_content PASSED [ 35%]
tests/unit/test_memory/test_knowledge_rag.py::TestKnowledgeContextSourceBasic::test_get_context_with_content PASSED [ 35%]
tests/unit/test_memory/test_knowledge_rag.py::TestKnowledgeContextSourceBasic::test_relevance_filtering PASSED [ 35%]
tests/unit/test_memory/test_knowledge_rag.py::TestKnowledgeContextSourceCache::test_cache_miss_queries_kb PASSED [ 35%]
tests/unit/test_memory/test_knowledge_rag.py::TestKnowledgeContextSourceCache::test_cache_hit_skips_kb PASSED [ 35%]
tests/unit/test_memory/test_knowledge_rag.py::TestKnowledgeContextSourceConfiguration::test_custom_max_items PASSED [ 35%]
tests/unit/test_memory/test_knowledge_rag.py::TestKnowledgeContextSourceConfiguration::test_custom_relevance_threshold PASSED [ 35%]
tests/unit/test_memory/test_manager.py::test_init_basic PASSED           [ 35%]
tests/unit/test_memory/test_manager.py::test_init_with_parent PASSED     [ 35%]
tests/unit/test_memory/test_manager.py::test_write_local PASSED          [ 35%]
tests/unit/test_memory/test_manager.py::test_write_inherited_fails PASSED [ 35%]
tests/unit/test_memory/test_manager.py::test_read_local PASSED           [ 36%]
tests/unit/test_memory/test_manager.py::test_read_inherited_from_parent PASSED [ 36%]
tests/unit/test_memory/test_manager.py::test_list_by_scope PASSED        [ 36%]
tests/unit/test_memory/test_orchestrator.py::test_init_basic PASSED      [ 36%]
tests/unit/test_memory/test_orchestrator.py::test_build_context_basic PASSED [ 36%]
tests/unit/test_memory/test_sanitizers.py::TestContentSanitizerInit::test_init PASSED [ 36%]
tests/unit/test_memory/test_sanitizers.py::TestContentSanitizerInit::test_load_patterns PASSED [ 36%]
tests/unit/test_memory/test_sanitizers.py::TestContentSanitizerSanitize::test_sanitize_basic PASSED [ 36%]
tests/unit/test_memory/test_sanitizers.py::TestContentSanitizerSanitize::test_sanitize_email PASSED [ 36%]
tests/unit/test_memory/test_sanitizers.py::TestContentSanitizerSanitize::test_sanitize_phone PASSED [ 36%]
tests/unit/test_memory/test_sanitizers.py::TestContentSanitizerSanitize::test_sanitize_api_key PASSED [ 36%]
tests/unit/test_memory/test_sanitizers.py::TestContentSanitizerSanitize::test_sanitize_url PASSED [ 36%]
tests/unit/test_memory/test_sanitizers.py::TestContentSanitizerSanitize::test_sanitize_credit_card PASSED [ 37%]
tests/unit/test_memory/test_sanitizers.py::TestContentSanitizerSanitize::test_sanitize_without_masking PASSED [ 37%]
tests/unit/test_memory/test_sanitizers.py::TestContentSanitizerSanitize::test_sanitize_normalize_newlines PASSED [ 37%]
tests/unit/test_memory/test_sanitizers.py::TestContentSanitizerSanitize::test_sanitize_remove_control_chars PASSED [ 37%]
tests/unit/test_memory/test_sanitizers.py::TestContentSanitizerSanitize::test_sanitize_empty_string PASSED [ 37%]
tests/unit/test_memory/test_sanitizers.py::TestContentSanitizerSanitize::test_sanitize_none PASSED [ 37%]
tests/unit/test_memory/test_sanitizers.py::TestContentSanitizerSanitize::test_sanitize_non_string PASSED [ 37%]
tests/unit/test_memory/test_sanitizers.py::TestContentSanitizerValidate::test_validate_valid_content PASSED [ 37%]
tests/unit/test_memory/test_sanitizers.py::TestContentSanitizerValidate::test_validate_empty_string PASSED [ 37%]
tests/unit/test_memory/test_sanitizers.py::TestContentSanitizerValidate::test_validate_none PASSED [ 37%]
tests/unit/test_memory/test_sanitizers.py::TestContentSanitizerValidate::test_validate_whitespace_only PASSED [ 37%]
tests/unit/test_memory/test_sanitizers.py::TestContentSanitizerValidate::test_validate_no_alphanumeric PASSED [ 37%]
tests/unit/test_memory/test_sanitizers.py::TestContentSanitizerValidate::test_validate_non_string PASSED [ 38%]
tests/unit/test_memory/test_sanitizers.py::TestContentSanitizerValidate::test_validate_with_alphanumeric PASSED [ 38%]
tests/unit/test_memory/test_task_context.py::TestMessageConverter::test_convert_thinking_task PASSED [ 38%]
tests/unit/test_memory/test_task_context.py::TestMessageConverter::test_convert_thinking_task_empty_content PASSED [ 38%]
tests/unit/test_memory/test_task_context.py::TestMessageConverter::test_convert_tool_call_task PASSED [ 38%]
tests/unit/test_memory/test_task_context.py::TestMessageConverter::test_convert_execute_task PASSED [ 38%]
tests/unit/test_memory/test_task_context.py::TestMessageConverter::test_convert_node_message_task PASSED [ 38%]
tests/unit/test_memory/test_task_context.py::TestMessageConverter::test_convert_delegation_request_task PASSED [ 38%]
tests/unit/test_memory/test_task_context.py::TestMessageConverter::test_convert_unknown_action PASSED [ 38%]
tests/unit/test_memory/test_task_context.py::TestMessageConverter::test_convert_tasks_to_messages PASSED [ 38%]
tests/unit/test_memory/test_task_context.py::TestMemoryContextSource::test_get_context PASSED [ 38%]
tests/unit/test_memory/test_task_context.py::TestMemoryContextSource::test_get_context_respects_max_items PASSED [ 38%]
tests/unit/test_memory/test_task_memory.py::TestLoomMemoryInit::test_init_default PASSED [ 39%]
tests/unit/test_memory/test_task_memory.py::TestLoomMemoryInit::test_init_custom_sizes PASSED [ 39%]
tests/unit/test_memory/test_task_memory.py::TestLoomMemoryInit::test_init_with_cleanup_limits PASSED [ 39%]
tests/unit/test_memory/test_task_memory.py::TestL1TaskStorage::test_add_task_to_l1 PASSED [ 39%]
tests/unit/test_memory/test_task_memory.py::TestL1TaskStorage::test_l1_circular_buffer PASSED [ 39%]
tests/unit/test_memory/test_task_memory.py::TestL1TaskStorage::test_get_l1_tasks PASSED [ 39%]
tests/unit/test_memory/test_task_memory.py::TestL2TaskStorage::test_add_task_to_l2 PASSED [ 39%]
tests/unit/test_memory/test_task_memory.py::TestL2TaskStorage::test_l2_importance_sorting PASSED [ 39%]
tests/unit/test_memory/test_task_memory.py::TestL2TaskStorage::test_l2_capacity_limit PASSED [ 39%]
tests/unit/test_memory/test_task_memory.py::TestL2TaskStorage::test_get_l2_tasks PASSED [ 39%]
tests/unit/test_memory/test_task_memory.py::TestL2TaskStorage::test_clear_l2 PASSED [ 39%]
tests/unit/test_memory/test_task_memory.py::TestL3TaskSummaries::test_get_l3_summaries PASSED [ 39%]
tests/unit/test_memory/test_task_memory.py::TestL3TaskSummaries::test_l3_capacity_limit PASSED [ 40%]
tests/unit/test_memory/test_task_memory.py::TestTaskPromotion::test_l1_to_l2_promotion PASSED [ 40%]
tests/unit/test_memory/test_task_memory.py::TestTaskPromotion::test_low_importance_not_promoted PASSED [ 40%]
tests/unit/test_memory/test_task_memory.py::TestMemoryCleanup::test_task_index_cleanup PASSED [ 40%]
tests/unit/test_memory/test_task_memory.py::TestMemoryCleanup::test_fact_index_cleanup PASSED [ 40%]
tests/unit/test_memory/test_task_memory.py::TestMemoryCleanup::test_cleanup_preserves_active_tasks PASSED [ 40%]
tests/unit/test_memory/test_task_memory.py::TestTaskRetrieval::test_get_task_by_id PASSED [ 40%]
tests/unit/test_memory/test_task_memory.py::TestTaskRetrieval::test_get_nonexistent_task PASSED [ 40%]
tests/unit/test_memory/test_task_memory.py::TestTaskRetrieval::test_simple_search_tasks PASSED [ 40%]
tests/unit/test_memory/test_task_memory.py::TestFactManagement::test_add_fact PASSED [ 40%]
tests/unit/test_memory/test_task_memory.py::TestFactManagement::test_simple_search_facts PASSED [ 40%]
tests/unit/test_memory/test_task_memory.py::TestGeneralOperations::test_get_stats PASSED [ 40%]
tests/unit/test_memory/test_task_memory.py::TestGeneralOperations::test_clear_all PASSED [ 41%]
tests/unit/test_memory/test_task_memory.py::TestEventBusSubscription::test_init_with_event_bus PASSED [ 41%]
tests/unit/test_memory/test_task_memory.py::TestEventBusSubscription::test_init_without_event_bus PASSED [ 41%]
tests/unit/test_memory/test_task_memory.py::TestEventBusSubscription::test_on_task_adds_to_l1 PASSED [ 41%]
tests/unit/test_memory/test_task_memory.py::TestEventBusSubscription::test_on_task_selective_l2_storage PASSED [ 41%]
tests/unit/test_memory/test_task_memory.py::TestEventBusSubscription::test_on_task_importance_threshold PASSED [ 41%]
tests/unit/test_memory/test_task_memory.py::TestEventBusSubscription::test_on_task_default_importance PASSED [ 41%]
tests/unit/test_memory/test_task_memory.py::TestEventBusSubscription::test_on_task_returns_original_task PASSED [ 41%]
tests/unit/test_memory/test_task_memory.py::TestEventBusSubscription::test_integration_with_event_bus PASSED [ 41%]
tests/unit/test_memory/test_task_memory.py::TestCallChain::test_get_call_chain_single_task PASSED [ 41%]
tests/unit/test_memory/test_task_memory.py::TestCallChain::test_get_call_chain_parent_child PASSED [ 41%]
tests/unit/test_memory/test_task_memory.py::TestCallChain::test_get_call_chain_multi_level PASSED [ 41%]
tests/unit/test_memory/test_task_memory.py::TestCallChain::test_get_call_chain_nonexistent_task PASSED [ 42%]
tests/unit/test_memory/test_types.py::TestMemoryTier::test_memory_tier_values PASSED [ 42%]
tests/unit/test_memory/test_types.py::TestMemoryType::test_memory_type_values PASSED [ 42%]
tests/unit/test_memory/test_types.py::TestMemoryStatus::test_memory_status_values PASSED [ 42%]
tests/unit/test_memory/test_types.py::TestMemoryUnit::test_memory_unit_creation PASSED [ 42%]
tests/unit/test_memory/test_types.py::TestMemoryUnit::test_memory_unit_with_all_fields PASSED [ 42%]
tests/unit/test_memory/test_types.py::TestMemoryUnit::test_to_message_with_message_type_string PASSED [ 42%]
tests/unit/test_memory/test_types.py::TestMemoryUnit::test_to_message_with_message_type_dict PASSED [ 42%]
tests/unit/test_memory/test_types.py::TestMemoryUnit::test_to_message_with_message_type_other PASSED [ 42%]
tests/unit/test_memory/test_types.py::TestMemoryUnit::test_to_message_with_thought_type PASSED [ 42%]
tests/unit/test_memory/test_types.py::TestMemoryUnit::test_to_message_with_tool_call_type PASSED [ 42%]
tests/unit/test_memory/test_types.py::TestMemoryUnit::test_to_message_with_tool_result_type PASSED [ 42%]
tests/unit/test_memory/test_types.py::TestMemoryUnit::test_to_message_with_plan_type PASSED [ 43%]
tests/unit/test_memory/test_types.py::TestMemoryUnit::test_to_message_with_fact_type PASSED [ 43%]
tests/unit/test_memory/test_types.py::TestMemoryUnit::test_to_message_with_summary_type PASSED [ 43%]
tests/unit/test_memory/test_types.py::TestMemoryUnit::test_to_message_with_context_type PASSED [ 43%]
tests/unit/test_memory/test_types.py::TestMemoryUnit::test_to_message_with_preformatted_message PASSED [ 43%]
tests/unit/test_memory/test_types.py::TestMemoryUnit::test_to_message_with_preformatted_message_different_role PASSED [ 43%]
tests/unit/test_memory/test_types.py::TestTaskSummary::test_task_summary_creation PASSED [ 43%]
tests/unit/test_memory/test_types.py::TestTaskSummary::test_task_summary_with_tags PASSED [ 43%]
tests/unit/test_memory/test_types.py::TestTaskSummary::test_task_summary_with_importance PASSED [ 43%]
tests/unit/test_memory/test_types.py::TestTaskSummary::test_task_summary_created_at PASSED [ 43%]
tests/unit/test_memory/test_types.py::TestFactType::test_fact_type_values PASSED [ 43%]
tests/unit/test_memory/test_types.py::TestFact::test_fact_creation PASSED [ 43%]
tests/unit/test_memory/test_types.py::TestFact::test_fact_with_source_tasks PASSED [ 44%]
tests/unit/test_memory/test_types.py::TestFact::test_fact_with_custom_confidence PASSED [ 44%]
tests/unit/test_memory/test_types.py::TestFact::test_fact_update_access PASSED [ 44%]
tests/unit/test_memory/test_types.py::TestMemoryQuery::test_memory_query_defaults PASSED [ 44%]
tests/unit/test_memory/test_types.py::TestMemoryQuery::test_memory_query_with_tier PASSED [ 44%]
tests/unit/test_memory/test_types.py::TestMemoryQuery::test_memory_query_with_type PASSED [ 44%]
tests/unit/test_memory/test_types.py::TestMemoryQuery::test_memory_query_with_limit PASSED [ 44%]
tests/unit/test_memory/test_types.py::TestMemoryQuery::test_memory_query_with_min_importance PASSED [ 44%]
tests/unit/test_memory/test_types.py::TestMemoryQuery::test_memory_query_with_all_parameters PASSED [ 44%]
tests/unit/test_memory/test_vector_store.py::TestInMemoryVectorStore::test_add PASSED [ 44%]
tests/unit/test_memory/test_vector_store.py::TestInMemoryVectorStore::test_add_without_metadata PASSED [ 44%]
tests/unit/test_memory/test_vector_store.py::TestInMemoryVectorStore::test_search_empty PASSED [ 44%]
tests/unit/test_memory/test_vector_store.py::TestInMemoryVectorStore::test_search_similar PASSED [ 45%]
tests/unit/test_memory/test_vector_store.py::TestInMemoryVectorStore::test_search_with_top_k PASSED [ 45%]
tests/unit/test_memory/test_vector_store.py::TestInMemoryVectorStore::test_search_zero_query PASSED [ 45%]
tests/unit/test_memory/test_vector_store.py::TestInMemoryVectorStore::test_search_zero_vector PASSED [ 45%]
tests/unit/test_memory/test_vector_store.py::TestInMemoryVectorStore::test_clear PASSED [ 45%]
tests/unit/test_memory/test_vector_store.py::TestInMemoryVectorStore::test_search_results_format PASSED [ 45%]
tests/unit/test_memory/test_vector_store.py::TestInMemoryVectorStore::test_search_cosine_similarity PASSED [ 45%]
tests/unit/test_memory/test_vector_store.py::TestVectorSearchResult::test_vector_search_result_init PASSED [ 45%]
tests/unit/test_memory/test_vector_store.py::TestEmbeddingProvider::test_embedding_provider_is_abstract PASSED [ 45%]
tests/unit/test_memory/test_vector_store.py::TestVectorStoreProvider::test_vector_store_provider_is_abstract PASSED [ 45%]
tests/unit/test_orchestration/test_agent.py::TestAgentInit::test_agent_init_basic PASSED [ 45%]
tests/unit/test_orchestration/test_agent.py::TestAgentInit::test_agent_init_with_system_prompt PASSED [ 45%]
tests/unit/test_orchestration/test_agent.py::TestAgentInit::test_agent_init_with_tools PASSED [ 46%]
tests/unit/test_orchestration/test_agent.py::TestAgentBuildToolList::test_build_tool_list_basic PASSED [ 46%]
tests/unit/test_orchestration/test_agent.py::TestAgentBuildToolList::test_build_tool_list_with_custom_tools PASSED [ 46%]
tests/unit/test_orchestration/test_agent_workflow.py::TestAgentWorkflow::test_init PASSED [ 46%]
tests/unit/test_orchestration/test_agent_workflow.py::TestAgentWorkflow::test_init_empty_description PASSED [ 46%]
tests/unit/test_orchestration/test_agent_workflow.py::TestAgentWorkflow::test_get_description PASSED [ 46%]
tests/unit/test_orchestration/test_agent_workflow.py::TestAgentWorkflow::test_get_description_empty PASSED [ 46%]
tests/unit/test_orchestration/test_agent_workflow.py::TestAgentWorkflow::test_execute_delegates_to_coordinator PASSED [ 46%]
tests/unit/test_orchestration/test_agent_workflow.py::TestAgentWorkflow::test_execute_with_failed_task PASSED [ 46%]
tests/unit/test_orchestration/test_agent_workflow.py::TestAgentWorkflow::test_execute_with_pending_task PASSED [ 46%]
tests/unit/test_orchestration/test_agent_workflow.py::TestAgentWorkflow::test_execute_preserves_task_attributes PASSED [ 46%]
tests/unit/test_orchestration/test_agent_workflow.py::TestAgentWorkflow::test_execute_with_coordinator_exception PASSED [ 46%]
tests/unit/test_orchestration/test_agent_workflow.py::TestAgentWorkflow::test_execute_with_complex_result PASSED [ 47%]
tests/unit/test_orchestration/test_agent_workflow.py::TestAgentWorkflow::test_execute_multiple_tasks PASSED [ 47%]
tests/unit/test_orchestration/test_agent_workflow.py::TestAgentWorkflow::test_execute_with_coordinator_returning_none PASSED [ 47%]
tests/unit/test_orchestration/test_agent_workflow.py::TestAgentWorkflow::test_get_description_updates_with_coordinator_change PASSED [ 47%]
tests/unit/test_orchestration/test_agent_workflow.py::TestAgentWorkflow::test_execute_calls_execute_task_not_execute PASSED [ 47%]
tests/unit/test_orchestration/test_base.py::TestOrchestratorBase::test_orchestrator_is_abstract PASSED [ 47%]
tests/unit/test_orchestration/test_base.py::TestOrchestratorBase::test_orchestrator_init_without_nodes PASSED [ 47%]
tests/unit/test_orchestration/test_base.py::TestOrchestratorBase::test_orchestrator_init_with_nodes PASSED [ 47%]
tests/unit/test_orchestration/test_base.py::TestOrchestratorBase::test_orchestrator_init_with_empty_list PASSED [ 47%]
tests/unit/test_orchestration/test_base.py::TestOrchestratorBase::test_orchestrator_add_node PASSED [ 47%]
tests/unit/test_orchestration/test_base.py::TestOrchestratorBase::test_orchestrator_add_multiple_nodes PASSED [ 47%]
tests/unit/test_orchestration/test_base.py::TestOrchestratorBase::test_orchestrator_remove_node_success PASSED [ 47%]
tests/unit/test_orchestration/test_base.py::TestOrchestratorBase::test_orchestrator_remove_node_not_found PASSED [ 48%]
tests/unit/test_orchestration/test_base.py::TestOrchestratorBase::test_orchestrator_remove_node_from_multiple PASSED [ 48%]
tests/unit/test_orchestration/test_base.py::TestOrchestratorBase::test_orchestrator_remove_node_preserves_order PASSED [ 48%]
tests/unit/test_orchestration/test_base.py::TestOrchestratorBase::test_orchestrator_orchestrate_implementation PASSED [ 48%]
tests/unit/test_orchestration/test_crew.py::TestCrewOrchestratorInit::test_init_without_nodes PASSED [ 48%]
tests/unit/test_orchestration/test_crew.py::TestCrewOrchestratorInit::test_init_with_nodes PASSED [ 48%]
tests/unit/test_orchestration/test_crew.py::TestCrewOrchestratorNodeManagement::test_add_node PASSED [ 48%]
tests/unit/test_orchestration/test_crew.py::TestCrewOrchestratorNodeManagement::test_add_multiple_nodes PASSED [ 48%]
tests/unit/test_orchestration/test_crew.py::TestCrewOrchestratorNodeManagement::test_remove_node_success PASSED [ 48%]
tests/unit/test_orchestration/test_crew.py::TestCrewOrchestratorNodeManagement::test_remove_node_not_found PASSED [ 48%]
tests/unit/test_orchestration/test_crew.py::TestCrewOrchestratorNodeManagement::test_remove_node_from_multiple PASSED [ 48%]
tests/unit/test_orchestration/test_crew.py::TestCrewOrchestratorOrchestrate::test_orchestrate_no_nodes PASSED [ 48%]
tests/unit/test_orchestration/test_crew.py::TestCrewOrchestratorOrchestrate::test_orchestrate_single_node_success PASSED [ 49%]
tests/unit/test_orchestration/test_crew.py::TestCrewOrchestratorOrchestrate::test_orchestrate_multiple_nodes_success PASSED [ 49%]
tests/unit/test_orchestration/test_crew.py::TestCrewOrchestratorOrchestrate::test_orchestrate_node_raises_exception PASSED [ 49%]
tests/unit/test_orchestration/test_crew.py::TestCrewOrchestratorOrchestrate::test_orchestrate_mixed_success_and_failure PASSED [ 49%]
tests/unit/test_orchestration/test_crew.py::TestCrewOrchestratorAggregateResults::test_aggregate_empty_results PASSED [ 49%]
tests/unit/test_orchestration/test_crew.py::TestCrewOrchestratorAggregateResults::test_aggregate_only_tasks PASSED [ 49%]
tests/unit/test_orchestration/test_crew.py::TestCrewOrchestratorAggregateResults::test_aggregate_only_exceptions PASSED [ 49%]
tests/unit/test_orchestration/test_crew.py::TestCrewOrchestratorAggregateResults::test_aggregate_mixed_tasks_and_exceptions PASSED [ 49%]
tests/unit/test_orchestration/test_crew.py::TestCrewOrchestratorAggregateResults::test_aggregate_with_none_results PASSED [ 49%]
tests/unit/test_orchestration/test_crew.py::TestCrewOrchestratorAggregateResults::test_orchestrate_aggregate_raises_exception PASSED [ 49%]
tests/unit/test_orchestration/test_router.py::TestRouterOrchestratorInit::test_init_without_nodes PASSED [ 49%]
tests/unit/test_orchestration/test_router.py::TestRouterOrchestratorInit::test_init_with_nodes PASSED [ 50%]
tests/unit/test_orchestration/test_router.py::TestRouterOrchestratorOrchestrate::test_orchestrate_no_nodes PASSED [ 50%]
tests/unit/test_orchestration/test_router.py::TestRouterOrchestratorOrchestrate::test_orchestrate_with_node_success PASSED [ 50%]
tests/unit/test_orchestration/test_router.py::TestRouterOrchestratorOrchestrate::test_orchestrate_node_execution_error PASSED [ 50%]
tests/unit/test_orchestration/test_router.py::TestRouterOrchestratorNodeSelection::test_select_node_no_nodes PASSED [ 50%]
tests/unit/test_orchestration/test_router.py::TestRouterOrchestratorNodeSelection::test_select_node_tool_use_capability PASSED [ 50%]
tests/unit/test_orchestration/test_router.py::TestRouterOrchestratorNodeSelection::test_select_node_planning_capability PASSED [ 50%]
tests/unit/test_orchestration/test_router.py::TestRouterOrchestratorNodeSelection::test_select_node_reflection_capability PASSED [ 50%]
tests/unit/test_orchestration/test_router.py::TestRouterOrchestratorNodeSelection::test_select_node_multi_agent_capability PASSED [ 50%]
tests/unit/test_orchestration/test_router.py::TestRouterOrchestratorNodeSelection::test_select_node_fallback_strategy PASSED [ 50%]
tests/unit/test_orchestration/test_router.py::TestRouterOrchestratorNodeSelection::test_select_node_no_capabilities_method PASSED [ 50%]
tests/unit/test_orchestration/test_sequential_workflow.py::TestSequentialWorkflow::test_init PASSED [ 50%]
tests/unit/test_orchestration/test_sequential_workflow.py::TestSequentialWorkflow::test_init_empty_description PASSED [ 51%]
tests/unit/test_orchestration/test_sequential_workflow.py::TestSequentialWorkflow::test_get_description PASSED [ 51%]
tests/unit/test_orchestration/test_sequential_workflow.py::TestSequentialWorkflow::test_get_description_empty PASSED [ 51%]
tests/unit/test_orchestration/test_sequential_workflow.py::TestSequentialWorkflow::test_get_description_multiple_steps PASSED [ 51%]
tests/unit/test_orchestration/test_sequential_workflow.py::TestSequentialWorkflow::test_execute_success PASSED [ 51%]
tests/unit/test_orchestration/test_sequential_workflow.py::TestSequentialWorkflow::test_execute_with_results_accumulation PASSED [ 51%]
tests/unit/test_orchestration/test_sequential_workflow.py::TestSequentialWorkflow::test_execute_step_failure PASSED [ 51%]
tests/unit/test_orchestration/test_sequential_workflow.py::TestSequentialWorkflow::test_execute_first_step_failure PASSED [ 51%]
tests/unit/test_orchestration/test_sequential_workflow.py::TestSequentialWorkflow::test_execute_last_step_failure PASSED [ 51%]
tests/unit/test_orchestration/test_sequential_workflow.py::TestSequentialWorkflow::test_execute_empty_steps PASSED [ 51%]
tests/unit/test_orchestration/test_sequential_workflow.py::TestSequentialWorkflow::test_execute_single_step PASSED [ 51%]
tests/unit/test_orchestration/test_sequential_workflow.py::TestSequentialWorkflow::test_execute_with_task_access PASSED [ 51%]
tests/unit/test_orchestration/test_sequential_workflow.py::TestSequentialWorkflow::test_execute_exception_in_step PASSED [ 52%]
tests/unit/test_orchestration/test_sequential_workflow.py::TestSequentialWorkflow::test_execute_preserves_task_attributes PASSED [ 52%]
tests/unit/test_orchestration/test_sequential_workflow.py::TestSequentialWorkflow::test_execute_with_none_results PASSED [ 52%]
tests/unit/test_orchestration/test_sequential_workflow.py::TestSequentialWorkflow::test_execute_with_complex_results PASSED [ 52%]
tests/unit/test_orchestration/test_workflow.py::TestWorkflow::test_workflow_is_abstract PASSED [ 52%]
tests/unit/test_orchestration/test_workflow.py::TestWorkflow::test_workflow_init_subclass PASSED [ 52%]
tests/unit/test_orchestration/test_workflow.py::TestWorkflow::test_workflow_get_description PASSED [ 52%]
tests/unit/test_orchestration/test_workflow.py::TestWorkflow::test_workflow_execute PASSED [ 52%]
tests/unit/test_orchestration/test_workflow.py::TestWorkflow::test_workflow_with_empty_description PASSED [ 52%]
tests/unit/test_orchestration/test_workflow.py::TestWorkflow::test_workflow_with_long_id PASSED [ 52%]
tests/unit/test_orchestration/test_workflow.py::TestWorkflow::test_workflow_with_special_characters_in_id PASSED [ 52%]
tests/unit/test_protocol/test_agent_card.py::TestAgentCapability::test_reflection_value PASSED [ 52%]
tests/unit/test_protocol/test_agent_card.py::TestAgentCapability::test_tool_use_value PASSED [ 53%]
tests/unit/test_protocol/test_agent_card.py::TestAgentCapability::test_planning_value PASSED [ 53%]
tests/unit/test_protocol/test_agent_card.py::TestAgentCapability::test_multi_agent_value PASSED [ 53%]
tests/unit/test_protocol/test_agent_card.py::TestAgentCapability::test_agent_capability_is_string_enum PASSED [ 53%]
tests/unit/test_protocol/test_agent_card.py::TestAgentCard::test_agent_card_creation PASSED [ 53%]
tests/unit/test_protocol/test_agent_card.py::TestAgentCard::test_agent_card_with_version PASSED [ 53%]
tests/unit/test_protocol/test_agent_card.py::TestAgentCard::test_agent_card_with_capabilities PASSED [ 53%]
tests/unit/test_protocol/test_agent_card.py::TestAgentCard::test_agent_card_with_metadata PASSED [ 53%]
tests/unit/test_protocol/test_agent_card.py::TestAgentCard::test_agent_card_all_fields PASSED [ 53%]
tests/unit/test_protocol/test_agent_card.py::TestAgentCard::test_to_dict PASSED [ 53%]
tests/unit/test_protocol/test_agent_card.py::TestAgentCard::test_to_dict_with_default_values PASSED [ 53%]
tests/unit/test_protocol/test_agent_card.py::TestAgentCard::test_to_dict_with_multiple_capabilities PASSED [ 53%]
tests/unit/test_protocol/test_agent_card.py::TestAgentCard::test_from_dict PASSED [ 54%]
tests/unit/test_protocol/test_agent_card.py::TestAgentCard::test_from_dict_with_minimal_fields PASSED [ 54%]
tests/unit/test_protocol/test_agent_card.py::TestAgentCard::test_from_dict_without_capabilities PASSED [ 54%]
tests/unit/test_protocol/test_agent_card.py::TestAgentCard::test_from_dict_without_metadata PASSED [ 54%]
tests/unit/test_protocol/test_agent_card.py::TestAgentCard::test_from_dict_preserves_extra_fields PASSED [ 54%]
tests/unit/test_protocol/test_node.py::TestNodeProtocol::test_node_protocol_attributes PASSED [ 54%]
tests/unit/test_protocol/test_node.py::TestNodeProtocol::test_execute_task PASSED [ 54%]
tests/unit/test_protocol/test_node.py::TestNodeProtocol::test_execute_task_preserves_task_id PASSED [ 54%]
tests/unit/test_protocol/test_node.py::TestNodeProtocol::test_get_capabilities PASSED [ 54%]
tests/unit/test_protocol/test_node.py::TestNodeProtocol::test_get_capabilities_returns_same_card PASSED [ 54%]
tests/unit/test_protocol/test_node.py::TestNodeProtocol::test_node_protocol_with_multiple_capabilities PASSED [ 54%]
tests/unit/test_protocol/test_node.py::TestNodeProtocol::test_execute_task_with_error PASSED [ 54%]
tests/unit/test_protocol/test_streaming.py::TestStreamingMixin::test_stream_text_basic PASSED [ 55%]
tests/unit/test_protocol/test_streaming.py::TestStreamingMixin::test_stream_text_with_metadata PASSED [ 55%]
tests/unit/test_protocol/test_streaming.py::TestStreamingMixin::test_stream_tool_call_start PASSED [ 55%]
tests/unit/test_protocol/test_streaming.py::TestStreamingMixin::test_stream_tool_call_complete PASSED [ 55%]
tests/unit/test_protocol/test_streaming.py::TestStreamingMixin::test_stream_error PASSED [ 55%]
tests/unit/test_protocol/test_streaming.py::TestStreamingMixin::test_stream_done_basic PASSED [ 55%]
tests/unit/test_protocol/test_streaming.py::TestStreamingMixin::test_stream_done_with_token_usage PASSED [ 55%]
tests/unit/test_protocol/test_streaming.py::TestStreamingMixinWithEventBus::test_stream_text_with_event_bus PASSED [ 55%]
tests/unit/test_protocol/test_streaming.py::TestStreamingMixinWithEventBus::test_stream_tool_call_start_with_event_bus PASSED [ 55%]
tests/unit/test_protocol/test_streaming.py::TestStreamingMixinWithEventBus::test_stream_tool_call_complete_with_event_bus PASSED [ 55%]
tests/unit/test_protocol/test_streaming.py::TestStreamingMixinWithEventBus::test_stream_error_with_event_bus PASSED [ 55%]
tests/unit/test_protocol/test_streaming.py::TestStreamingMixinWithEventBus::test_stream_done_with_token_usage_and_event_bus PASSED [ 55%]
tests/unit/test_providers/test_base.py::TestProvider::test_provider_is_abstract PASSED [ 56%]
tests/unit/test_providers/test_base.py::TestProvider::test_provider_init_with_config PASSED [ 56%]
tests/unit/test_providers/test_base.py::TestProvider::test_provider_init_without_config PASSED [ 56%]
tests/unit/test_providers/test_base.py::TestProvider::test_provider_init_with_none_config PASSED [ 56%]
tests/unit/test_providers/test_base.py::TestProvider::test_provider_initialize_implementation PASSED [ 56%]
tests/unit/test_providers/test_base.py::TestProvider::test_provider_close_implementation PASSED [ 56%]
tests/unit/test_providers/test_base.py::TestProvider::test_provider_full_lifecycle PASSED [ 56%]
tests/unit/test_providers/test_base.py::TestProvider::test_provider_config_mutation PASSED [ 56%]
tests/unit/test_providers/test_knowledge_graph.py::TestGraphKnowledgeBaseInit::test_init_default PASSED [ 56%]
tests/unit/test_providers/test_knowledge_graph.py::TestGraphKnowledgeBaseInit::test_init_custom PASSED [ 56%]
tests/unit/test_providers/test_knowledge_graph.py::TestQuery::test_query_basic PASSED [ 56%]
tests/unit/test_providers/test_knowledge_graph.py::TestQuery::test_query_empty_results PASSED [ 56%]
tests/unit/test_providers/test_knowledge_graph.py::TestGetById::test_get_by_id_always_none PASSED [ 57%]
tests/unit/test_providers/test_knowledge_memory.py::TestInMemoryKnowledgeBaseInit::test_init PASSED [ 57%]
tests/unit/test_providers/test_knowledge_memory.py::TestAddItem::test_add_item_single PASSED [ 57%]
tests/unit/test_providers/test_knowledge_memory.py::TestAddItem::test_add_item_multiple PASSED [ 57%]
tests/unit/test_providers/test_knowledge_memory.py::TestQuery::test_query_match PASSED [ 57%]
tests/unit/test_providers/test_knowledge_memory.py::TestQuery::test_query_no_match PASSED [ 57%]
tests/unit/test_providers/test_knowledge_memory.py::TestQuery::test_query_with_limit PASSED [ 57%]
tests/unit/test_providers/test_knowledge_memory.py::TestGetById::test_get_by_id_exists PASSED [ 57%]
tests/unit/test_providers/test_knowledge_memory.py::TestGetById::test_get_by_id_not_exists PASSED [ 57%]
tests/unit/test_providers/test_knowledge_vector.py::TestVectorKnowledgeBaseInit::test_init PASSED [ 57%]
tests/unit/test_providers/test_knowledge_vector.py::TestAddItem::test_add_item PASSED [ 57%]
tests/unit/test_providers/test_knowledge_vector.py::TestQuery::test_query_with_results PASSED [ 57%]
tests/unit/test_providers/test_knowledge_vector.py::TestQuery::test_query_empty_results PASSED [ 58%]
tests/unit/test_providers/test_knowledge_vector.py::TestGetById::test_get_by_id_exists PASSED [ 58%]
tests/unit/test_providers/test_knowledge_vector.py::TestGetById::test_get_by_id_not_exists PASSED [ 58%]
tests/unit/test_providers/test_mcp_http_client.py::TestHttpMCPClientInit::test_init_success PASSED [ 58%]
tests/unit/test_providers/test_mcp_http_client.py::TestHttpMCPClientInit::test_init_without_httpx PASSED [ 58%]
tests/unit/test_providers/test_mcp_http_client.py::TestHttpMCPClientInit::test_init_strips_trailing_slash PASSED [ 58%]
tests/unit/test_providers/test_mcp_http_client.py::TestHttpMCPClientConnect::test_connect_success PASSED [ 58%]
tests/unit/test_providers/test_mcp_http_client.py::TestHttpMCPClientConnect::test_connect_already_connected PASSED [ 58%]
tests/unit/test_providers/test_mcp_http_client.py::TestHttpMCPClientConnect::test_connect_failure PASSED [ 58%]
tests/unit/test_providers/test_mcp_http_client.py::TestHttpMCPClientDisconnect::test_disconnect_success PASSED [ 58%]
tests/unit/test_providers/test_mcp_http_client.py::TestHttpMCPClientDisconnect::test_disconnect_not_connected PASSED [ 58%]
tests/unit/test_providers/test_mcp_http_client.py::TestHttpMCPClientListTools::test_list_tools_success PASSED [ 58%]
tests/unit/test_providers/test_mcp_http_client.py::TestHttpMCPClientListTools::test_list_tools_not_connected PASSED [ 59%]
tests/unit/test_providers/test_mcp_http_client.py::TestHttpMCPClientCallTool::test_call_tool_success PASSED [ 59%]
tests/unit/test_providers/test_mcp_http_client.py::TestHttpMCPClientCallTool::test_call_tool_not_connected PASSED [ 59%]
tests/unit/test_providers/test_mcp_http_client.py::TestHttpMCPClientListResources::test_list_resources_success PASSED [ 59%]
tests/unit/test_providers/test_mcp_http_client.py::TestHttpMCPClientListResources::test_list_resources_not_connected PASSED [ 59%]
tests/unit/test_providers/test_mcp_http_client.py::TestHttpMCPClientReadResource::test_read_resource_success PASSED [ 59%]
tests/unit/test_providers/test_mcp_http_client.py::TestHttpMCPClientReadResource::test_read_resource_empty PASSED [ 59%]
tests/unit/test_providers/test_mcp_http_client.py::TestHttpMCPClientReadResource::test_read_resource_non_dict_content PASSED [ 59%]
tests/unit/test_providers/test_mcp_http_client.py::TestHttpMCPClientReadResource::test_read_resource_not_connected PASSED [ 59%]
tests/unit/test_providers/test_mcp_http_client.py::TestHttpMCPClientListPrompts::test_list_prompts_success PASSED [ 59%]
tests/unit/test_providers/test_mcp_http_client.py::TestHttpMCPClientListPrompts::test_list_prompts_not_connected PASSED [ 59%]
tests/unit/test_providers/test_mcp_http_client.py::TestHttpMCPClientGetPrompt::test_get_prompt_success PASSED [ 59%]
tests/unit/test_providers/test_mcp_http_client.py::TestHttpMCPClientGetPrompt::test_get_prompt_empty PASSED [ 60%]
tests/unit/test_providers/test_mcp_http_client.py::TestHttpMCPClientGetPrompt::test_get_prompt_not_connected PASSED [ 60%]
tests/unit/test_providers/test_mcp_http_client.py::TestHttpMCPClientSendRequest::test_send_request_success PASSED [ 60%]
tests/unit/test_providers/test_mcp_http_client.py::TestHttpMCPClientSendRequest::test_send_request_with_error PASSED [ 60%]
tests/unit/test_providers/test_mcp_http_client.py::TestHttpMCPClientSendRequest::test_send_request_with_string_error PASSED [ 60%]
tests/unit/test_providers/test_mcp_http_client.py::TestHttpMCPClientSendRequest::test_send_request_no_client PASSED [ 60%]
tests/unit/test_providers/test_mcp_http_client.py::TestHttpMCPClientSendRequest::test_send_request_non_dict_result PASSED [ 60%]
tests/unit/test_providers/test_mcp_stdio_client.py::TestStdioMCPClientInit::test_init_success PASSED [ 60%]
tests/unit/test_providers/test_mcp_stdio_client.py::TestStdioMCPClientInit::test_init_without_args PASSED [ 60%]
tests/unit/test_providers/test_mcp_stdio_client.py::TestStdioMCPClientConnect::test_connect_success PASSED [ 60%]
tests/unit/test_providers/test_mcp_stdio_client.py::TestStdioMCPClientConnect::test_connect_already_connected PASSED [ 60%]
tests/unit/test_providers/test_mcp_stdio_client.py::TestStdioMCPClientConnect::test_connect_failure PASSED [ 60%]
tests/unit/test_providers/test_mcp_stdio_client.py::TestStdioMCPClientDisconnect::test_disconnect_success PASSED [ 61%]
tests/unit/test_providers/test_mcp_stdio_client.py::TestStdioMCPClientDisconnect::test_disconnect_not_connected PASSED [ 61%]
tests/unit/test_providers/test_mcp_stdio_client.py::TestStdioMCPClientListTools::test_list_tools_success PASSED [ 61%]
tests/unit/test_providers/test_mcp_stdio_client.py::TestStdioMCPClientListTools::test_list_tools_not_connected PASSED [ 61%]
tests/unit/test_providers/test_mcp_stdio_client.py::TestStdioMCPClientCallTool::test_call_tool_success PASSED [ 61%]
tests/unit/test_providers/test_mcp_stdio_client.py::TestStdioMCPClientCallTool::test_call_tool_not_connected PASSED [ 61%]
tests/unit/test_providers/test_mcp_stdio_client.py::TestStdioMCPClientListResources::test_list_resources_success PASSED [ 61%]
tests/unit/test_providers/test_mcp_stdio_client.py::TestStdioMCPClientListResources::test_list_resources_not_connected PASSED [ 61%]
tests/unit/test_providers/test_mcp_stdio_client.py::TestStdioMCPClientReadResource::test_read_resource_success PASSED [ 61%]
tests/unit/test_providers/test_mcp_stdio_client.py::TestStdioMCPClientReadResource::test_read_resource_not_connected PASSED [ 61%]
tests/unit/test_providers/test_mcp_stdio_client.py::TestStdioMCPClientSendRequest::test_send_request_success PASSED [ 61%]
tests/unit/test_providers/test_mcp_stdio_client.py::TestStdioMCPClientSendRequest::test_send_request_no_process PASSED [ 61%]
tests/unit/test_providers/test_mcp_stdio_client.py::TestStdioMCPClientSendRequest::test_send_request_no_response PASSED [ 62%]
tests/unit/test_providers/test_mcp_stdio_client.py::TestStdioMCPClientSendRequest::test_send_request_with_error PASSED [ 62%]
tests/unit/test_providers/test_mcp_stdio_client.py::TestStdioMCPClientSendNotification::test_send_notification_success PASSED [ 62%]
tests/unit/test_providers/test_mcp_stdio_client.py::TestStdioMCPClientSendNotification::test_send_notification_no_process PASSED [ 62%]
tests/unit/test_providers/test_embedding/test_openai_embedding.py::TestOpenAIEmbeddingProvider::test_init_with_api_key PASSED [ 62%]
tests/unit/test_providers/test_embedding/test_openai_embedding.py::TestOpenAIEmbeddingProvider::test_init_with_custom_model PASSED [ 62%]
tests/unit/test_providers/test_embedding/test_openai_embedding.py::TestOpenAIEmbeddingProvider::test_init_with_base_url PASSED [ 62%]
tests/unit/test_providers/test_embedding/test_openai_embedding.py::TestOpenAIEmbeddingProvider::test_init_with_timeout PASSED [ 62%]
tests/unit/test_providers/test_embedding/test_openai_embedding.py::TestOpenAIEmbeddingProvider::test_init_with_extra_kwargs PASSED [ 62%]
tests/unit/test_providers/test_embedding/test_openai_embedding.py::TestOpenAIEmbeddingProvider::test_init_reads_api_key_from_env PASSED [ 62%]
tests/unit/test_providers/test_embedding/test_openai_embedding.py::TestOpenAIEmbeddingProvider::test_embed_single_text PASSED [ 62%]
tests/unit/test_providers/test_embedding/test_openai_embedding.py::TestOpenAIEmbeddingProvider::test_embed_with_custom_model PASSED [ 62%]
tests/unit/test_providers/test_embedding/test_openai_embedding.py::TestOpenAIEmbeddingProvider::test_embed_batch PASSED [ 63%]
tests/unit/test_providers/test_embedding/test_openai_embedding.py::TestOpenAIEmbeddingProvider::test_embed_batch_single_item PASSED [ 63%]
tests/unit/test_providers/test_embedding/test_openai_embedding.py::TestOpenAIEmbeddingProvider::test_embed_empty_text PASSED [ 63%]
tests/unit/test_providers/test_embedding/test_openai_embedding.py::TestOpenAIEmbeddingProvider::test_embed_batch_empty_list PASSED [ 63%]
tests/unit/test_providers/test_embedding/test_openai_embedding.py::TestOpenAIEmbeddingProvider::test_import_error_when_openai_not_installed PASSED [ 63%]
tests/unit/test_providers/test_llm/test_base_handler.py::TestToolCallAggregatorInit::test_init PASSED [ 63%]
tests/unit/test_providers/test_llm/test_base_handler.py::TestToolCallAggregatorAddChunk::test_add_chunk_first_call PASSED [ 63%]
tests/unit/test_providers/test_llm/test_base_handler.py::TestToolCallAggregatorAddChunk::test_add_chunk_subsequent_calls PASSED [ 63%]
tests/unit/test_providers/test_llm/test_base_handler.py::TestToolCallAggregatorAddChunk::test_add_chunk_multiple_indices PASSED [ 63%]
tests/unit/test_providers/test_llm/test_base_handler.py::TestToolCallAggregatorGetCompleteCalls::test_get_complete_calls_valid_json PASSED [ 63%]
tests/unit/test_providers/test_llm/test_base_handler.py::TestToolCallAggregatorGetCompleteCalls::test_get_complete_calls_invalid_json PASSED [ 63%]
tests/unit/test_providers/test_llm/test_base_handler.py::TestToolCallAggregatorGetCompleteCalls::test_get_complete_calls_incomplete PASSED [ 63%]
tests/unit/test_providers/test_llm/test_base_handler.py::TestToolCallAggregatorClear::test_clear PASSED [ 64%]
tests/unit/test_providers/test_llm/test_base_handler.py::TestBaseResponseHandler::test_init PASSED [ 64%]
tests/unit/test_providers/test_llm/test_base_handler.py::TestBaseResponseHandler::test_create_error_chunk PASSED [ 64%]
tests/unit/test_providers/test_llm/test_base_handler.py::TestBaseResponseHandler::test_create_error_chunk_with_context PASSED [ 64%]
tests/unit/test_providers/test_llm/test_base_handler.py::TestBaseResponseHandler::test_create_done_chunk PASSED [ 64%]
tests/unit/test_providers/test_llm/test_base_handler.py::TestBaseResponseHandler::test_create_done_chunk_with_token_usage PASSED [ 64%]
tests/unit/test_providers/test_llm/test_custom.py::TestCustomProviderAttributes::test_provider_name_attribute PASSED [ 64%]
tests/unit/test_providers/test_llm/test_custom.py::TestCustomProviderAttributes::test_default_base_url_attribute PASSED [ 64%]
tests/unit/test_providers/test_llm/test_custom.py::TestCustomProviderAttributes::test_default_model_attribute PASSED [ 64%]
tests/unit/test_providers/test_llm/test_custom.py::TestCustomProviderAttributes::test_api_key_env_var_attribute PASSED [ 64%]
tests/unit/test_providers/test_llm/test_custom.py::TestCustomProviderAttributes::test_custom_provider_inherits_from_openai_compatible PASSED [ 64%]
tests/unit/test_providers/test_llm/test_interface.py::TestLLMResponse::test_create_minimal PASSED [ 64%]
tests/unit/test_providers/test_llm/test_interface.py::TestLLMResponse::test_create_with_tool_calls PASSED [ 65%]
tests/unit/test_providers/test_llm/test_interface.py::TestLLMResponse::test_create_with_token_usage PASSED [ 65%]
tests/unit/test_providers/test_llm/test_interface.py::TestStreamChunk::test_create_text_chunk PASSED [ 65%]
tests/unit/test_providers/test_llm/test_interface.py::TestStreamChunk::test_create_tool_call_start_chunk PASSED [ 65%]
tests/unit/test_providers/test_llm/test_interface.py::TestStreamChunk::test_create_chunk_with_metadata PASSED [ 65%]
tests/unit/test_providers/test_llm/test_interface.py::TestLLMProvider::test_get_token_counter PASSED [ 65%]
tests/unit/test_providers/test_llm/test_mock.py::TestMockLLMProviderChat::test_chat_normal_message PASSED [ 65%]
tests/unit/test_providers/test_llm/test_mock.py::TestMockLLMProviderChat::test_chat_with_search_keyword PASSED [ 65%]
tests/unit/test_providers/test_llm/test_mock.py::TestMockLLMProviderStreamChat::test_stream_chat_normal_message PASSED [ 65%]
tests/unit/test_providers/test_llm/test_mock.py::TestMockLLMProviderStreamChat::test_stream_chat_with_search_keyword PASSED [ 65%]
tests/unit/test_providers/test_llm/test_mock.py::TestMockLLMProviderStreamChat::test_stream_chat_with_calculate_keyword PASSED [ 65%]
tests/unit/test_providers/test_llm/test_openai.py::TestOpenAIProviderInit::test_init_with_api_key PASSED [ 65%]
tests/unit/test_providers/test_llm/test_openai.py::TestOpenAIProviderInit::test_init_with_custom_parameters PASSED [ 66%]
tests/unit/test_providers/test_llm/test_openai.py::TestOpenAIProviderInit::test_init_with_env_api_key PASSED [ 66%]
tests/unit/test_providers/test_llm/test_openai.py::TestOpenAIProviderGetTokenCounter::test_get_token_counter PASSED [ 66%]
tests/unit/test_providers/test_llm/test_openai.py::TestOpenAIProviderConvertTools::test_convert_tools_openai_format PASSED [ 66%]
tests/unit/test_providers/test_llm/test_openai.py::TestOpenAIProviderConvertTools::test_convert_tools_mcp_format PASSED [ 66%]
tests/unit/test_providers/test_llm/test_openai.py::TestOpenAIProviderChat::test_chat_basic_message PASSED [ 66%]
tests/unit/test_providers/test_llm/test_openai.py::TestOpenAIProviderChat::test_chat_with_tool_calls PASSED [ 66%]
tests/unit/test_providers/test_llm/test_openai.py::TestOpenAIProviderChat::test_chat_with_custom_parameters PASSED [ 66%]
tests/unit/test_providers/test_llm/test_openai.py::TestOpenAIProviderStreamChat::test_stream_chat_basic PASSED [ 66%]
tests/unit/test_providers/test_llm/test_openai.py::TestOpenAIProviderStreamChat::test_stream_chat_with_tool_calls PASSED [ 66%]
tests/unit/test_providers/test_llm/test_openai.py::TestOpenAIProviderStreamChat::test_stream_chat_error_handling PASSED [ 66%]
tests/unit/test_providers/test_llm/test_openai.py::TestOpenAIProviderStreamChat::test_stream_chat_usage_only_chunk PASSED [ 67%]
tests/unit/test_providers/test_llm/test_openai.py::TestOpenAIProviderStreamResponse::test_stream_response_basic PASSED [ 67%]
tests/unit/test_providers/test_llm/test_openai.py::TestOpenAIProviderStreamResponse::test_stream_response_with_tool_calls PASSED [ 67%]
tests/unit/test_providers/test_llm/test_retry_handler.py::TestRetryConfig::test_init_default PASSED [ 67%]
tests/unit/test_providers/test_llm/test_retry_handler.py::TestRetryConfig::test_init_custom PASSED [ 67%]
tests/unit/test_providers/test_llm/test_retry_handler.py::TestCalculateDelay::test_calculate_delay_first_attempt PASSED [ 67%]
tests/unit/test_providers/test_llm/test_retry_handler.py::TestCalculateDelay::test_calculate_delay_exponential_backoff PASSED [ 67%]
tests/unit/test_providers/test_llm/test_retry_handler.py::TestCalculateDelay::test_calculate_delay_max_limit PASSED [ 67%]
tests/unit/test_providers/test_llm/test_retry_handler.py::TestShouldRetry::test_should_retry_timeout_error PASSED [ 67%]
tests/unit/test_providers/test_llm/test_retry_handler.py::TestShouldRetry::test_should_not_retry_timeout_when_disabled PASSED [ 67%]
tests/unit/test_providers/test_llm/test_retry_handler.py::TestShouldRetry::test_should_not_retry_generic_error PASSED [ 67%]
tests/unit/test_providers/test_llm/test_retry_handler.py::TestRetryAsync::test_retry_async_success_first_attempt PASSED [ 67%]
tests/unit/test_providers/test_llm/test_retry_handler.py::TestRetryAsync::test_retry_async_success_after_retries PASSED [ 68%]
tests/unit/test_providers/test_llm/test_retry_handler.py::TestRetryAsync::test_retry_async_max_retries_exceeded PASSED [ 68%]
tests/unit/test_providers/test_llm/test_retry_handler.py::TestRetryAsync::test_retry_async_non_retryable_error PASSED [ 68%]
tests/unit/test_runtime/test_dispatcher_interceptor.py::TestDispatcherInit::test_init PASSED [ 68%]
tests/unit/test_runtime/test_dispatcher_interceptor.py::TestDispatcherNodeManagement::test_register_node PASSED [ 68%]
tests/unit/test_runtime/test_dispatcher_interceptor.py::TestDispatcherNodeManagement::test_register_multiple_nodes PASSED [ 68%]
tests/unit/test_runtime/test_dispatcher_interceptor.py::TestDispatcherNodeManagement::test_unregister_node_success PASSED [ 68%]
tests/unit/test_runtime/test_dispatcher_interceptor.py::TestDispatcherNodeManagement::test_unregister_node_not_found PASSED [ 68%]
tests/unit/test_runtime/test_dispatcher_interceptor.py::TestDispatcherDispatch::test_dispatch_to_registered_node PASSED [ 68%]
tests/unit/test_runtime/test_dispatcher_interceptor.py::TestDispatcherDispatch::test_dispatch_to_event_bus PASSED [ 68%]
tests/unit/test_runtime/test_dispatcher_interceptor.py::TestInterceptor::test_before_default PASSED [ 68%]
tests/unit/test_runtime/test_dispatcher_interceptor.py::TestInterceptor::test_after_default PASSED [ 68%]
tests/unit/test_runtime/test_dispatcher_interceptor.py::TestInterceptorChain::test_init PASSED [ 69%]
tests/unit/test_runtime/test_dispatcher_interceptor.py::TestInterceptorChain::test_add_interceptor PASSED [ 69%]
tests/unit/test_runtime/test_dispatcher_interceptor.py::TestInterceptorChain::test_add_multiple_interceptors PASSED [ 69%]
tests/unit/test_runtime/test_dispatcher_interceptor.py::TestInterceptorChain::test_execute_no_interceptors PASSED [ 69%]
tests/unit/test_runtime/test_dispatcher_interceptor.py::TestInterceptorChain::test_execute_with_interceptors PASSED [ 69%]
tests/unit/test_runtime/test_dispatcher_interceptor.py::TestInterceptorChain::test_execute_order PASSED [ 69%]
tests/unit/test_runtime/test_state_store.py::TestStateStoreABC::test_state_store_is_abstract PASSED [ 69%]
tests/unit/test_runtime/test_state_store.py::TestMemoryStateStoreInit::test_init PASSED [ 69%]
tests/unit/test_runtime/test_state_store.py::TestMemoryStateStoreSet::test_save_new_key PASSED [ 69%]
tests/unit/test_runtime/test_state_store.py::TestMemoryStateStoreSet::test_save_existing_key_overwrites PASSED [ 69%]
tests/unit/test_runtime/test_state_store.py::TestMemoryStateStoreSet::test_save_multiple_keys PASSED [ 69%]
tests/unit/test_runtime/test_state_store.py::TestMemoryStateStoreGet::test_get_existing_key PASSED [ 69%]
tests/unit/test_runtime/test_state_store.py::TestMemoryStateStoreGet::test_get_nonexistent_key PASSED [ 70%]
tests/unit/test_runtime/test_state_store.py::TestMemoryStateStoreDelete::test_delete_existing_key PASSED [ 70%]
tests/unit/test_runtime/test_state_store.py::TestMemoryStateStoreDelete::test_delete_nonexistent_key_no_error PASSED [ 70%]
tests/unit/test_runtime/test_state_store.py::TestMemoryStateStoreListKeys::test_list_keys_empty_store PASSED [ 70%]
tests/unit/test_runtime/test_state_store.py::TestMemoryStateStoreListKeys::test_list_keys_with_data PASSED [ 70%]
tests/unit/test_runtime/test_state_store.py::TestMemoryStateStoreClear::test_clear_empty_store PASSED [ 70%]
tests/unit/test_runtime/test_state_store.py::TestMemoryStateStoreClear::test_clear_with_data PASSED [ 70%]
tests/unit/test_runtime/test_state_store.py::TestMemoryStateStoreClear::test_clear_then_add_new_data PASSED [ 70%]
tests/unit/test_skills/test_activator.py::TestSkillActivator::test_init PASSED [ 70%]
tests/unit/test_skills/test_activator.py::TestSkillActivator::test_find_relevant_skills_empty_metadata PASSED [ 70%]
tests/unit/test_skills/test_activator.py::TestSkillActivator::test_find_relevant_skills_none_response PASSED [ 70%]
tests/unit/test_skills/test_activator.py::TestSkillActivator::test_find_relevant_skills_single_skill PASSED [ 70%]
tests/unit/test_skills/test_activator.py::TestSkillActivator::test_find_relevant_skills_multiple_skills PASSED [ 71%]
tests/unit/test_skills/test_activator.py::TestSkillActivator::test_find_relevant_skills_custom_max PASSED [ 71%]
tests/unit/test_skills/test_activator.py::TestSkillActivator::test_find_relevant_skills_with_spaces PASSED [ 71%]
tests/unit/test_skills/test_activator.py::TestSkillActivator::test_find_relevant_skills_invalid_indices PASSED [ 71%]
tests/unit/test_skills/test_activator.py::TestSkillActivator::test_find_relevant_skills_out_of_range_indices PASSED [ 71%]
tests/unit/test_skills/test_activator.py::TestSkillActivator::test_find_relevant_skills_error_fallback PASSED [ 71%]
tests/unit/test_skills/test_activator.py::TestSkillActivator::test_find_relevant_skills_none_metadata PASSED [ 71%]
tests/unit/test_skills/test_activator.py::TestSkillActivator::test_find_relevant_skills_duplicate_indices PASSED [ 71%]
tests/unit/test_skills/test_activator.py::TestSkillActivator::test_find_relevant_skills_prompt_formatting PASSED [ 71%]
tests/unit/test_skills/test_activator.py::TestSkillActivator::test_find_relevant_skills_all_skills PASSED [ 71%]
tests/unit/test_skills/test_activator.py::TestSkillActivator::test_find_relevant_skills_case_insensitive_none PASSED [ 71%]
tests/unit/test_skills/test_activator.py::TestSkillActivator::test_find_relevant_skills_with_newlines PASSED [ 71%]
tests/unit/test_skills/test_activator_dependency_validation.py::TestDependencyValidation::test_validate_dependencies_success PASSED [ 72%]
tests/unit/test_skills/test_activator_dependency_validation.py::TestDependencyValidation::test_validate_dependencies_missing PASSED [ 72%]
tests/unit/test_skills/test_activator_dependency_validation.py::TestDependencyValidation::test_validate_dependencies_no_registry PASSED [ 72%]
tests/unit/test_skills/test_activator_dependency_validation.py::TestDependencyValidation::test_activate_with_validation_success PASSED [ 72%]
tests/unit/test_skills/test_activator_dependency_validation.py::TestDependencyValidation::test_activate_with_missing_tools PASSED [ 72%]
tests/unit/test_skills/test_activator_dependency_validation.py::TestDependencyValidation::test_validate_dependencies_with_tool_manager_success PASSED [ 72%]
tests/unit/test_skills/test_activator_dependency_validation.py::TestDependencyValidation::test_validate_dependencies_with_tool_manager_missing PASSED [ 72%]
tests/unit/test_skills/test_activator_dependency_validation.py::TestDependencyValidation::test_validate_dependencies_tool_manager_priority PASSED [ 72%]
tests/unit/test_skills/test_activator_phase2.py::TestSkillActivatorPhase2::test_determine_activation_mode_default_injection PASSED [ 72%]
tests/unit/test_skills/test_activator_phase2.py::TestSkillActivatorPhase2::test_determine_activation_mode_with_scripts PASSED [ 72%]
tests/unit/test_skills/test_activator_phase2.py::TestSkillActivatorPhase2::test_determine_activation_mode_multi_turn PASSED [ 72%]
tests/unit/test_skills/test_activator_phase2.py::TestSkillActivatorPhase2::test_determine_activation_mode_explicit PASSED [ 72%]
tests/unit/test_skills/test_activator_phase2.py::TestSkillActivatorPhase2::test_activate_injection PASSED [ 73%]
tests/unit/test_skills/test_activator_phase2.py::TestSkillActivatorPhase2::test_activate_instantiation PASSED [ 73%]
tests/unit/test_skills/test_loader.py::TestSkillLoader::test_load_skill_exists PASSED [ 73%]
tests/unit/test_skills/test_loader.py::TestSkillLoader::test_load_skill_not_exists PASSED [ 73%]
tests/unit/test_skills/test_loader.py::TestSkillLoader::test_list_skills PASSED [ 73%]
tests/unit/test_skills/test_loader.py::TestSkillLoader::test_list_skill_metadata PASSED [ 73%]
tests/unit/test_skills/test_models.py::TestSkillDefinition::test_skill_definition_init_minimal PASSED [ 73%]
tests/unit/test_skills/test_models.py::TestSkillDefinition::test_skill_definition_init_full PASSED [ 73%]
tests/unit/test_skills/test_models.py::TestSkillDefinition::test_get_full_instructions_minimal PASSED [ 73%]
tests/unit/test_skills/test_models.py::TestSkillDefinition::test_get_full_instructions_full PASSED [ 73%]
tests/unit/test_skills/test_models.py::TestSkillDefinition::test_get_metadata_summary PASSED [ 73%]
tests/unit/test_skills/test_script_compiler.py::TestScriptCompiler::test_compile_simple_script PASSED [ 73%]
tests/unit/test_skills/test_script_compiler.py::TestScriptCompiler::test_compile_script_with_execute PASSED [ 74%]
tests/unit/test_skills/test_script_compiler.py::TestScriptCompiler::test_compile_script_with_parameters PASSED [ 74%]
tests/unit/test_skills/test_script_compiler.py::TestScriptCompiler::test_compile_empty_script_raises_error PASSED [ 74%]
tests/unit/test_skills/test_script_compiler.py::TestScriptCompiler::test_compile_script_without_main_raises_error PASSED [ 74%]
tests/unit/test_skills/test_script_compiler.py::TestScriptCompiler::test_compile_script_with_syntax_error PASSED [ 74%]
tests/unit/test_skills/test_skill_registry.py::TestSkillRegistryInit::test_skill_registry_init PASSED [ 74%]
tests/unit/test_skills/test_skill_registry.py::TestRegisterSkill::test_register_skill_basic PASSED [ 74%]
tests/unit/test_skills/test_skill_registry.py::TestRegisterSkill::test_register_skill_with_source PASSED [ 74%]
tests/unit/test_skills/test_skill_registry.py::TestGetSkill::test_get_skill_exists PASSED [ 74%]
tests/unit/test_skills/test_skill_registry.py::TestGetSkill::test_get_skill_not_exists PASSED [ 74%]
tests/unit/test_skills/test_skill_registry.py::TestListSkills::test_list_skills_empty PASSED [ 74%]
tests/unit/test_skills/test_skill_registry.py::TestListSkills::test_list_skills_multiple PASSED [ 74%]
tests/unit/test_skills/test_skill_registry.py::TestGetSkillsBySource::test_get_skills_by_source_python PASSED [ 75%]
tests/unit/test_skills/test_skill_registry.py::TestGetSkillsBySource::test_get_skills_by_source_empty PASSED [ 75%]
tests/unit/test_tools/test_context_tools.py::TestCreateMemoryQueryTools::test_create_query_l1_memory_tool PASSED [ 75%]
tests/unit/test_tools/test_context_tools.py::TestCreateMemoryQueryTools::test_create_query_l2_memory_tool PASSED [ 75%]
tests/unit/test_tools/test_context_tools.py::TestCreateMemoryQueryTools::test_create_query_l3_memory_tool PASSED [ 75%]
tests/unit/test_tools/test_context_tools.py::TestCreateMemoryQueryTools::test_create_query_l4_memory_tool PASSED [ 75%]
tests/unit/test_tools/test_context_tools.py::TestExecuteQueryL1MemoryTool::test_execute_query_l1_memory_tool PASSED [ 75%]
tests/unit/test_tools/test_context_tools.py::TestExecuteQueryL1MemoryTool::test_execute_query_l1_memory_tool_with_limit PASSED [ 75%]
tests/unit/test_tools/test_context_tools.py::TestExecuteQueryL2MemoryTool::test_execute_query_l2_memory_tool PASSED [ 75%]
tests/unit/test_tools/test_context_tools.py::TestExecuteQueryL2MemoryTool::test_execute_query_l2_memory_tool_long_content PASSED [ 75%]
tests/unit/test_tools/test_context_tools.py::TestExecuteQueryL3MemoryTool::test_execute_query_l3_memory_tool PASSED [ 75%]
tests/unit/test_tools/test_context_tools.py::TestExecuteQueryL4MemoryTool::test_execute_query_l4_memory_tool PASSED [ 75%]
tests/unit/test_tools/test_context_tools.py::TestCreateAllContextTools::test_create_all_context_tools PASSED [ 76%]
tests/unit/test_tools/test_context_tools.py::TestContextToolExecutor::test_execute_query_l1_memory PASSED [ 76%]
tests/unit/test_tools/test_context_tools.py::TestContextToolExecutor::test_execute_unknown_tool PASSED [ 76%]
tests/unit/test_tools/test_converters.py::TestFunctionToMCPConvert::test_convert_simple_function PASSED [ 76%]
tests/unit/test_tools/test_converters.py::TestFunctionToMCPConvert::test_convert_with_custom_name PASSED [ 76%]
tests/unit/test_tools/test_converters.py::TestFunctionToMCPConvert::test_convert_function_with_self_parameter PASSED [ 76%]
tests/unit/test_tools/test_converters.py::TestFunctionToMCPConvert::test_convert_function_with_cls_parameter PASSED [ 76%]
tests/unit/test_tools/test_converters.py::TestFunctionToMCPConvert::test_convert_function_with_default_parameters PASSED [ 76%]
tests/unit/test_tools/test_converters.py::TestFunctionToMCPConvert::test_convert_function_with_no_docstring PASSED [ 76%]
tests/unit/test_tools/test_converters.py::TestFunctionToMCPConvert::test_convert_function_with_all_types PASSED [ 76%]
tests/unit/test_tools/test_converters.py::TestFunctionToMCPConvert::test_convert_function_with_optional_only PASSED [ 76%]
tests/unit/test_tools/test_converters.py::TestFunctionToMCPConvert::test_convert_function_no_parameters PASSED [ 76%]
tests/unit/test_tools/test_converters.py::TestFunctionToMCPMapType::test_map_string_type PASSED [ 77%]
tests/unit/test_tools/test_converters.py::TestFunctionToMCPMapType::test_map_int_type PASSED [ 77%]
tests/unit/test_tools/test_converters.py::TestFunctionToMCPMapType::test_map_float_type PASSED [ 77%]
tests/unit/test_tools/test_converters.py::TestFunctionToMCPMapType::test_map_bool_type PASSED [ 77%]
tests/unit/test_tools/test_converters.py::TestFunctionToMCPMapType::test_map_list_type PASSED [ 77%]
tests/unit/test_tools/test_converters.py::TestFunctionToMCPMapType::test_map_dict_type PASSED [ 77%]
tests/unit/test_tools/test_converters.py::TestFunctionToMCPMapType::test_map_unknown_type_defaults_to_string PASSED [ 77%]
tests/unit/test_tools/test_converters.py::TestFunctionToMCPMapType::test_map_generic_list PASSED [ 77%]
tests/unit/test_tools/test_converters.py::TestFunctionToMCPMapType::test_map_generic_dict PASSED [ 77%]
tests/unit/test_tools/test_converters.py::TestFunctionToMCPIntegration::test_convert_class_instance_method_full_workflow PASSED [ 77%]
tests/unit/test_tools/test_converters.py::TestFunctionToMCPIntegration::test_convert_class_method_full_workflow PASSED [ 77%]
tests/unit/test_tools/test_done_tool.py::TestCreateDoneTool::test_create_done_tool PASSED [ 77%]
tests/unit/test_tools/test_done_tool.py::TestCreateDoneTool::test_done_tool_parameters PASSED [ 78%]
tests/unit/test_tools/test_done_tool.py::TestCreateDoneTool::test_done_tool_description PASSED [ 78%]
tests/unit/test_tools/test_done_tool.py::TestExecuteDoneTool::test_execute_done_tool_with_message PASSED [ 78%]
tests/unit/test_tools/test_done_tool.py::TestExecuteDoneTool::test_execute_done_tool_default_message PASSED [ 78%]
tests/unit/test_tools/test_done_tool.py::TestExecuteDoneTool::test_execute_done_tool_empty_message PASSED [ 78%]
tests/unit/test_tools/test_done_tool.py::TestExecuteDoneTool::test_execute_done_tool_always_raises PASSED [ 78%]
tests/unit/test_tools/test_done_tool.py::TestExecuteDoneTool::test_task_complete_exception_attributes PASSED [ 78%]
tests/unit/test_tools/test_done_tool.py::TestExecuteDoneTool::test_execute_done_tool_unicode_message PASSED [ 78%]
tests/unit/test_tools/test_done_tool.py::TestExecuteDoneTool::test_execute_done_tool_long_message PASSED [ 78%]
tests/unit/test_tools/test_executor.py::TestToolExecutorInit::test_init_default PASSED [ 78%]
tests/unit/test_tools/test_executor.py::TestToolExecutorInit::test_init_with_parallel_false PASSED [ 78%]
tests/unit/test_tools/test_executor.py::TestIsReadOnly::test_read_only_tools[read_file] PASSED [ 78%]
tests/unit/test_tools/test_executor.py::TestIsReadOnly::test_read_only_tools[get_data] PASSED [ 79%]
tests/unit/test_tools/test_executor.py::TestIsReadOnly::test_read_only_tools[list_files] PASSED [ 79%]
tests/unit/test_tools/test_executor.py::TestIsReadOnly::test_read_only_tools[ls] PASSED [ 79%]
tests/unit/test_tools/test_executor.py::TestIsReadOnly::test_read_only_tools[grep_pattern] PASSED [ 79%]
tests/unit/test_tools/test_executor.py::TestIsReadOnly::test_read_only_tools[find_items] PASSED [ 79%]
tests/unit/test_tools/test_executor.py::TestIsReadOnly::test_read_only_tools[search_db] PASSED [ 79%]
tests/unit/test_tools/test_executor.py::TestIsReadOnly::test_read_only_tools[query_info] PASSED [ 79%]
tests/unit/test_tools/test_executor.py::TestIsReadOnly::test_read_only_tools[fetch_url] PASSED [ 79%]
tests/unit/test_tools/test_executor.py::TestIsReadOnly::test_read_only_tools[view_content] PASSED [ 79%]
tests/unit/test_tools/test_executor.py::TestIsReadOnly::test_read_only_tools[READ_FILE] PASSED [ 79%]
tests/unit/test_tools/test_executor.py::TestIsReadOnly::test_read_only_tools[GET_DATA] PASSED [ 79%]
tests/unit/test_tools/test_executor.py::TestIsReadOnly::test_read_only_tools[LIST_FILES] PASSED [ 79%]
tests/unit/test_tools/test_executor.py::TestIsReadOnly::test_read_only_tools[LS] PASSED [ 80%]
tests/unit/test_tools/test_executor.py::TestIsReadOnly::test_read_only_tools[GREP_PATTERN] PASSED [ 80%]
tests/unit/test_tools/test_executor.py::TestIsReadOnly::test_write_tools[write_file] PASSED [ 80%]
tests/unit/test_tools/test_executor.py::TestIsReadOnly::test_write_tools[create_dir] PASSED [ 80%]
tests/unit/test_tools/test_executor.py::TestIsReadOnly::test_write_tools[delete_item] PASSED [ 80%]
tests/unit/test_tools/test_executor.py::TestIsReadOnly::test_write_tools[update_data] PASSED [ 80%]
tests/unit/test_tools/test_executor.py::TestIsReadOnly::test_write_tools[remove_file] PASSED [ 80%]
tests/unit/test_tools/test_executor.py::TestIsReadOnly::test_write_tools[execute_command] PASSED [ 80%]
tests/unit/test_tools/test_executor.py::TestIsReadOnly::test_write_tools[run_bash] PASSED [ 80%]
tests/unit/test_tools/test_executor.py::TestExecuteBatch::test_empty_tool_calls PASSED [ 80%]
tests/unit/test_tools/test_executor.py::TestExecuteBatch::test_single_tool_call PASSED [ 80%]
tests/unit/test_tools/test_executor.py::TestExecuteBatch::test_multiple_read_only_tools_parallel PASSED [ 80%]
tests/unit/test_tools/test_executor.py::TestExecuteBatch::test_write_then_read_tools PASSED [ 81%]
tests/unit/test_tools/test_executor.py::TestExecuteBatch::test_write_tools_sequential PASSED [ 81%]
tests/unit/test_tools/test_executor.py::TestExecuteBatch::test_parallel_disabled PASSED [ 81%]
tests/unit/test_tools/test_executor.py::TestExecuteBatch::test_read_then_write_tools PASSED [ 81%]
tests/unit/test_tools/test_executor.py::TestExecuteBatch::test_mixed_read_write_read_tools PASSED [ 81%]
tests/unit/test_tools/test_executor.py::TestExecuteBatch::test_tool_execution_error PASSED [ 81%]
tests/unit/test_tools/test_executor.py::TestExecuteBatch::test_results_in_original_order PASSED [ 81%]
tests/unit/test_tools/test_executor.py::TestExecuteBatch::test_consecutive_write_groups PASSED [ 81%]
tests/unit/test_tools/test_executor.py::TestExecuteBatch::test_write_between_reads PASSED [ 81%]
tests/unit/test_tools/test_index_context_tools.py::TestCreateTools::test_create_list_l2_memory_tool PASSED [ 81%]
tests/unit/test_tools/test_index_context_tools.py::TestCreateTools::test_create_list_l3_memory_tool PASSED [ 81%]
tests/unit/test_tools/test_index_context_tools.py::TestCreateTools::test_create_select_memory_by_index_tool PASSED [ 81%]
tests/unit/test_tools/test_index_context_tools.py::TestExecuteListL2MemoryTool::test_execute_list_l2_memory_tool PASSED [ 82%]
tests/unit/test_tools/test_index_context_tools.py::TestExecuteListL2MemoryTool::test_execute_list_l2_memory_tool_with_limit PASSED [ 82%]
tests/unit/test_tools/test_index_context_tools.py::TestExecuteListL2MemoryTool::test_execute_list_l2_memory_tool_empty PASSED [ 82%]
tests/unit/test_tools/test_index_context_tools.py::TestExecuteListL3MemoryTool::test_execute_list_l3_memory_tool PASSED [ 82%]
tests/unit/test_tools/test_index_context_tools.py::TestExecuteListL3MemoryTool::test_execute_list_l3_memory_tool_with_tags PASSED [ 82%]
tests/unit/test_tools/test_index_context_tools.py::TestExecuteListL3MemoryTool::test_execute_list_l3_memory_tool_with_content PASSED [ 82%]
tests/unit/test_tools/test_index_context_tools.py::TestExecuteSelectMemoryByIndexTool::test_execute_select_memory_by_index_l2 PASSED [ 82%]
tests/unit/test_tools/test_index_context_tools.py::TestExecuteSelectMemoryByIndexTool::test_execute_select_memory_by_index_l3 PASSED [ 82%]
tests/unit/test_tools/test_index_context_tools.py::TestExecuteSelectMemoryByIndexTool::test_execute_select_memory_by_index_l3_with_result_summary PASSED [ 82%]
tests/unit/test_tools/test_index_context_tools.py::TestExecuteSelectMemoryByIndexTool::test_execute_select_memory_by_index_no_indices PASSED [ 82%]
tests/unit/test_tools/test_index_context_tools.py::TestExecuteSelectMemoryByIndexTool::test_execute_select_memory_by_index_invalid_layer PASSED [ 82%]
tests/unit/test_tools/test_index_context_tools.py::TestExecuteSelectMemoryByIndexTool::test_execute_select_memory_by_index_out_of_range PASSED [ 82%]
tests/unit/test_tools/test_index_context_tools.py::TestExecuteSelectMemoryByIndexTool::test_execute_select_memory_by_index_single_index PASSED [ 83%]
tests/unit/test_tools/test_index_context_tools.py::TestCreateAllIndexContextTools::test_create_all_index_context_tools PASSED [ 83%]
tests/unit/test_tools/test_index_context_tools.py::TestIndexContextToolExecutor::test_executor_init PASSED [ 83%]
tests/unit/test_tools/test_index_context_tools.py::TestIndexContextToolExecutor::test_executor_execute_list_l2 PASSED [ 83%]
tests/unit/test_tools/test_index_context_tools.py::TestIndexContextToolExecutor::test_executor_execute_list_l3 PASSED [ 83%]
tests/unit/test_tools/test_index_context_tools.py::TestIndexContextToolExecutor::test_executor_execute_select_memory PASSED [ 83%]
tests/unit/test_tools/test_index_context_tools.py::TestIndexContextToolExecutor::test_executor_execute_unknown_tool PASSED [ 83%]
tests/unit/test_tools/test_mcp_adapter.py::TestMCPAdapter::test_init_without_event_bus PASSED [ 83%]
tests/unit/test_tools/test_mcp_adapter.py::TestMCPAdapter::test_init_with_event_bus PASSED [ 83%]
tests/unit/test_tools/test_mcp_adapter.py::TestMCPAdapter::test_register_server PASSED [ 83%]
tests/unit/test_tools/test_mcp_adapter.py::TestMCPAdapter::test_register_server_discovers_tools PASSED [ 83%]
tests/unit/test_tools/test_mcp_adapter.py::TestMCPAdapter::test_discover_tools PASSED [ 84%]
tests/unit/test_tools/test_mcp_adapter.py::TestMCPAdapter::test_discover_tools_server_not_found PASSED [ 84%]
tests/unit/test_tools/test_mcp_adapter.py::TestMCPAdapter::test_discover_tools_registers_tools PASSED [ 84%]
tests/unit/test_tools/test_mcp_adapter.py::TestMCPAdapter::test_call_tool_success PASSED [ 84%]
tests/unit/test_tools/test_mcp_adapter.py::TestMCPAdapter::test_call_tool_not_found PASSED [ 84%]
tests/unit/test_tools/test_mcp_adapter.py::TestMCPAdapter::test_call_tool_server_not_found PASSED [ 84%]
tests/unit/test_tools/test_mcp_adapter.py::TestMCPAdapter::test_call_tool_with_error PASSED [ 84%]
tests/unit/test_tools/test_mcp_adapter.py::TestMCPAdapter::test_call_tool_sends_event PASSED [ 84%]
tests/unit/test_tools/test_mcp_adapter.py::TestMCPAdapter::test_list_tools PASSED [ 84%]
tests/unit/test_tools/test_mcp_adapter.py::TestMCPAdapter::test_list_tools_empty PASSED [ 84%]
tests/unit/test_tools/test_mcp_adapter.py::TestMCPAdapter::test_get_tool_definition PASSED [ 84%]
tests/unit/test_tools/test_mcp_adapter.py::TestMCPAdapter::test_get_tool_definition_not_found PASSED [ 84%]
tests/unit/test_tools/test_mcp_adapter.py::TestMCPAdapter::test_multiple_servers PASSED [ 85%]
tests/unit/test_tools/test_mcp_adapter.py::TestMCPAdapter::test_call_tool_without_event_bus PASSED [ 85%]
tests/unit/test_tools/test_mcp_adapter.py::TestMCPAdapter::test_register_server_without_event_bus PASSED [ 85%]
tests/unit/test_tools/test_memory_management_tools.py::TestMemoryStatsTool::test_create_get_memory_stats_tool PASSED [ 85%]
tests/unit/test_tools/test_memory_management_tools.py::TestMemoryStatsTool::test_execute_get_memory_stats_tool PASSED [ 85%]
tests/unit/test_tools/test_memory_management_tools.py::TestMemoryStatsTool::test_execute_get_memory_stats_with_l4_disabled PASSED [ 85%]
tests/unit/test_tools/test_memory_management_tools.py::TestMemoryStatsTool::test_execute_get_memory_stats_empty_memory PASSED [ 85%]
tests/unit/test_tools/test_memory_management_tools.py::TestMemoryStatsTool::test_execute_get_memory_stats_usage_percent PASSED [ 85%]
tests/unit/test_tools/test_memory_management_tools.py::TestPromoteTaskToL2Tool::test_create_promote_task_to_l2_tool PASSED [ 85%]
tests/unit/test_tools/test_memory_management_tools.py::TestPromoteTaskToL2Tool::test_execute_promote_task_to_l2_success PASSED [ 85%]
tests/unit/test_tools/test_memory_management_tools.py::TestPromoteTaskToL2Tool::test_execute_promote_task_to_l2_not_found PASSED [ 85%]
tests/unit/test_tools/test_memory_management_tools.py::TestPromoteTaskToL2Tool::test_execute_promote_task_to_l2_already_in_l2 PASSED [ 85%]
tests/unit/test_tools/test_memory_management_tools.py::TestPromoteTaskToL2Tool::test_execute_promote_task_to_l2_default_reason PASSED [ 86%]
tests/unit/test_tools/test_memory_management_tools.py::TestPromoteTaskToL2Tool::test_execute_promote_task_to_l2_multiple_tasks PASSED [ 86%]
tests/unit/test_tools/test_memory_management_tools.py::TestCreateTaskSummaryTool::test_create_create_task_summary_tool PASSED [ 86%]
tests/unit/test_tools/test_memory_management_tools.py::TestCreateTaskSummaryTool::test_execute_create_task_summary_success PASSED [ 86%]
tests/unit/test_tools/test_memory_management_tools.py::TestCreateTaskSummaryTool::test_execute_create_task_summary_not_found PASSED [ 86%]
tests/unit/test_tools/test_memory_management_tools.py::TestCreateTaskSummaryTool::test_execute_create_task_summary_minimal_args PASSED [ 86%]
tests/unit/test_tools/test_memory_management_tools.py::TestCreateTaskSummaryTool::test_execute_create_task_summary_with_tags PASSED [ 86%]
tests/unit/test_tools/test_memory_management_tools.py::TestCreateTaskSummaryTool::test_execute_create_task_summary_check_l3_content PASSED [ 86%]
tests/unit/test_tools/test_memory_management_tools.py::TestCreateAllMemoryManagementTools::test_create_all_memory_management_tools PASSED [ 86%]
tests/unit/test_tools/test_memory_management_tools.py::TestMemoryManagementToolExecutor::test_init PASSED [ 86%]
tests/unit/test_tools/test_memory_management_tools.py::TestMemoryManagementToolExecutor::test_execute_get_memory_stats PASSED [ 86%]
tests/unit/test_tools/test_memory_management_tools.py::TestMemoryManagementToolExecutor::test_execute_promote_task_to_l2 PASSED [ 86%]
tests/unit/test_tools/test_memory_management_tools.py::TestMemoryManagementToolExecutor::test_execute_create_task_summary PASSED [ 87%]
tests/unit/test_tools/test_memory_management_tools.py::TestMemoryManagementToolExecutor::test_execute_unknown_tool PASSED [ 87%]
tests/unit/test_tools/test_memory_management_tools.py::TestMemoryManagementToolExecutor::test_execute_passes_args_correctly PASSED [ 87%]
tests/unit/test_tools/test_sandbox.py::TestSandboxInit::test_init_with_existing_dir PASSED [ 87%]
tests/unit/test_tools/test_sandbox.py::TestSandboxInit::test_init_with_string_path PASSED [ 87%]
tests/unit/test_tools/test_sandbox.py::TestSandboxInit::test_init_auto_creates_directory PASSED [ 87%]
tests/unit/test_tools/test_sandbox.py::TestSandboxInit::test_init_no_auto_create_fails PASSED [ 87%]
tests/unit/test_tools/test_sandbox.py::TestSandboxInit::test_init_with_file_raises_error PASSED [ 87%]
tests/unit/test_tools/test_sandbox.py::TestSandboxValidatePath::test_validate_relative_path PASSED [ 87%]
tests/unit/test_tools/test_sandbox.py::TestSandboxValidatePath::test_validate_nested_path PASSED [ 87%]
tests/unit/test_tools/test_sandbox.py::TestSandboxValidatePath::test_validate_absolute_path_inside_sandbox PASSED [ 87%]
tests/unit/test_tools/test_sandbox.py::TestSandboxValidatePath::test_validate_absolute_path_outside_sandbox PASSED [ 87%]
tests/unit/test_tools/test_sandbox.py::TestSandboxValidatePath::test_validate_path_with_parent_reference PASSED [ 88%]
tests/unit/test_tools/test_sandbox.py::TestSandboxValidatePath::test_validate_path_with_parent_reference_escaping PASSED [ 88%]
tests/unit/test_tools/test_sandbox.py::TestSandboxValidatePath::test_validate_dot_path PASSED [ 88%]
tests/unit/test_tools/test_sandbox.py::TestSandboxValidatePath::test_validate_empty_path PASSED [ 88%]
tests/unit/test_tools/test_sandbox.py::TestSandboxValidatePath::test_validate_symlink_inside_sandbox PASSED [ 88%]
tests/unit/test_tools/test_sandbox.py::TestSandboxValidatePath::test_validate_symlink_outside_sandbox PASSED [ 88%]
tests/unit/test_tools/test_sandbox.py::TestSandboxViolation::test_sandbox_violation_is_exception PASSED [ 88%]
tests/unit/test_tools/test_sandbox.py::TestSandboxViolation::test_sandbox_violation_can_be_raised PASSED [ 88%]
tests/unit/test_tools/test_sandbox.py::TestSandboxViolation::test_sandbox_violation_message PASSED [ 88%]
tests/unit/test_tools/test_sandbox.py::TestSandboxViolation::test_sandbox_violation_with_cause PASSED [ 88%]
tests/unit/test_tools/test_sandbox.py::TestSandboxSafeMethods::test_safe_read_existing_file PASSED [ 88%]
tests/unit/test_tools/test_sandbox.py::TestSandboxSafeMethods::test_safe_read_nonexistent_file PASSED [ 88%]
tests/unit/test_tools/test_sandbox.py::TestSandboxSafeMethods::test_safe_read_directory_raises_error PASSED [ 89%]
tests/unit/test_tools/test_sandbox.py::TestSandboxSafeMethods::test_safe_write_new_file PASSED [ 89%]
tests/unit/test_tools/test_sandbox.py::TestSandboxSafeMethods::test_safe_write_with_subdirectories PASSED [ 89%]
tests/unit/test_tools/test_sandbox.py::TestSandboxSafeMethods::test_safe_write_without_create_dirs PASSED [ 89%]
tests/unit/test_tools/test_sandbox.py::TestSandboxSafeMethods::test_safe_write_without_create_dirs_fails PASSED [ 89%]
tests/unit/test_tools/test_sandbox.py::TestSandboxSafeMethods::test_safe_exists_true PASSED [ 89%]
tests/unit/test_tools/test_sandbox.py::TestSandboxSafeMethods::test_safe_exists_false PASSED [ 89%]
tests/unit/test_tools/test_sandbox.py::TestSandboxSafeMethods::test_safe_list_dir PASSED [ 89%]
tests/unit/test_tools/test_sandbox.py::TestSandboxSafeMethods::test_safe_list_dir_nonexistent_directory PASSED [ 89%]
tests/unit/test_tools/test_sandbox.py::TestSandboxSafeMethods::test_safe_list_dir_file_not_directory PASSED [ 89%]
tests/unit/test_tools/test_sandbox.py::TestSandboxPathMethods::test_get_relative_path PASSED [ 89%]
tests/unit/test_tools/test_sandbox.py::TestSandboxPathMethods::test_get_relative_path_with_absolute PASSED [ 89%]
tests/unit/test_tools/test_sandbox.py::TestSandboxPathMethods::test_get_relative_path_root PASSED [ 90%]
tests/unit/test_tools/test_sandbox.py::TestSandboxPathMethods::test_get_absolute_path PASSED [ 90%]
tests/unit/test_tools/test_sandbox.py::TestSandboxPathMethods::test_get_absolute_path_with_path_object PASSED [ 90%]
tests/unit/test_tools/test_sandbox.py::TestSandboxExecutePython::test_execute_python_simple_code XFAIL [ 90%]
tests/unit/test_tools/test_sandbox.py::TestSandboxExecutePython::test_execute_python_with_params XFAIL [ 90%]
tests/unit/test_tools/test_sandbox.py::TestSandboxExecutePython::test_execute_python_with_allowed_module XFAIL [ 90%]
tests/unit/test_tools/test_sandbox.py::TestSandboxExecutePython::test_execute_python_with_json_module XFAIL [ 90%]
tests/unit/test_tools/test_sandbox.py::TestSandboxExecutePython::test_execute_python_invalid_code XPASS [ 90%]
tests/unit/test_tools/test_sandbox.py::TestSandboxExecutePython::test_execute_python_timeout XFAIL [ 90%]
tests/unit/test_tools/test_sandbox.py::TestSandboxExecutePython::test_execute_python_unsafe_operation PASSED [ 90%]
tests/unit/test_tools/test_sandbox.py::TestSandboxExecutePython::test_execute_python_with_print XFAIL [ 90%]
tests/unit/test_tools/test_sandbox.py::TestSandboxExecutePython::test_execute_python_custom_timeout XFAIL [ 90%]
tests/unit/test_tools/test_sandbox.py::TestSandboxExecutePython::test_execute_python_custom_allowed_modules XFAIL [ 91%]
tests/unit/test_tools/test_sandbox.py::TestSandboxValidatePathErrors::test_validate_path_with_resolve_error PASSED [ 91%]
tests/unit/test_tools/test_sandbox_manager.py::TestToolScope::test_tool_scope_values PASSED [ 91%]
tests/unit/test_tools/test_sandbox_manager.py::TestToolWrapper::test_wrapper_sandboxed_execution PASSED [ 91%]
tests/unit/test_tools/test_sandbox_manager.py::TestToolWrapper::test_wrapper_direct_execution PASSED [ 91%]
tests/unit/test_tools/test_sandbox_manager.py::TestSandboxToolManagerInit::test_init_with_sandbox PASSED [ 91%]
tests/unit/test_tools/test_sandbox_manager.py::TestSandboxToolManagerInit::test_init_with_event_bus PASSED [ 91%]
tests/unit/test_tools/test_sandbox_manager.py::TestSandboxToolManagerRegister::test_register_tool PASSED [ 91%]
tests/unit/test_tools/test_sandbox_manager.py::TestSandboxToolManagerRegister::test_register_duplicate_tool_raises_error PASSED [ 91%]
tests/unit/test_tools/test_sandbox_manager.py::TestSandboxToolManagerRegister::test_unregister_tool PASSED [ 91%]
tests/unit/test_tools/test_sandbox_manager.py::TestSandboxToolManagerRegister::test_unregister_nonexistent_tool PASSED [ 91%]
tests/unit/test_tools/test_sandbox_manager.py::TestSandboxToolManagerExecute::test_execute_sandboxed_tool PASSED [ 91%]
tests/unit/test_tools/test_sandbox_manager.py::TestSandboxToolManagerExecute::test_execute_system_tool PASSED [ 92%]
tests/unit/test_tools/test_sandbox_manager.py::TestSandboxToolManagerExecute::test_execute_nonexistent_tool_raises_error PASSED [ 92%]
tests/unit/test_tools/test_sandbox_manager.py::TestSandboxToolManagerExecute::test_execute_tool_with_error PASSED [ 92%]
tests/unit/test_tools/test_sandbox_manager.py::TestSandboxToolManagerList::test_list_tools PASSED [ 92%]
tests/unit/test_tools/test_sandbox_manager.py::TestSandboxToolManagerList::test_list_tool_names PASSED [ 92%]
tests/unit/test_tools/test_sandbox_manager.py::TestSandboxToolManagerList::test_get_tools_by_scope PASSED [ 92%]
tests/unit/test_tools/test_sandbox_manager.py::TestSandboxToolManagerList::test_get_tool PASSED [ 92%]
tests/unit/test_tools/test_sandbox_manager.py::TestSandboxToolManagerList::test_get_nonexistent_tool PASSED [ 92%]
tests/unit/test_tools/test_sandbox_manager.py::TestSandboxToolManagerContains::test_contains_registered_tool PASSED [ 92%]
tests/unit/test_tools/test_sandbox_manager.py::TestSandboxToolManagerContains::test_contains_nonexistent_tool PASSED [ 92%]
tests/unit/test_tools/test_sandbox_manager.py::TestSandboxToolManagerMCP::test_mcp_adapter_property PASSED [ 92%]
tests/unit/test_tools/test_sandbox_manager.py::TestSandboxToolManagerMCP::test_mcp_adapter_created_after_registration PASSED [ 92%]
tests/unit/test_tools/test_search_tools.py::TestSearchToolsInit::test_init_with_sandbox PASSED [ 93%]
tests/unit/test_tools/test_search_tools.py::TestSearchToolsGlob::test_glob_all_python_files PASSED [ 93%]
tests/unit/test_tools/test_search_tools.py::TestSearchToolsGlob::test_glob_recursive_pattern PASSED [ 93%]
tests/unit/test_tools/test_search_tools.py::TestSearchToolsGlob::test_glob_with_max_results PASSED [ 93%]
tests/unit/test_tools/test_search_tools.py::TestSearchToolsGlob::test_glob_no_matches PASSED [ 93%]
tests/unit/test_tools/test_search_tools.py::TestSearchToolsGlob::test_glob_directory_only PASSED [ 93%]
tests/unit/test_tools/test_search_tools.py::TestSearchToolsGrep::test_grep_case_sensitive PASSED [ 93%]
tests/unit/test_tools/test_search_tools.py::TestSearchToolsGrep::test_grep_case_insensitive PASSED [ 93%]
tests/unit/test_tools/test_search_tools.py::TestSearchToolsGrep::test_grep_with_file_pattern PASSED [ 93%]
tests/unit/test_tools/test_search_tools.py::TestSearchToolsGrep::test_grep_with_max_results PASSED [ 93%]
tests/unit/test_tools/test_search_tools.py::TestSearchToolsGrep::test_grep_regex_pattern PASSED [ 93%]
tests/unit/test_tools/test_search_tools.py::TestSearchToolsGrep::test_grep_no_matches PASSED [ 93%]
tests/unit/test_tools/test_search_tools.py::TestSearchToolsGrep::test_grep_invalid_regex PASSED [ 94%]
tests/unit/test_tools/test_search_tools.py::TestSearchToolsBinaryFileHandling::test_grep_skips_binary_files PASSED [ 94%]
tests/unit/test_tools/test_search_tools.py::TestSearchToolsBinaryFileHandling::test_grep_skips_directories PASSED [ 94%]
tests/unit/test_tools/test_search_tools.py::TestCreateSearchTools::test_create_search_tools_returns_list PASSED [ 94%]
tests/unit/test_tools/test_search_tools.py::TestCreateSearchTools::test_create_search_tools_has_glob PASSED [ 94%]
tests/unit/test_tools/test_search_tools.py::TestCreateSearchTools::test_create_search_tools_has_grep PASSED [ 94%]
tests/unit/test_tools/test_search_tools.py::TestCreateSearchTools::test_create_search_tools_glob_has_executor PASSED [ 94%]
tests/unit/test_tools/test_search_tools.py::TestCreateSearchTools::test_create_search_tools_grep_has_executor PASSED [ 94%]
tests/unit/test_tools/test_search_tools.py::TestCreateSearchTools::test_create_search_tools_glob_parameters PASSED [ 94%]
tests/unit/test_tools/test_search_tools.py::TestCreateSearchTools::test_create_search_tools_grep_parameters PASSED [ 94%]
tests/unit/test_tools/test_todo_tool.py::TestTodoToolInit::test_init_with_sandbox PASSED [ 94%]
tests/unit/test_tools/test_todo_tool.py::TestTodoToolInit::test_init_with_custom_storage_file PASSED [ 94%]
tests/unit/test_tools/test_todo_tool.py::TestTodoToolLoadTodos::test_load_todos_no_file PASSED [ 95%]
tests/unit/test_tools/test_todo_tool.py::TestTodoToolLoadTodos::test_load_todos_empty_file PASSED [ 95%]
tests/unit/test_tools/test_todo_tool.py::TestTodoToolLoadTodos::test_load_todos_with_valid_data PASSED [ 95%]
tests/unit/test_tools/test_todo_tool.py::TestTodoToolLoadTodos::test_load_todos_invalid_json PASSED [ 95%]
tests/unit/test_tools/test_todo_tool.py::TestTodoToolLoadTodos::test_load_todos_non_list_data PASSED [ 95%]
tests/unit/test_tools/test_todo_tool.py::TestTodoToolSaveTodos::test_save_todos_creates_file PASSED [ 95%]
tests/unit/test_tools/test_todo_tool.py::TestTodoToolSaveTodos::test_save_todos_content PASSED [ 95%]
tests/unit/test_tools/test_todo_tool.py::TestTodoToolWriteTodos::test_write_todos_valid PASSED [ 95%]
tests/unit/test_tools/test_todo_tool.py::TestTodoToolWriteTodos::test_write_todos_missing_content PASSED [ 95%]
tests/unit/test_tools/test_todo_tool.py::TestTodoToolWriteTodos::test_write_todos_missing_status PASSED [ 95%]
tests/unit/test_tools/test_todo_tool.py::TestTodoToolWriteTodos::test_write_todos_invalid_status PASSED [ 95%]
tests/unit/test_tools/test_todo_tool.py::TestTodoToolWriteTodos::test_write_todos_valid_statuses PASSED [ 95%]
tests/unit/test_tools/test_todo_tool.py::TestTodoToolWriteTodos::test_write_todos_empty_list PASSED [ 96%]
tests/unit/test_tools/test_todo_tool.py::TestTodoToolWriteTodos::test_write_todos_overwrites_existing PASSED [ 96%]
tests/unit/test_tools/test_todo_tool.py::TestTodoToolReadTodos::test_read_todos_no_file PASSED [ 96%]
tests/unit/test_tools/test_todo_tool.py::TestTodoToolReadTodos::test_read_todos_with_data PASSED [ 96%]
tests/unit/test_tools/test_todo_tool.py::TestCreateTodoTool::test_create_todo_tool_returns_dict PASSED [ 96%]
tests/unit/test_tools/test_todo_tool.py::TestCreateTodoTool::test_create_todo_tool_structure PASSED [ 96%]
tests/unit/test_tools/test_todo_tool.py::TestCreateTodoTool::test_create_todo_tool_has_executor PASSED [ 96%]
tests/unit/test_tools/test_todo_tool.py::TestCreateTodoTool::test_create_todo_tool_parameters PASSED [ 96%]
tests/unit/test_tools/test_todo_tool.py::TestCreateTodoTool::test_create_todo_tool_description_has_path PASSED [ 96%]
tests/unit/test_tools/test_todo_tool.py::TestCreateTodoTool::test_executor_works PASSED [ 96%]
tests/unit/test_tools/test_tool_creation.py::TestCreateToolCreationTool::test_create_tool_creation_tool PASSED [ 96%]
tests/unit/test_tools/test_tool_creation.py::TestDynamicToolExecutor::test_init PASSED [ 96%]
tests/unit/test_tools/test_tool_creation.py::TestDynamicToolExecutor::test_create_simple_tool PASSED [ 97%]
tests/unit/test_tools/test_tool_creation.py::TestDynamicToolExecutor::test_create_tool_with_parameters PASSED [ 97%]
tests/unit/test_tools/test_tool_creation.py::TestDynamicToolExecutor::test_create_sync_tool PASSED [ 97%]
tests/unit/test_tools/test_tool_creation.py::TestDynamicToolExecutor::test_execute_created_tool PASSED [ 97%]
tests/unit/test_tools/test_tool_creation.py::TestDynamicToolExecutor::test_execute_tool_with_defaults PASSED [ 97%]
tests/unit/test_tools/test_tool_creation.py::TestDynamicToolExecutor::test_create_tool_forbidden_keywords PASSED [ 97%]
tests/unit/test_tools/test_tool_creation.py::TestDynamicToolExecutor::test_create_tool_missing_function PASSED [ 97%]
tests/unit/test_tools/test_tool_creation.py::TestDynamicToolExecutor::test_create_tool_syntax_error PASSED [ 97%]
tests/unit/test_tools/test_tool_creation.py::TestDynamicToolExecutor::test_execute_nonexistent_tool PASSED [ 97%]
tests/unit/test_tools/test_tool_creation.py::TestDynamicToolExecutor::test_execute_tool_exception PASSED [ 97%]
tests/unit/test_tools/test_tool_creation.py::TestDynamicToolExecutor::test_get_tool_definitions PASSED [ 97%]
tests/unit/test_tools/test_tool_creation.py::TestDynamicToolExecutor::test_create_tool_with_long_description PASSED [ 97%]
tests/unit/test_tools/test_tool_creation.py::TestDynamicToolExecutor::test_multiple_executions PASSED [ 98%]
tests/unit/test_tools/test_tool_creation.py::TestDynamicToolExecutor::test_create_tool_with_complex_logic PASSED [ 98%]
tests/unit/test_tools/test_tool_creation.py::TestDynamicToolExecutor::test_create_tool_with_math_operations PASSED [ 98%]
tests/unit/test_tools/test_tool_creation.py::TestDynamicToolExecutor::test_validate_tool_code_all_forbidden_keywords PASSED [ 98%]
tests/unit/test_tools/test_toolset.py::TestCreateSandboxToolset::test_create_full_toolset PASSED [ 98%]
tests/unit/test_tools/test_toolset.py::TestCreateSandboxToolset::test_create_toolset_without_bash PASSED [ 98%]
tests/unit/test_tools/test_toolset.py::TestCreateSandboxToolset::test_create_toolset_without_files PASSED [ 98%]
tests/unit/test_tools/test_toolset.py::TestCreateSandboxToolset::test_create_toolset_without_search PASSED [ 98%]
tests/unit/test_tools/test_toolset.py::TestCreateSandboxToolset::test_create_toolset_without_todo PASSED [ 98%]
tests/unit/test_tools/test_toolset.py::TestCreateSandboxToolset::test_create_toolset_without_http PASSED [ 98%]
tests/unit/test_tools/test_toolset.py::TestCreateSandboxToolset::test_create_toolset_with_event_bus PASSED [ 98%]
tests/unit/test_tools/test_toolset.py::TestCreateSandboxToolset::test_create_toolset_with_path_object PASSED [ 98%]
tests/unit/test_tools/test_toolset.py::TestCreateSandboxToolset::test_create_toolset_auto_create_sandbox PASSED [ 99%]
tests/unit/test_tools/test_toolset.py::TestCreateSandboxToolset::test_create_toolset_no_auto_create PASSED [ 99%]
tests/unit/test_tools/test_toolset.py::TestCreateMinimalToolset::test_create_minimal_toolset PASSED [ 99%]
tests/unit/test_tools/test_toolset.py::TestCreateMinimalToolset::test_minimal_toolset_no_bash PASSED [ 99%]
tests/unit/test_tools/test_toolset.py::TestCreateCodingToolset::test_create_coding_toolset PASSED [ 99%]
tests/unit/test_tools/test_toolset.py::TestCreateCodingToolset::test_coding_toolset_has_bash PASSED [ 99%]
tests/unit/test_tools/test_toolset.py::TestCreateCodingToolset::test_coding_toolset_has_search PASSED [ 99%]
tests/unit/test_tools/test_toolset.py::TestCreateCodingToolset::test_coding_toolset_no_todo PASSED [ 99%]
tests/unit/test_tools/test_toolset.py::TestCreateWebToolset::test_create_web_toolset PASSED [ 99%]
tests/unit/test_tools/test_toolset.py::TestCreateWebToolset::test_web_toolset_has_http PASSED [ 99%]
tests/unit/test_tools/test_toolset.py::TestCreateWebToolset::test_web_toolset_no_bash PASSED [ 99%]
tests/unit/test_tools/test_toolset.py::TestCreateWebToolset::test_web_toolset_no_search PASSED [100%]

=================================== FAILURES ===================================
______________________ test_parent_child_synchronization _______________________
tests/performance/test_phase2_consistency.py:38: in test_parent_child_synchronization
    assert entry is not None, "Parent cannot read child's SHARED memory"
E   AssertionError: Parent cannot read child's SHARED memory
E   assert None is not None
___________________________ test_agent_response_time ___________________________
tests/performance/test_phase2_performance.py:69: in test_agent_response_time
    assert result.status == TaskStatus.COMPLETED
E   AssertionError: assert <TaskStatus.FAILED: 'failed'> == <TaskStatus.COMPLETED: 'completed'>
E     - completed
E     + failed
=========================== short test summary info ============================
FAILED tests/performance/test_phase2_consistency.py::test_parent_child_synchronization
FAILED tests/performance/test_phase2_performance.py::test_agent_response_time
= 2 failed, 1170 passed, 11 skipped, 8 xfailed, 3 xpassed, 4 warnings in 317.32s (0:05:17) =
